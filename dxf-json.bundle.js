var e,a;e=this,a=function(e){"use strict";e.BlockTypeFlag=void 0,(R=e.BlockTypeFlag||(e.BlockTypeFlag={}))[R.None=0]="None",R[R.Anonymous=1]="Anonymous",R[R.NonConstant=2]="NonConstant",R[R.Xref=4]="Xref",R[R.XrefOverlay=8]="XrefOverlay",R[R.ExternallyDependent=16]="ExternallyDependent",R[R.ResolvedOrDependent=32]="ResolvedOrDependent",R[R.ReferencedXref=64]="ReferencedXref",e.ColorCode=void 0,(k=e.ColorCode||(e.ColorCode={}))[k.BYBLOCK=0]="BYBLOCK",k[k.BYLAYER=256]="BYLAYER",e.DimensionType=void 0,(w=e.DimensionType||(e.DimensionType={}))[w.Rotated=0]="Rotated",w[w.Aligned=1]="Aligned",w[w.Angular=2]="Angular",w[w.Diameter=3]="Diameter",w[w.Radius=4]="Radius",w[w.Angular3Point=5]="Angular3Point",w[w.Ordinate=6]="Ordinate",w[w.ReferenceIsExclusive=32]="ReferenceIsExclusive",w[w.IsOrdinateXTypeFlag=64]="IsOrdinateXTypeFlag",w[w.IsCustomTextPositionFlag=128]="IsCustomTextPositionFlag",e.AttachmentPoint=void 0,(V=e.AttachmentPoint||(e.AttachmentPoint={}))[V.TopLeft=1]="TopLeft",V[V.TopCenter=2]="TopCenter",V[V.TopRight=3]="TopRight",V[V.MiddleLeft=4]="MiddleLeft",V[V.MiddleCenter=5]="MiddleCenter",V[V.MiddleRight=6]="MiddleRight",V[V.BottomLeft=7]="BottomLeft",V[V.BottomCenter=8]="BottomCenter",V[V.BottomRight=9]="BottomRight",e.DimensionTextLineSpacing=void 0,(B=e.DimensionTextLineSpacing||(e.DimensionTextLineSpacing={}))[B.AtLeast=1]="AtLeast",B[B.Exact=2]="Exact",e.DimensionTextVertical=void 0,(H=e.DimensionTextVertical||(e.DimensionTextVertical={}))[H.Center=0]="Center",H[H.Above=1]="Above",H[H.Outside=2]="Outside",H[H.JIS=3]="JIS",H[H.Below=4]="Below",e.DimensionZeroSuppression=void 0,(G=e.DimensionZeroSuppression||(e.DimensionZeroSuppression={}))[G.Feet=0]="Feet",G[G.None=1]="None",G[G.Inch=2]="Inch",G[G.FeetAndInch=3]="FeetAndInch",G[G.Leading=4]="Leading",G[G.Trailing=8]="Trailing",G[G.LeadingAndTrailing=12]="LeadingAndTrailing",e.DimensionZeroSuppressionAngular=void 0,(U=e.DimensionZeroSuppressionAngular||(e.DimensionZeroSuppressionAngular={}))[U.None=0]="None",U[U.Leading=1]="Leading",U[U.Trailing=2]="Trailing",U[U.LeadingAndTrailing=3]="LeadingAndTrailing",e.DimensionTextHorizontal=void 0,(W=e.DimensionTextHorizontal||(e.DimensionTextHorizontal={}))[W.Center=0]="Center",W[W.Left=1]="Left",W[W.Right=2]="Right",W[W.OverFirst=3]="OverFirst",W[W.OverSecond=4]="OverSecond",e.DimensionToleranceTextVertical=void 0,(Y=e.DimensionToleranceTextVertical||(e.DimensionToleranceTextVertical={}))[Y.Bottom=0]="Bottom",Y[Y.Center=1]="Center",Y[Y.Top=2]="Top",e.HatchSolidFill=void 0,(j=e.HatchSolidFill||(e.HatchSolidFill={}))[j.PatternFill=0]="PatternFill",j[j.SolidFill=1]="SolidFill",e.HatchAssociativity=void 0,(z=e.HatchAssociativity||(e.HatchAssociativity={}))[z.NonAssociative=0]="NonAssociative",z[z.Associative=1]="Associative",e.HatchStyle=void 0,(X=e.HatchStyle||(e.HatchStyle={}))[X.Normal=0]="Normal",X[X.Outer=1]="Outer",X[X.Ignore=2]="Ignore",e.HatchPatternType=void 0,(K=e.HatchPatternType||(e.HatchPatternType={}))[K.UserDefined=0]="UserDefined",K[K.Predefined=1]="Predefined",K[K.Custom=2]="Custom",e.HatchBoundaryAnnotation=void 0,(Z=e.HatchBoundaryAnnotation||(e.HatchBoundaryAnnotation={}))[Z.NotAnnotated=0]="NotAnnotated",Z[Z.Annotated=1]="Annotated",e.HatchGradientFlag=void 0,(J=e.HatchGradientFlag||(e.HatchGradientFlag={}))[J.Solid=0]="Solid",J[J.Gradient=1]="Gradient",e.HatchGradientColorFlag=void 0,($=e.HatchGradientColorFlag||(e.HatchGradientColorFlag={}))[$.TwoColor=0]="TwoColor",$[$.OneColor=1]="OneColor",e.BoundaryPathTypeFlag=void 0,(q=e.BoundaryPathTypeFlag||(e.BoundaryPathTypeFlag={}))[q.Default=0]="Default",q[q.External=1]="External",q[q.Polyline=2]="Polyline",q[q.Derived=4]="Derived",q[q.Textbox=8]="Textbox",q[q.Outermost=16]="Outermost",e.BoundaryPathEdgeType=void 0,(Q=e.BoundaryPathEdgeType||(e.BoundaryPathEdgeType={}))[Q.Line=1]="Line",Q[Q.Circular=2]="Circular",Q[Q.Elliptic=3]="Elliptic",Q[Q.Spline=4]="Spline",e.ObscuredLineTypes=void 0,(ee=e.ObscuredLineTypes||(e.ObscuredLineTypes={}))[ee.Off=0]="Off",ee[ee.Solid=1]="Solid",ee[ee.Dashed=2]="Dashed",ee[ee.Dotted=3]="Dotted",ee[ee.ShotDash=4]="ShotDash",ee[ee.MediumDash=5]="MediumDash",ee[ee.LongDash=6]="LongDash",ee[ee.DoubleShortDash=7]="DoubleShortDash",ee[ee.DoubleMediumDash=8]="DoubleMediumDash",ee[ee.DoubleLongDash=9]="DoubleLongDash",ee[ee.DoubleMediumLongDash=10]="DoubleMediumLongDash",ee[ee.SparseDot=11]="SparseDot";let a={DRAGVS:"NULL",INTERFERECOLOR:1,INTERFEREOBJVS:"Conceptual",INTERFEREVPVS:"3d Wireframe",OBSLTYPE:e.ObscuredLineTypes.Off,SHADEDIF:70};function r(e,a,r){return e.code===a&&(null==r||e.value===r)}function t(e){let a={};e.rewind();let r=e.next(),t=r.code;if(a.x=r.value,(r=e.next()).code!==t+10)throw Error("Expected code for point value to be 20 but got "+r.code+".");return(a.y=r.value,(r=e.next()).code!==t+20)?e.rewind():a.z=r.value,a}e.ReservedLineweight=void 0,(ea=e.ReservedLineweight||(e.ReservedLineweight={}))[ea.Standard=-3]="Standard",ea[ea.ByLayer=-2]="ByLayer",ea[ea.ByBlock=-1]="ByBlock",e.Measurement=void 0,(er=e.Measurement||(e.Measurement={}))[er.English=0]="English",er[er.Metric=1]="Metric",e.ViewportStatusFlag=void 0,(et=e.ViewportStatusFlag||(e.ViewportStatusFlag={}))[et.PERSPECTIVE_MODE=1]="PERSPECTIVE_MODE",et[et.FRONT_CLIPPING=2]="FRONT_CLIPPING",et[et.BACK_CLIPPING=4]="BACK_CLIPPING",et[et.UCS_FOLLOW=8]="UCS_FOLLOW",et[et.FRONT_CLIP_NOT_AT_EYE=16]="FRONT_CLIP_NOT_AT_EYE",et[et.UCS_ICON_VISIBILITY=32]="UCS_ICON_VISIBILITY",et[et.UCS_ICON_AT_ORIGIN=64]="UCS_ICON_AT_ORIGIN",et[et.FAST_ZOOM=128]="FAST_ZOOM",et[et.SNAP_MODE=256]="SNAP_MODE",et[et.GRID_MODE=512]="GRID_MODE",et[et.ISOMETRIC_SNAP_STYLE=1024]="ISOMETRIC_SNAP_STYLE",et[et.HIDE_PLOT_MODE=2048]="HIDE_PLOT_MODE",et[et.K_ISO_PAIR_TOP=4096]="K_ISO_PAIR_TOP",et[et.K_ISO_PAIR_RIGHT=8192]="K_ISO_PAIR_RIGHT",et[et.VIEWPORT_ZOOM_LOCKING=16384]="VIEWPORT_ZOOM_LOCKING",et[et.UNUSED=32768]="UNUSED",et[et.NON_RECTANGULAR_CLIPPING=65536]="NON_RECTANGULAR_CLIPPING",et[et.VIEWPORT_OFF=131072]="VIEWPORT_OFF",et[et.GRID_BEYOND_DRAWING_LIMITS=262144]="GRID_BEYOND_DRAWING_LIMITS",et[et.ADAPTIVE_GRID_DISPLAY=524288]="ADAPTIVE_GRID_DISPLAY",et[et.SUBDIVISION_BELOW_SPACING=1048576]="SUBDIVISION_BELOW_SPACING",et[et.GRID_FOLLOWS_WORKPLANE=2097152]="GRID_FOLLOWS_WORKPLANE",e.RenderMode=void 0,(en=e.RenderMode||(e.RenderMode={}))[en.OPTIMIZED_2D=0]="OPTIMIZED_2D",en[en.WIREFRAME=1]="WIREFRAME",en[en.HIDDEN_LINE=2]="HIDDEN_LINE",en[en.FLAT_SHADED=3]="FLAT_SHADED",en[en.GOURAUD_SHADED=4]="GOURAUD_SHADED",en[en.FLAT_SHADED_WITH_WIREFRAME=5]="FLAT_SHADED_WITH_WIREFRAME",en[en.GOURAUD_SHADED_WITH_WIREFRAME=6]="GOURAUD_SHADED_WITH_WIREFRAME",e.UCSPerViewport=void 0,(eo=e.UCSPerViewport||(e.UCSPerViewport={}))[eo.UCS_UNCHANGED=0]="UCS_UNCHANGED",eo[eo.HAS_OWN_UCS=1]="HAS_OWN_UCS",e.OrthographicType=void 0,(es=e.OrthographicType||(e.OrthographicType={}))[es.NON_ORTHOGRAPHIC=0]="NON_ORTHOGRAPHIC",es[es.TOP=1]="TOP",es[es.BOTTOM=2]="BOTTOM",es[es.FRONT=3]="FRONT",es[es.BACK=4]="BACK",es[es.LEFT=5]="LEFT",es[es.RIGHT=6]="RIGHT",e.ShadePlotMode=void 0,(ei=e.ShadePlotMode||(e.ShadePlotMode={}))[ei.AS_DISPLAYED=0]="AS_DISPLAYED",ei[ei.WIREFRAME=1]="WIREFRAME",ei[ei.HIDDEN=2]="HIDDEN",ei[ei.RENDERED=3]="RENDERED",e.DefaultLightingType=void 0,(ec=e.DefaultLightingType||(e.DefaultLightingType={}))[ec.ONE_DISTANT_LIGHT=0]="ONE_DISTANT_LIGHT",ec[ec.TWO_DISTANT_LIGHTS=1]="TWO_DISTANT_LIGHTS";let n=Symbol();function o(e,a){return(t,o,s)=>{let i=e.reduce((e,a)=>{a.pushContext&&e.push({});let r=e[e.length-1];for(let e of"number"==typeof a.code?[a.code]:a.code){let t=r[e]??(r[e]=[]);a.isMultiple&&t.length&&console.warn(`Snippet ${t.at(-1).name} for code(${e}) is shadowed by ${a.name}`),t.push(a)}return e},[{}]),c=!1,d=i.length-1;for(;!r(t,0,"EOF");){let e=function(e,a,r){return e.find((e,t)=>t>=r&&e[a]?.length)}(i,t.code,d),a=e?.[t.code].at(-1);if(!e||!a){o.rewind();break}a.isMultiple||e[t.code].pop();let{name:r,parser:l,isMultiple:u}=a,p=l?.(t,o,s);if(p===n){o.rewind();break}if(r){let[e,a]=function(e,a){let r=a.split("."),t=e;for(let e=0;e<r.length-1;++e){let a=r[e];Object.hasOwn(t,a)||(t[a]={}),t=t[a]}return[t,r.at(-1)]}(s,r);u?(Object.hasOwn(e,a)||(e[a]=[]),e[a].push(p)):e[a]=p}a.pushContext&&(d-=1),c=!0,t=o.next()}return a&&Object.setPrototypeOf(s,a),c}}function s({value:e}){return e}function i(e,a){return t(a)}function c({value:e}){return!!e}var d,l,u,p,m,E,h,I,f,T,D,b,O,g,S,y,N,A,L,_,P,v,C,M,F,x,R,k,w,V,B,H,G,U,W,Y,j,z,X,K,Z,J,$,q,Q,ee,ea,er,et,en,eo,es,ei,ec,ed,el,eu,ep,em,eE,eh,eI=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215];function ef(e,a){if(!r(e,1001))throw Error("XData must starts with code 1001");let n={appName:e.value,value:[]};e=a.next();let o=[n.value];for(;!r(e,0,"EOF")&&e.code>=1e3;){let r=o.at(-1);switch(e.code){case 1002:"{"===e.value?o.push([]):(o.pop(),o.at(-1)?.push(r));break;case 1e3:case 1004:case 1040:case 1070:case 1071:r.push({type:eT(e.code),value:e.value});break;case 1003:r.push({name:"layer",type:eT(e.code),value:e.value});break;case 1005:r.push({name:"handle",type:eT(e.code),value:e.value});break;case 1010:r.push({type:eT(e.code),value:t(a)});break;case 1011:r.push({name:"worldSpacePosition",type:eT(e.code),value:t(a)});break;case 1012:r.push({name:"worldSpaceDisplacement",type:eT(e.code),value:t(a)});break;case 1013:r.push({name:"worldSpaceDirection",type:eT(e.code),value:t(a)});break;case 1041:r.push({name:"distance",type:eT(e.code),value:e.value});break;case 1042:r.push({name:"scale",type:eT(e.code),value:e.value})}e=a.next()}return a.rewind(),n}function eT(e){switch(e){case 1e3:case 1003:case 1005:return"string";case 1004:return"hex";case 1040:case 1041:case 1042:return"real";case 1070:return"integer";case 1071:return"long";case 1010:case 1011:case 1012:case 1013:return"point";default:return""}}function eD(e,a,t){if(r(a,102))return eS(a,t),!0;switch(a.code){case 0:e.type=a.value;break;case 5:e.handle=a.value;break;case 330:e.ownerDictionarySoftId?e.ownerBlockRecordSoftId=a.value:e.ownerDictionarySoftId=a.value;break;case 360:e.ownerdictionaryHardId=a.value;break;case 67:e.isInPaperSpace=!!a.value;break;case 8:e.layer=a.value;break;case 6:e.lineType=a.value;break;case 347:e.materialObjectHardId=a.value;break;case 62:e.colorIndex=a.value,e.color=eI[Math.abs(a.value)];break;case 370:e.lineweight=a.value;break;case 48:e.lineTypeScale=a.value;break;case 60:e.isVisible=!!a.value;break;case 92:e.proxyByte=a.value;break;case 310:e.proxyEntity=a.value;break;case 100:break;case 420:e.color=a.value;break;case 430:e.transparency=a.value;break;case 390:e.plotStyleHardId=a.value;break;case 284:e.shadowMode=a.value;break;case 1001:e.xdata=ef(a,t);break;default:return!1}return!0}let eb=0;function eO(e){if(!e)throw TypeError("entity cannot be undefined or null");e.handle||(e.handle=eb++)}e.ShadowMode=void 0,(d=e.ShadowMode||(e.ShadowMode={}))[d.CAST_AND_RECEIVE=0]="CAST_AND_RECEIVE",d[d.CAST=1]="CAST",d[d.RECEIVE=2]="RECEIVE",d[d.IGNORE=3]="IGNORE";let eg=[{code:1001,name:"xdata",parser:ef},{code:284,name:"shadowMode",parser:s},{code:390,name:"plotStyleHardId",parser:s},{code:440,name:"transparency",parser:s},{code:430,name:"colorName",parser:s},{code:420,name:"color",parser:s},{code:310,name:"proxyEntity",parser:s},{code:92,name:"proxyByte",parser:s},{code:60,name:"isVisible",parser:c},{code:48,name:"lineTypeScale",parser:s},{code:370,name:"lineweight",parser:s},{code:62,name:"colorIndex",parser(e,a,r){let t=e.value;return r.color=eI[Math.abs(t)],t}},{code:347,name:"materialObjectHardId",parser:s},{code:6,name:"lineType",parser:s},{code:8,name:"layer",parser:s},{code:410,name:"layoutTabName",parser:s},{code:67,name:"isInPaperSpace",parser:c},{code:100},{code:330,name:"ownerBlockRecordSoftId",parser:s},{code:102,parser:eS},{code:102,parser:eS},{code:102,parser:eS},{code:5,name:"handle",parser:s}];function eS(e,a){for(e=a.next();!r(e,102)&&!r(e,0,"EOF");)e=a.next()}function ey(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}let eN={extrusionDirection:{x:0,y:0,z:1}},eA=[{code:210,name:"extrusionDirection",parser:i},{code:51,name:"endAngle",parser:s},{code:50,name:"startAngle",parser:s},{code:100,name:"subclassMarker",parser:s},{code:40,name:"radius",parser:s},{code:10,name:"center",parser:i},{code:39,name:"thickness",parser:s},{code:100},...eg];class eL{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){ey(this,"parser",o(eA,eN))}}function e_(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}ey(eL,"ForEntityName","ARC"),e.AttributeFlag=void 0,(l=e.AttributeFlag||(e.AttributeFlag={}))[l.NONE=0]="NONE",l[l.INVISIBLE=1]="INVISIBLE",l[l.CONSTANT=2]="CONSTANT",l[l.VERIFICATION_REQUIRED=4]="VERIFICATION_REQUIRED",l[l.PRESET=8]="PRESET",e.AttDefMTextFlag=void 0,(u=e.AttDefMTextFlag||(e.AttDefMTextFlag={}))[u.MULTILINE=2]="MULTILINE",u[u.CONSTANT_MULTILINE=4]="CONSTANT_MULTILINE",e.TextGenerationFlag=void 0,(p=e.TextGenerationFlag||(e.TextGenerationFlag={}))[p.NONE=0]="NONE",p[p.MIRRORED_X=2]="MIRRORED_X",p[p.MIRRORED_Y=4]="MIRRORED_Y",e.TextHorizontalAlign=void 0,(m=e.TextHorizontalAlign||(e.TextHorizontalAlign={}))[m.LEFT=0]="LEFT",m[m.CENTER=1]="CENTER",m[m.RIGHT=2]="RIGHT",m[m.ALIGNED=3]="ALIGNED",m[m.MIDDLE=4]="MIDDLE",m[m.FIT=5]="FIT",e.TextVerticalAlign=void 0,(E=e.TextVerticalAlign||(e.TextVerticalAlign={}))[E.BASELINE=0]="BASELINE",E[E.BOTTOM=1]="BOTTOM",E[E.MIDDLE=2]="MIDDLE",E[E.TOP=3]="TOP";let eP={thickness:0,rotation:0,xScale:1,obliqueAngle:0,styleName:"STANDARD",generationFlag:0,halign:e.TextHorizontalAlign.LEFT,valign:e.TextVerticalAlign.BASELINE,extrusionDirection:{x:0,y:0,z:1}},ev=[{code:73,name:"valign",parser:s},{code:100},{code:210,name:"extrusionDirection",parser:i},{code:11,name:"endPoint",parser:i},{code:72,name:"valign",parser:s},{code:72,name:"halign",parser:s},{code:71,name:"generationFlag",parser:s},{code:7,name:"styleName",parser:s},{code:51,name:"obliqueAngle",parser:s},{code:41,name:"xScale",parser:s},{code:50,name:"rotation",parser:s},{code:1,name:"text",parser:s},{code:40,name:"textHeight",parser:s},{code:10,name:"startPoint",parser:i},{code:39,name:"thickness",parser:s},{code:100,name:"subclassMarker",parser:s},...eg];class eC{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){e_(this,"parser",o(ev,eP))}}function eM(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}e_(eC,"ForEntityName","TEXT");let eF={...eP},ex=[{code:2},{code:40,name:"annotationScale",parser:s},{code:10,name:"alignmentPoint",parser:i},{code:340,name:"secondaryAttributesHardIds",isMultiple:!0,parser:s},{code:70,name:"numberOfSecondaryAttributes",parser:s},{code:70,name:"isReallyLocked",parser:c},{code:70,name:"mtextFlag",parser:s},{code:280,name:"isDuplicatedRecord",parser:c},{code:100},{code:280,name:"isLocked",parser:c},{code:74,name:"valign",parser:s},{code:73},{code:70,name:"attributeFlag",parser:s},{code:2,name:"tag",parser:s},{code:3,name:"prompt",parser:s},{code:280},{code:100,name:"subclassMarker",parser:s},...ev.slice(2)];class eR{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){eM(this,"parser",o(ex,eF))}}function ek(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}eM(eR,"ForEntityName","ATTDEF");let ew={thickness:0,extrusionDirection:{x:0,y:0,z:1}},eV=[{code:210,name:"extrusionDirection",parser:i},{code:40,name:"radius",parser:s},{code:10,name:"center",parser:i},{code:39,name:"thickness",parser:s},{code:100,name:"subclassMarker",parser:s},...eg];class eB{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){ek(this,"parser",o(eV,ew))}}ek(eB,"ForEntityName","CIRCLE");class eH{parseEntity(e,a){let n={};for(;!r(a,0,"EOF");){if(0===a.code){e.rewind();break}(function(e,a,r){switch(a.code){case 100:e.subclassMarker=a.value;break;case 280:e.version=a.value;break;case 2:e.name=a.value;break;case 10:e.definitionPoint=t(r);break;case 11:e.textPoint=t(r);break;case 12:e.insertionPoint=t(r);break;case 13:e.subDefinitionPoint1=t(r);break;case 14:e.subDefinitionPoint2=t(r);break;case 15:e.centerPoint=t(r);break;case 16:e.arcPoint=t(r);break;case 70:e.dimensionType=a.value;break;case 71:e.attachmentPoint=a.value;break;case 72:e.textLineSpacingStyle=a.value;break;case 40:e.leaderLength=a.value;break;case 41:e.textLineSpacingFactor=a.value;break;case 42:e.measurement=a.value;break;case 1:e.text=a.value;break;case 50:e.rotationAngle=a.value;break;case 52:e.obliqueAngle=a.value;break;case 53:e.textRotation=a.value;break;case 51:e.ocsRotation=a.value;break;case 210:e.extrusionDirection=t(r);break;case 3:e.styleName=a.value;break;default:eD(e,a,r)}})(n,a,e),a=e.next()}return n}}function eG(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}I="DIMENSION",(h="ForEntityName")in eH?Object.defineProperty(eH,h,{value:I,enumerable:!0,configurable:!0,writable:!0}):eH[h]=I;let eU={extrusionDirection:{x:0,y:0,z:1}},eW=[{code:42,name:"endAngle",parser:s},{code:41,name:"startAngle",parser:s},{code:40,name:"axisRatio",parser:s},{code:210,name:"extrusionDirection",parser:i},{code:11,name:"majorAxisEndPoint",parser:i},{code:10,name:"center",parser:i},{code:100,name:"subclassMarker",parser:s},...eg];class eY{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){eG(this,"parser",o(eW,eU))}}eG(eY,"ForEntityName","ELLIPSE");let ej=[{code:330,name:"sourceBoundaryObjects",parser:s,isMultiple:!0},{code:97,name:"numberOfSourceBoundaryObjects",parser:s}],ez=[{code:11,name:"end",parser:i},{code:10,name:"start",parser:i}],eX=[{code:73,name:"isCCW",parser:c},{code:51,name:"endAngle",parser:s},{code:50,name:"startAngle",parser:s},{code:40,name:"radius",parser:s},{code:10,name:"center",parser:i}],eK=[{code:73,name:"isCCW",parser:c},{code:51,name:"endAngle",parser:s},{code:50,name:"startAngle",parser:s},{code:40,name:"lengthOfMinorAxis",parser:s},{code:11,name:"end",parser:i},{code:10,name:"center",parser:i}],eZ=[{code:13,name:"endTangent",parser:i},{code:12,name:"startTangent",parser:i},{code:11,name:"fitDatum",isMultiple:!0,parser:i},{code:97,name:"numberOfFitData",parser:s},{code:10,name:"controlPoints",isMultiple:!0,parser(e,a){let r={...t(a),weight:1};return 42===(e=a.next()).code?r.weight=e.value:a.rewind(),r}},{code:40,name:"knots",isMultiple:!0,parser:s},{code:96,name:"numberOfControlPoints",parser:s},{code:95,name:"numberOfKnots",parser:s},{code:74,name:"isPeriodic",parser:c},{code:73,name:"splineFlag",parser:s},{code:94,name:"degree",parser:s}],eJ={[e.BoundaryPathEdgeType.Line]:ez,[e.BoundaryPathEdgeType.Circular]:eX,[e.BoundaryPathEdgeType.Elliptic]:eK,[e.BoundaryPathEdgeType.Spline]:eZ},e$=[...ej,{code:72,name:"edges",parser(e,a){let r={type:e.value},t=o(eJ[r.type]);if(!t)throw Error(`Invalid edge type ${r.type}`);return t(e=a.next(),a,r),r},isMultiple:!0},{code:93,name:"numberOfEdges",parser:s}],eq=[...ej,{code:10,name:"vertices",parser(e,a){let r={...t(a),bulge:0};return 42===(e=a.next()).code?r.bulge=e.value:a.rewind(),r},isMultiple:!0},{code:93,name:"numberOfVertices",parser:s},{code:73,name:"isClosed",parser:c},{code:72,name:"hasBulge",parser:c}],eQ=[{code:49,name:"dashLengths",parser:s,isMultiple:!0},{code:79,name:"numberOfDashLengths",parser:s},{code:45,name:"offset",parser:e0},{code:43,name:"base",parser:e0},{code:53,name:"angle",parser:s}];function e0(e,a){let r=e.code+1,t={x:e.value,y:1};return(e=a.next()).code===r?t.y=e.value:a.rewind(),t}function e1(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}let e4={extrusionDirection:{x:0,y:0,z:1},gradientRotation:0,colorTint:0},e2=[{code:470},{code:463},{code:462,name:"colorTint",parser:s},{code:461,name:"gradientDefinition",parser:s},{code:460,name:"gradientRotation",parser:s},{code:453,name:"numberOfColors",parser:s},{code:452,name:"gradientColorFlag",parser:s},{code:451},{code:450,name:"gradientFlag",parser:s},{code:10,name:"seedPoints",parser:i,isMultiple:!0},{code:99},{code:11,name:"offsetVector",parser:i},{code:98,name:"numberOfSeedPoints",parser:s},{code:47,name:"pixelSize",parser:s},{code:53,name:"definitionLines",parser:function(e,a){let r={};return o(eQ)(e,a,r),r},isMultiple:!0},{code:78,name:"numberOfDefinitionLines",parser:s},{code:77,name:"isDouble",parser:c},{code:73,name:"isAnnotated",parser:c},{code:41,name:"patternScale",parser:s},{code:52,name:"patternAngle",parser:s},{code:76,name:"patternType",parser:s},{code:75,name:"hatchStyle",parser:s},{code:92,name:"boundaryPaths",parser:function(a,r){let t={boundaryPathTypeFlag:a.value},n=t.boundaryPathTypeFlag&e.BoundaryPathTypeFlag.Polyline;return(a=r.next(),n)?o(eq)(a,r,t):o(e$)(a,r,t),t},isMultiple:!0},{code:91,name:"numberOfBoundaryPaths",parser:s},{code:71,name:"associativity",parser:s},{code:63,name:"patternFillColor",parser:s},{code:70,name:"solidFill",parser:s},{code:2,name:"patternName",parser:s},{code:210,name:"extrusionDirection",parser:i},{code:10,name:"elevationPoint",parser:i},{code:100,name:"subclassMarker",parser:s,pushContext:!0},...eg];class e3{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){e1(this,"parser",o(e2,e4))}}function e7(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}e1(e3,"ForEntityName","HATCH");let e5={xScale:1,yScale:1,zScale:1,rotation:0,columnCount:0,rowCount:0,columnSpacing:0,rowSpacing:0,extrusionDirection:{x:0,y:0,z:1}},e6=[{code:210,name:"extrusionDirection",parser:i},{code:45,name:"rowSpacing",parser:s},{code:44,name:"columnSpacing",parser:s},{code:71,name:"rowCount",parser:s},{code:70,name:"columnCount",parser:s},{code:50,name:"rotation",parser:s},{code:43,name:"zScale",parser:s},{code:42,name:"yScale",parser:s},{code:41,name:"xScale",parser:s},{code:10,name:"insertionPoint",parser:i},{code:2,name:"name",parser:s},{code:66,name:"isVariableAttributes",parser:c},{code:100,name:"subclassMarker",parser:s},...eg];class e9{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){e7(this,"parser",o(e6,e5))}}function e8(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}e7(e9,"ForEntityName","INSERT");let ae={isArrowheadEnabled:!0},aa=[{code:213,name:"offsetFromAnnotation",parser:i},{code:212,name:"offsetFromBlock",parser:i},{code:211,name:"horizontalDirection",parser:i},{code:210,name:"normal",parser:i},{code:340,name:"associatedAnnotation",parser:s},{code:77,name:"byBlockColor",parser:s},{code:10,name:"vertices",parser:i,isMultiple:!0},{code:76,name:"numberOfVertices",parser:s},{code:41,name:"textWidth",parser:s},{code:40,name:"textHeight",parser:s},{code:75,name:"isHooklineExists",parser:c},{code:74,name:"isHooklineSameDirection",parser:c},{code:73,name:"leaderCreationFlag",parser:s},{code:72,name:"isSpline",parser:c},{code:71,name:"isArrowheadEnabled",parser:c},{code:3,name:"styleName",parser:s},{code:100,name:"subclassMarker",parser:s},...eg];class ar{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){e8(this,"parser",o(aa,ae))}}function at(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}e8(ar,"ForEntityName","LEADER"),e.LeaderCreationFlag=void 0,(f=e.LeaderCreationFlag||(e.LeaderCreationFlag={}))[f.TextAnnotation=0]="TextAnnotation",f[f.ToleranceAnnotation=1]="ToleranceAnnotation",f[f.BlockReferenceAnnotation=2]="BlockReferenceAnnotation",f[f.NoAnnotation=3]="NoAnnotation";let an={thickness:0,extrusionDirection:{x:0,y:0,z:1}},ao=[{code:210,name:"extrusionDirection",parser:i},{code:11,name:"endPoint",parser:i},{code:10,name:"startPoint",parser:i},{code:39,name:"thickness",parser:s},{code:100,name:"subclassMarker",parser:s},...eg];class as{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){at(this,"parser",o(ao,an))}}at(as,"ForEntityName","LINE"),e.LWPolylineFlag=void 0,(T=e.LWPolylineFlag||(e.LWPolylineFlag={}))[T.IS_CLOSED=1]="IS_CLOSED",T[T.PLINE_GEN=128]="PLINE_GEN";let ai={flag:0,elevation:0,thickness:0,extrusionDirection:{x:0,y:0,z:1},vertices:[]},ac={bulge:0},ad=[{code:42,name:"bulge",parser:s},{code:41,name:"endWidth",parser:s},{code:40,name:"startWidth",parser:s},{code:91,name:"id",parser:s},{code:20,name:"y",parser:s},{code:10,name:"x",parser:s}],al=[{code:210,name:"extrusionDirection",parser:i},{code:10,name:"vertices",isMultiple:!0,parser(e,a){let r={};return o(ad,ac)(e,a,r),r}},{code:39,name:"thickness",parser:s},{code:38,name:"elevation",parser:s},{code:43,name:"constantWidth",parser:s},{code:70,name:"flag",parser:s},{code:90,name:"numberOfVertices",parser:s},{code:100,name:"subclassMarker",parser:s},...eg];class au{parseEntity(e,a){let r={};return o(al,ai)(a,e,r),r}}function ap(e,a){let r={};for(let t of e){let e=a(t);null!=e&&(r[e]??(r[e]=[]),r[e].push(t))}return r}function*am(e,a=1/0,r=1){for(let t=e;t!==a;t+=r)yield t}function aE(e){return{x:e.x??0,y:e.y??0,z:e.z??0}}function ah(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}b="LWPOLYLINE",(D="ForEntityName")in au?Object.defineProperty(au,D,{value:b,enumerable:!0,configurable:!0,writable:!0}):au[D]=b,e.MTextDrawingDirection=void 0,(O=e.MTextDrawingDirection||(e.MTextDrawingDirection={}))[O.LEFT_TO_RIGHT=1]="LEFT_TO_RIGHT",O[O.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM",O[O.BY_STYLE=5]="BY_STYLE";let aI={textStyle:"STANDARD",extrusionDirection:{x:0,y:0,z:1},rotation:0},af=[{code:46,name:"annotationHeight",parser:s},{code:101,parser(e,a){!function(e){e.rewind();let a=e.next();if(101!==a.code)throw Error("Bad call for skipEmbeddedObject()");do a=e.next();while(0!==a.code);e.rewind()}(a)}},{code:50,name:"columnHeight",parser:s},{code:49,name:"columnGutter",parser:s},{code:48,name:"columnWidth",parser:s},{code:79,name:"columnAutoHeight",parser:s},{code:78,name:"columnFlowReversed",parser:s},{code:76,name:"columnCount",parser:s},{code:75,name:"columnType",parser:s},{code:441,name:"backgroundFillTransparency",parser:s},{code:63,name:"backgroundFillColor",parser:s},{code:45,name:"fillBoxScale",parser:s},{code:[...am(430,440)],name:"backgroundColor",parser:s},{code:[...am(420,430)],name:"backgroundColor",parser:s},{code:90,name:"backgroundFill",parser:s},{code:44,name:"lineSpacing",parser:s},{code:73,name:"lineSpacingStyle",parser:s},{code:50,name:"rotation",parser:s},{code:43},{code:42},{code:11,name:"direction",parser:i},{code:210,name:"extrusionDirection",parser:i},{code:7,name:"styleName",parser:s},{code:3,name:"text",parser:(e,a,r)=>(r.text??"")+e.value},{code:1,name:"text",parser:s},{code:72,name:"drawingDirection",parser:s},{code:71,name:"attachmentPoint",parser:s},{code:41,name:"width",parser:s},{code:40,name:"height",parser:s},{code:10,name:"insertionPoint",parser:i},{code:100,name:"subclassMarker",parser:s},...eg];class aT{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){ah(this,"parser",o(af,aI))}}function aD(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}ah(aT,"ForEntityName","MTEXT");let ab={thickness:0,extrusionDirection:{x:0,y:0,z:1},angle:0},aO=[{code:50,name:"angle",parser:s},{code:210,name:"extrusionDirection",parser:i},{code:39,name:"thickness",parser:s},{code:10,name:"position",parser:i},{code:100,name:"subclassMarker",parser:s},...eg];class ag{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){aD(this,"parser",o(aO,ab))}}function aS(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}aD(ag,"ForEntityName","POINT"),e.PolylineFlag=void 0,(g=e.PolylineFlag||(e.PolylineFlag={}))[g.CLOSED_POLYLINE=1]="CLOSED_POLYLINE",g[g.CURVE_FIT=2]="CURVE_FIT",g[g.SPLINE_FIT=4]="SPLINE_FIT",g[g.POLYLINE_3D=8]="POLYLINE_3D",g[g.POLYGON_3D=16]="POLYGON_3D",g[g.CLOSED_POLYGON=32]="CLOSED_POLYGON",g[g.POLYFACE=64]="POLYFACE",g[g.CONTINUOUS=128]="CONTINUOUS",e.SmoothType=void 0,(S=e.SmoothType||(e.SmoothType={}))[S.NONE=0]="NONE",S[S.QUADRATIC=5]="QUADRATIC",S[S.CUBIC=6]="CUBIC",S[S.BEZIER=8]="BEZIER",e.VertexFlag=void 0,(y=e.VertexFlag||(e.VertexFlag={}))[y.CREATED_BY_CURVE_FIT=1]="CREATED_BY_CURVE_FIT",y[y.TANGENT_DEFINED=2]="TANGENT_DEFINED",y[y.NOT_USED=4]="NOT_USED",y[y.CREATED_BY_SPLINE_FIT=8]="CREATED_BY_SPLINE_FIT",y[y.SPLINE_CONTROL_POINT=16]="SPLINE_CONTROL_POINT",y[y.FOR_POLYLINE=32]="FOR_POLYLINE",y[y.FOR_POLYGON=64]="FOR_POLYGON",y[y.POLYFACE=128]="POLYFACE";let ay={startWidth:0,endWidth:0,bulge:0},aN=[{code:91,name:"id",parser:s},{code:[...am(71,75)],name:"faces",isMultiple:!0,parser:s},{code:50,name:"tangentDirection",parser:s},{code:70,name:"flag",parser:s},{code:42,name:"bulge",parser:s},{code:41,name:"endWidth",parser:s},{code:40,name:"startWidth",parser:s},{code:30,name:"z",parser:s},{code:20,name:"y",parser:s},{code:10,name:"x",parser:s},{code:100,name:"subclassMarker",parser:s},{code:100},...eg];class aA{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){aS(this,"parser",o(aN,ay))}}function aL(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}aS(aA,"ForEntityName","VERTEX");let a_={thickness:0,flag:0,startWidth:0,endWidth:0,meshMVertexCount:0,meshNVertexCount:0,surfaceMDensity:0,surfaceNDensity:0,smoothType:0,extrusionDirection:{x:0,y:0,z:1},vertices:[]},aP=[{code:0,name:"vertices",isMultiple:!0,parser:(e,a)=>r(e,0,"VERTEX")?(e=a.next(),new aA().parseEntity(a,e)):n},{code:210,name:"extrusionDirection",parser:i},{code:75,name:"smoothType",parser:s},{code:74,name:"surfaceNDensity",parser:s},{code:73,name:"surfaceMDensity",parser:s},{code:72,name:"meshNVertexCount",parser:s},{code:71,name:"meshMVertexCount",parser:s},{code:41,name:"endWidth",parser:s},{code:40,name:"startWidth",parser:s},{code:70,name:"flag",parser:s},{code:39,name:"thickness",parser:s},{code:30,name:"elevation",parser:s},{code:20},{code:10},{code:66},{code:100,name:"subclassMarker",parser:s},...eg];class av{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){aL(this,"parser",o(aP,a_))}}function aC(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}aL(av,"ForEntityName","POLYLINE");let aM={vertices:[],backLineVertices:[]},aF=[{code:360,name:"geometrySettingHardId",parser:s},{code:12,name:"backLineVertices",isMultiple:!0,parser:i},{code:93,name:"numberOfBackLineVertices",parser:s},{code:11,name:"vertices",isMultiple:!0,parser:i},{code:92,name:"verticesCount",parser:s},{code:[63,411],name:"indicatorColor",parser:s},{code:70,name:"indicatorTransparency",parser:s},{code:41,name:"bottomHeight",parser:s},{code:40,name:"topHeight",parser:s},{code:10,name:"verticalDirection",parser:i},{code:1,name:"name",parser:s},{code:91,name:"flag",parser:s},{code:90,name:"state",parser:s},{code:100,name:"subclassMarker",parser:s},...eg];class ax{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){aC(this,"parser",o(aF,aM))}}function aR(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}aC(ax,"ForEntityName","SECTION");let ak={points:[],thickness:0,extrusionDirection:{x:0,y:0,z:1}},aw=[{code:210,name:"extrusionDirection",parser:i},{code:39,name:"thickness",parser:s},{code:[...am(10,14)],name:"points",isMultiple:!0,parser:i},{code:100,name:"subclassMarker",parser:s},...eg];class aV{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){aR(this,"parser",o(aw,ak))}}function aB(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}aR(aV,"ForEntityName","SOLID"),e.SplineFlag=void 0,(N=e.SplineFlag||(e.SplineFlag={}))[N.NONE=0]="NONE",N[N.CLOSED=1]="CLOSED",N[N.PERIODIC=2]="PERIODIC",N[N.RATIONAL=4]="RATIONAL",N[N.PLANAR=8]="PLANAR",N[N.LINEAR=16]="LINEAR";let aH={knotTolerance:1e-6,controlTolerance:1e-6,fitTolerance:1e-9,knotValues:[],controlPoints:[],fitPoints:[]},aG=[{code:11,name:"fitPoints",isMultiple:!0,parser:i},{code:10,name:"controlPoints",isMultiple:!0,parser:i},{code:41,name:"weights",isMultiple:!0,parser:s},{code:40,name:"knots",isMultiple:!0,parser:s},{code:13,name:"endTangent",parser:i},{code:12,name:"startTangent",parser:i},{code:44,name:"fitTolerance",parser:s},{code:43,name:"controlTolerance",parser:s},{code:42,name:"knotTolerance",parser:s},{code:74,name:"numberOfFitPoints",parser:s},{code:73,name:"numberOfControlPoints",parser:s},{code:72,name:"numberOfKnots",parser:s},{code:71,name:"degree",parser:s},{code:70,name:"flag",parser:s},{code:210,name:"normal",parser:i},{code:100,name:"subclassMarker",parser:s},...eg];class aU{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){aB(this,"parser",o(aG,aH))}}aB(aU,"ForEntityName","SPLINE");class aW{parseEntity(e,a){let r={};for(;"EOF"!==a;){if(0===a.code){e.rewind();break}!function(e,a,r){if("EOF"===r)return!1;switch(r.code){case 0:return!1;case 100:e.subclassMarker=r.value;break;case 10:e.viewportCenter=aE(t(a));break;case 40:e.width=r.value;break;case 41:e.height=r.value;break;case 68:e.status=r.value;break;case 69:e.viewportId=r.value;break;case 12:e.displayCenter=t(a);break;case 13:e.snapBase=t(a);break;case 14:e.snapSpacing=t(a);break;case 15:e.gridSpacing=t(a);break;case 16:e.viewDirection=aE(t(a));break;case 17:e.targetPoint=aE(t(a));break;case 42:e.perspectiveLensLength=r.value;break;case 43:e.frontClipZ=r.value;break;case 44:e.backClipZ=r.value;break;case 45:e.viewHeight=r.value;break;case 50:e.snapAngle=r.value;break;case 51:e.viewTwistAngle=r.value;break;case 72:e.circleZoomPercent=r.value;break;case 331:e.frozenLayerIds??(e.frozenLayerIds=[]),e.frozenLayerIds.push(r.value);break;case 90:e.statusBitFlags=r.value;break;case 340:e.clippingBoundaryId=r.value;break;case 1:e.sheetName=r.value;break;case 281:e.renderMode=r.value;break;case 71:e.ucsPerViewport=r.value;break;case 110:e.ucsOrigin=aE(t(a));break;case 111:e.ucsXAxis=aE(t(a));break;case 112:e.ucsYAxis=aE(t(a));break;case 345:e.ucsId=r.value;break;case 346:e.ucsBaseId=r.value;break;case 79:e.orthographicType=r.value;break;case 146:e.elevation=r.value;break;case 170:e.shadePlotMode=r.value;break;case 61:e.majorGridFrequency=r.value;break;case 332:e.backgroundId=r.value;break;case 333:e.shadePlotId=r.value;break;case 348:e.visualStyleId=r.value;break;case 292:e.isDefaultLighting=!!r.value;break;case 282:e.defaultLightingType=r.value;break;case 141:e.brightness=r.value;break;case 142:e.contrast=r.value;break;case 63:case 421:case 431:e.ambientLightColor=r.value;break;case 361:e.sunId=r.value;break;case 335:case 343:case 344:case 91:e.softPointer=r.value}return!0}(r,e,a)&&eD(r,a,e),a=e.next()}return r}}function aY(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}L="VIEWPORT",(A="ForEntityName")in aW?Object.defineProperty(aW,A,{value:L,enumerable:!0,configurable:!0,writable:!0}):aW[A]=L,(_=ed||(ed={}))[_.INVISIBLE=1]="INVISIBLE",_[_.CONSTANT=2]="CONSTANT",_[_.REQUIRE_VERIFICATION=4]="REQUIRE_VERIFICATION",_[_.PRESET=8]="PRESET";let aj={thickness:0,rotation:0,scale:1,obliqueAngle:0,textStyle:"STANDARD",textGenerationFlag:0,horizontalJustification:0,verticalJustification:0,extrusionDirection:{x:0,y:0,z:1}},az=[...af.slice(af.findIndex(({name:e})=>"columnType"===e),af.findIndex(({name:e})=>"subclassMarker"===e)+1),{code:100},{code:0,parser(e){if(!r(e,0,"MTEXT"))return n}},{code:2,name:"definitionTag",parser:s},{code:40,name:"annotationScale",parser:s},{code:10,name:"alignmentPoint",parser:i},{code:340,name:"secondaryAttributesHardId",parser:s},{code:70,name:"numberOfSecondaryAttributes",parser:s},{code:70,name:"isReallyLocked",parser:c},{code:70,name:"mtextFlag",parser:s},{code:280,name:"isDuplicatedEntriesKeep",parser:c},{code:100},{code:280,name:"lockPositionFlag",parser:c},{code:210,name:"extrusionDirection",parser:i},{code:11,name:"alignmentPoint",parser:i},{code:74,name:"verticalJustification",parser:s},{code:72,name:"horizontalJustification",parser:s},{code:71,name:"textGenerationFlag",parser:s},{code:7,name:"textStyle",parser:s},{code:51,name:"obliqueAngle",parser:s},{code:41,name:"scale",parser:s},{code:50,name:"rotation",parser:s},{code:73},{code:70,name:"attributeFlag",parser:s},{code:2,name:"tag",parser:s},{code:280},{code:100,name:"subclassMarker",parser:s},{code:1,name:"text",parser:s},{code:40,name:"textHeight",parser:s},{code:10,name:"startPoint",parser:i},{code:39,name:"thickness",parser:s},{code:100},...eg];class aX{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){aY(this,"parser",o(az,aj))}}aY(aX,"ForEntityName","ATTRIB");let aK=Object.fromEntries([eL,eR,aX,eB,eH,eY,e9,ar,as,au,aT,ag,av,ax,aV,aU,eC,e3,aW].map(e=>[e.ForEntityName,new e]));function aZ(e,a){let t=[];for(;!r(e,0,"EOF");){if(0===e.code){if("ENDBLK"===e.value||"ENDSEC"===e.value){a.rewind();break}let r=aK[e.value];if(r){let n=e.value;e=a.next();let o=r.parseEntity(a,e);o.type=n,eO(o),t.push(o)}else console.warn(`Unsupported ENTITY type: ${e.value}`)}e=a.next()}return t}function aJ(e,a){let t={};for(;!r(e,0,"EOF")&&!r(e,0,"ENDSEC");){if(r(e,0,"BLOCK")){let r=a$(e=a.next(),a);eO(r),r.name&&(t[r.name]=r)}e=a.next()}return t}function a$(e,a){let n={};for(;!r(e,0,"EOF");){if(r(e,0,"ENDBLK")){for(e=a.next();!r(e,0,"EOF");){if(r(e,100,"AcDbBlockEnd"))return n;e=a.next()}break}switch(e.code){case 1:n.xrefPath=e.value;break;case 2:n.name=e.value;break;case 3:n.name2=e.value;break;case 5:n.handle=e.value;break;case 8:n.layer=e.value;break;case 10:n.position=t(a);break;case 67:n.paperSpace=!!e.value&&1==e.value;break;case 70:0!==e.value&&(n.type=e.value);break;case 100:break;case 330:n.ownerHandle=e.value;break;case 0:n.entities=aZ(e,a)}e=a.next()}return n}function aq(e,a){let n=null,o={};for(;!r(e,0,"EOF")&&!r(e,0,"ENDSEC");)9===e.code?n=e.value:10===e.code?o[n]=t(a):o[n]=e.value,e=a.next();return o}let aQ=[{code:333,name:"shadePlotId",parser:s},{code:149,name:"imageOriginY",parser:s},{code:148,name:"imageOriginX",parser:s},{code:147,name:"scaleFactor",parser:s},{code:78,name:"shadePlotCustomDPI",parser:s},{code:77,name:"shadePlotResolution",parser:s},{code:76,name:"shadePlotMode",parser:s},{code:75,name:"standardScaleType",parser:s},{code:7,name:"currentStyleSheet",parser:s},{code:74,name:"plotType",parser:s},{code:73,name:"plotRotation",parser:s},{code:72,name:"paperUnit",parser:s},{code:70,name:"layoutFlag",parser:s},{code:143,name:"printScaleDenominator",parser:s},{code:142,name:"printScaleNominator",parser:s},{code:141,name:"windowAreaYMax",parser:s},{code:140,name:"windowAreaYMin",parser:s},{code:49,name:"windowAreaXMax",parser:s},{code:48,name:"windowAreaXMin",parser:s},{code:47,name:"plotOriginY",parser:s},{code:46,name:"plotOriginX",parser:s},{code:45,name:"paperHeight",parser:s},{code:44,name:"paperWidth",parser:s},{code:43,name:"marginTop",parser:s},{code:42,name:"marginRight",parser:s},{code:41,name:"marginBottom",parser:s},{code:40,name:"marginLeft",parser:s},{code:6,name:"plotViewName",parser:s},{code:4,name:"paperSize",parser:s},{code:2,name:"configName",parser:s},{code:1,name:"pageSetupName",parser:s},{code:100,name:"subclassMarker",parser:s}];(P=el||(el={}))[P.INCHES=0]="INCHES",P[P.MILLIMETERS=1]="MILLIMETERS",P[P.PIXELS=2]="PIXELS",(v=eu||(eu={}))[v.LAST_SCREEN_DISPLAY=0]="LAST_SCREEN_DISPLAY",v[v.DRAWING_EXTENTS=1]="DRAWING_EXTENTS",v[v.DRAWING_LIMITS=2]="DRAWING_LIMITS",v[v.VIEW_SPECIFIED=3]="VIEW_SPECIFIED",v[v.WINDOW_SPECIFIED=4]="WINDOW_SPECIFIED",v[v.LAYOUT_INFORMATION=5]="LAYOUT_INFORMATION",(C=ep||(ep={}))[C.AS_DISPLAYED=0]="AS_DISPLAYED",C[C.WIREFRAME=1]="WIREFRAME",C[C.HIDDEN=2]="HIDDEN",C[C.RENDERED=3]="RENDERED",(M=em||(em={}))[M.DRAFT=0]="DRAFT",M[M.PREVIEW=1]="PREVIEW",M[M.NORMAL=2]="NORMAL",M[M.PRESENTATION=3]="PRESENTATION",M[M.MAXIMUM=4]="MAXIMUM",M[M.CUSTOM=5]="CUSTOM";let a0=[{code:333,name:"shadePlotId",parser:s},{code:346,name:"orthographicUcsId",parser:s},{code:345,name:"namedUcsId",parser:s},{code:331,name:"viewportId",parser:s},{code:330,name:"paperSpaceTableId",parser:s},{code:76,name:"orthographicType",parser:s},{code:17,name:"ucsYAxis",parser:i},{code:16,name:"ucsXAxis",parser:i},{code:13,name:"ucsOrigin",parser:i},{code:146,name:"elevation",parser:s},{code:15,name:"maxExtent",parser:i},{code:14,name:"minExtent",parser:i},{code:12,name:"insertionBase",parser:i},{code:11,name:"maxLimit",parser:i},{code:10,name:"minLimit",parser:i},{code:71,name:"tabOrder",parser:s},{code:70,name:"controlFlag",parser:s},{code:1,name:"layoutName",parser:s},{code:100,name:"subclassMarker",parser:s},...aQ];(F=eE||(eE={}))[F.PSLTSCALE=1]="PSLTSCALE",F[F.LIMCHECK=2]="LIMCHECK";let a1=[{code:330,name:"ownerObjectId",parser:s},{code:102},{code:360,name:"ownerDictionaryIdHard",parser:s},{code:102},{code:102},{code:330,name:"ownerDictionaryIdSoft",parser:s},{code:102},{code:102},{code:102},{code:5,name:"handle",parser:s}],a4=[{code:3,name:"entries",parser:(e,a)=>{let r={name:e.value};return 350===(e=a.next()).code?r.objectId=e.value:a.rewind(),r},isMultiple:!0},{code:281,name:"recordCloneFlag",parser:s},{code:280,name:"isHardOwned",parser:c},{code:100,name:"subclassMarker",parser:s}];function a2(e){return"AcDbDictionary"===e.subclassMarker}(x=eh||(eh={}))[x.NOT_APPLICABLE=0]="NOT_APPLICABLE",x[x.KEEP_EXISTING=1]="KEEP_EXISTING",x[x.USE_CLONE=2]="USE_CLONE",x[x.XREF_VALUE_NAME=3]="XREF_VALUE_NAME",x[x.VALUE_NAME=4]="VALUE_NAME",x[x.UNMANGLE_NAME=5]="UNMANGLE_NAME";let a3={LAYOUT:a0,PLOTSETTINGS:aQ,DICTIONARY:a4};function a7(e,a){let r=[];for(;0!==e.code||!["EOF","ENDSEC"].includes(e.value);){let t=e.value,n=a3[t];if(0===e.code&&n?.length){let s=o([...a1,...n]),i={name:t};s(e=a.next(),a,i)?(r.push(i),e=a.peek()):e=a.next()}else e=a.next()}return{byName:ap(r,({name:e})=>e),byTree:function(e){let a=Object.fromEntries(e.map(e=>[e.handle,e]));for(let r of e)(!a2(r)||"0"!==r.ownerDictionaryIdSoft)&&(r.ownerDictionaryIdSoft&&(r.ownerDictionarySoft=a[r.ownerDictionaryIdSoft]),r.ownerDictionaryIdHard&&(r.ownerDictionaryHard=a[r.ownerDictionaryIdHard]),r.ownerObjectId&&(r.ownerObject=a[r.ownerObjectId])),function(e,a){a2(e)&&e.entries&&(e.entries=Object.fromEntries(e.entries.map(({name:e,objectId:r})=>[e,a[r]])))}(r,a);return e[0]}(r)}}let a5=[{code:100,name:"subclassMarker",parser:s},{code:330,name:"ownerObjectId",parser:s},{code:102,parser(e,a){for(;!r(e,0,"EOF")&&!r(e,102,"}");)e=a.next()}},{code:5,name:"handle",parser:s}],a6=o([{code:310,name:"bmpPreview",parser:s},{code:281,name:"scalability",parser:s},{code:280,name:"explodability",parser:s},{code:70,name:"insertionUnits",parser:s},{code:340,name:"layoutObjects",parser:s},{code:2,name:"name",parser:s},{code:100,name:"subclassMarker",parser:s},...a5]),a9=o([...[{name:"DIMPOST",code:3},{name:"DIMAPOST",code:4},{name:"DIMBLK_OBSOLETE",code:5},{name:"DIMBLK1_OBSOLETE",code:6},{name:"DIMBLK2_OBSOLETE",code:7},{name:"DIMSCALE",code:40,defaultValue:1},{name:"DIMASZ",code:41,defaultValue:.25},{name:"DIMEXO",code:42,defaultValue:.625,defaultValueImperial:.0625},{name:"DIMDLI",code:43,defaultValue:3.75,defaultValueImperial:.38},{name:"DIMEXE",code:44,defaultValue:2.25,defaultValueImperial:.28},{name:"DIMRND",code:45,defaultValue:0},{name:"DIMDLE",code:46,defaultValue:0},{name:"DIMTP",code:47,defaultValue:0},{name:"DIMTM",code:48,defaultValue:0},{name:"DIMTXT",code:140,defaultValue:2.5,defaultValueImperial:.28},{name:"DIMCEN",code:141,defaultValue:2.5,defaultValueImperial:.09},{name:"DIMTSZ",code:142,defaultValue:0},{name:"DIMALTF",code:143,defaultValue:25.4},{name:"DIMLFAC",code:144,defaultValue:1},{name:"DIMTVP",code:145,defaultValue:0},{name:"DIMTFAC",code:146,defaultValue:1},{name:"DIMGAP",code:147,defaultValue:.625,defaultValueImperial:.09},{name:"DIMALTRND",code:148,defaultValue:0},{name:"DIMTOL",code:71,defaultValue:0,defaultValueImperial:1},{name:"DIMLIM",code:72,defaultValue:0},{name:"DIMTIH",code:73,defaultValue:0,defaultValueImperial:1},{name:"DIMTOH",code:74,defaultValue:0,defaultValueImperial:1},{name:"DIMSE1",code:75,defaultValue:0},{name:"DIMSE2",code:76,defaultValue:0},{name:"DIMTAD",code:77,defaultValue:e.DimensionTextVertical.Above,defaultValueImperial:e.DimensionTextVertical.Center},{name:"DIMZIN",code:78,defaultValue:e.DimensionZeroSuppression.Trailing,defaultValueImperial:e.DimensionZeroSuppression.Feet},{name:"DIMAZIN",code:79,defaultValue:e.DimensionZeroSuppressionAngular.None},{name:"DIMALT",code:170,defaultValue:0},{name:"DIMALTD",code:171,defaultValue:3,defaultValueImperial:2},{name:"DIMTOFL",code:172,defaultValue:1,defaultValueImperial:0},{name:"DIMSAH",code:173,defaultValue:0},{name:"DIMTIX",code:174,defaultValue:0},{name:"DIMSOXD",code:175,defaultValue:0},{name:"DIMCLRD",code:176,defaultValue:0},{name:"DIMCLRE",code:177,defaultValue:0},{name:"DIMCLRT",code:178,defaultValue:0},{name:"DIMADEC",code:179},{name:"DIMUNIT",code:270},{name:"DIMDEC",code:271,defaultValue:2,defaultValueImperial:4},{name:"DIMTDEC",code:272,defaultValue:2,defaultValueImperial:4},{name:"DIMALTU",code:273,defaultValue:2},{name:"DIMALTTD",code:274,defaultValue:2,defaultValueImperial:4},{name:"DIMAUNIT",code:275,defaultValue:0},{name:"DIMFRAC",code:276,defaultValue:0},{name:"DIMLUNIT",code:277,defaultValue:2},{name:"DIMDSEP",code:278,defaultValue:",",defaultValueImperial:"."},{name:"DIMJUST",code:280,defaultValue:e.DimensionTextHorizontal.Center},{name:"DIMSD1",code:281,defaultValue:0},{name:"DIMSD2",code:282,defaultValue:0},{name:"DIMTOLJ",code:283,defaultValue:e.DimensionToleranceTextVertical.Center},{name:"DIMTZIN",code:284,defaultValue:e.DimensionZeroSuppression.Trailing,defaultValueImperial:e.DimensionZeroSuppression.Feet},{name:"DIMALTZ",code:285,defaultValue:e.DimensionZeroSuppression.Trailing},{name:"DIMALTTZ",code:286,defaultValue:e.DimensionZeroSuppression.Trailing},{name:"DIMFIT",code:287},{name:"DIMUPT",code:288,defaultValue:0},{name:"DIMATFIT",code:289,defaultValue:3},{name:"DIMTXSTY",code:340},{name:"DIMLDRBLK",code:341},{name:"DIMBLK",code:342},{name:"DIMBLK1",code:343},{name:"DIMBLK2",code:344},{name:"DIMLWD",code:371,defaultValue:-2},{name:"DIMLWD",code:372,defaultValue:-2}].map(e=>({...e,parser:s})),{code:70,name:"standardFlag",parser:s},{code:2,name:"name",parser:s},{code:100,name:"subclassMarker",parser:s},{code:105,name:"handle",parser:s},...a5.filter(e=>5!==e.code)]),a8=o([{code:347,name:"materialObjectId",parser:s},{code:390,name:"plotStyleNameObjectId",parser:s},{code:370,name:"lineweight",parser:s},{code:290,name:"isPlotting",parser:c},{code:6,name:"lineType",parser:s},{code:62,name:"colorIndex",parser:s},{code:70,name:"standardFlag",parser:s},{code:2,name:"name",parser:s},{code:100,name:"subclassMarker",parser:s},...a5]),re=o([{code:9,name:"text",parser:s},{code:45,name:"offsetY",parser:s},{code:44,name:"offsetX",parser:s},{code:50,name:"rotation",parser:s},{code:46,name:"scale",parser:s},{code:340,name:"styleObjectId",parser:s},{code:75,name:"shapeNumber",parser:s},{code:74,name:"elementTypeFlag",parser:s},{code:49,name:"elementLength",parser:s}],{elementTypeFlag:0,elementLength:0}),ra={BLOCK_RECORD:a6,DIMSTYLE:a9,LAYER:a8,LTYPE:o([{code:49,name:"pattern",parser(e,a){let r={};return re(e,a,r),r},isMultiple:!0},{code:40,name:"totalPatternLength",parser:s},{code:73,name:"numberOfLineTypes",parser:s},{code:72,parser:s},{code:3,name:"description",parser:s},{code:70,name:"standardFlag",parser:s},{code:2,name:"name",parser:s},{code:100,name:"subclassMarker",parser:s},...a5]),STYLE:o([{code:1e3,name:"extendedFont",parser:s},{code:1001},{code:4,name:"bigFont",parser:s},{code:3,name:"font",parser:s},{code:42,name:"lastHeight",parser:s},{code:71,name:"textGenerationFlag",parser:s},{code:50,name:"obliqueAngle",parser:s},{code:41,name:"widthFactor",parser:s},{code:40,name:"fixedTextHeight",parser:s},{code:70,name:"standardFlag",parser:s},{code:2,name:"name",parser:s},{code:100,name:"subclassMarker",parser:s},...a5]),VPORT:o([{code:[63,421,431],name:"ambientColor",parser:s},{code:142,name:"contrast",parser:s},{code:141,name:"brightness",parser:s},{code:282,name:"defaultLightingType",parser:s},{code:292,name:"isDefaultLightingOn",parser:c},{code:348,name:"visualStyleObjectId",parser:s},{code:333,name:"shadePlotObjectId",parser:s},{code:332,name:"backgroundObjectId",parser:s},{code:61,name:"majorGridLines",parser:s},{code:170,name:"shadePlotSetting",parser:s},{code:146,name:"elevation",parser:s},{code:79,name:"orthographicType",parser:s},{code:112,name:"ucsYAxis",parser:i},{code:111,name:"ucsXAxis",parser:i},{code:110,name:"ucsOrigin",parser:i},{code:74,name:"ucsIconSetting",parser:s},{code:71,name:"viewMode",parser:s},{code:281,name:"renderMode",parser:s},{code:1,name:"styleSheet",parser:s},{code:[331,441],name:"frozenLayers",parser:s,isMultiple:!0},{code:72,name:"circleSides",parser:s},{code:51,name:"viewTwistAngle",parser:s},{code:50,name:"snapRotationAngle",parser:s},{code:45,name:"viewHeight",parser:s},{code:44,name:"backClippingPlane",parser:s},{code:43,name:"frontClippingPlane",parser:s},{code:42,name:"lensLength",parser:s},{code:17,name:"viewTarget",parser:i},{code:16,name:"viewDirectionFromTarget",parser:i},{code:15,name:"gridSpacing",parser:i},{code:14,name:"snapSpacing",parser:i},{code:13,name:"snapBasePoint",parser:i},{code:12,name:"center",parser:i},{code:11,name:"upperRightCorner",parser:i},{code:10,name:"lowerLeftCorner",parser:i},{code:70,name:"standardFlag",parser:s},{code:2,name:"name",parser:s},{code:100,name:"subclassMarker",parser:s},...a5])},rr=o([{code:70,name:"maxNumberOfEntries",parser:s},{code:100,name:"subclassMarker",parser:s},{code:330,name:"ownerObjectId",parser:s},{code:102},{code:360,isMultiple:!0},{code:102},{code:5,name:"handle",parser:s},{code:2,name:"name",parser:s}]);function rt(e,a){let t={};for(;!r(e,0,"EOF")&&!r(e,0,"ENDSEC");){if(r(e,0,"TABLE")){e=a.next();let r={entries:[]};rr(e,a,r),t[r.name]=r}if(r(e,0)&&!r(e,0,"ENDTAB")){let r=e.value;e=a.next();let n=ra[r];if(!n){console.warn(`parseTable: Invalid table name '${r}'`),e=a.next();continue}let o={};n(e,a,o),t[r]?.entries.push(o)}e=a.next()}return t}function rn(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}class ro{next(){if(!this.hasNext())return this._eof?console.warn("Cannot call 'next' after EOF group has been read"):console.warn("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]),{code:0,value:"EOF"};let e=parseInt(this._data[this._pointer++],10),a=rs(e,this._data[this._pointer++]),t={code:e,value:a};return r(t,0,"EOF")&&(this._eof=!0),this.lastReadGroup=t,t}peek(){if(!this.hasNext()){if(this._eof)throw Error("Cannot call 'next' after EOF group has been read");throw Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer])}let e={code:parseInt(this._data[this._pointer]),value:0};return e.value=rs(e.code,this._data[this._pointer+1]),e}rewind(e){e=e||1,this._pointer=this._pointer-2*e}hasNext(){return!this._eof&&!(this._pointer>this._data.length-2)}isEOF(){return this._eof}constructor(e){rn(this,"_pointer",void 0),rn(this,"_data",void 0),rn(this,"_eof",void 0),rn(this,"lastReadGroup",{code:0,value:0}),this._pointer=0,this._data=e,this._eof=!1}}function rs(e,a){return e<=9?a:e>=10&&e<=59?parseFloat(a.trim()):e>=60&&e<=99?parseInt(a.trim()):e>=100&&e<=109?a:e>=110&&e<=149?parseFloat(a.trim()):e>=160&&e<=179?parseInt(a.trim()):e>=210&&e<=239?parseFloat(a.trim()):e>=270&&e<=289?parseInt(a.trim()):e>=290&&e<=299?function(e){if("0"===e)return!1;if("1"===e)return!0;throw TypeError("String '"+e+"' cannot be cast to Boolean type")}(a.trim()):e>=300&&e<=369?a:e>=370&&e<=389?parseInt(a.trim()):e>=390&&e<=399?a:e>=400&&e<=409?parseInt(a.trim()):e>=410&&e<=419?a:e>=420&&e<=429?parseInt(a.trim()):e>=430&&e<=439?a:e>=440&&e<=459?parseInt(a.trim()):e>=460&&e<=469?parseFloat(a.trim()):e>=470&&e<=481||999===e||e>=1e3&&e<=1009?a:e>=1010&&e<=1059?parseFloat(a.trim()):e>=1060&&e<=1071?parseInt(a.trim()):(console.log("WARNING: Group code does not have a defined type: %j",{code:e,value:a}),a)}function ri(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}class rc{parseStart(e){this.startCode=e.code}setPoint(e){if(this.code=e.code,this.value=e.value,this.startCode===this.code&&(this.x=this.value),this.startCode===this.code+10)this.y=this.value;else{let e={x:this.x??0,y:this.y??0,z:this.z??0};return this.reset(),e}if(this.startCode===this.code+20)this.z=this.value;else{let e={x:this.x??0,y:this.y??0,z:this.z??0};return this.reset(),e}}reset(){this.x=void 0,this.y=void 0,this.z=void 0}constructor(){ri(this,"point",{}),ri(this,"startCode",0),ri(this,"code",0),ri(this,"value",0),ri(this,"x",void 0),ri(this,"y",void 0),ri(this,"z",void 0)}}function rd(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}class rl{constructor(){rd(this,"encoding","utf-8"),rd(this,"encodingFailureFatal",!1)}}class ru extends Error{constructor(e,a,r){let t=`[Line ${a}]: ${e}`;r?.cause&&(t+=`
Caused by ${r.cause.toString()}
${r.cause.stack}`),super(t),rd(this,"line",void 0),this.line=a}}class rp extends EventTarget{Feed(e,a=!1){let r=this._decoder.decode(e??void 0,{stream:!a});this.FeedString(r,a)}FeedString(e,a=!1){if(this._finalChunkSeen)throw Error("Data fed after final chunk processed");a&&(this._finalChunkSeen=!0),this._curChunk+=e,this._ProcessCurChunk(),a&&this._Finalize()}_Finalize(){}async FeedFile(e,a){let r=e.byteLength;for(let t=0;t<r;t+=65536){a?.throwIfAborted();let n=Math.min(r-t,65536),o=await e.slice(t,t+n);this.Feed(o,t+n>=r)}}_ProcessCurChunk(){for(let e of this._ConsumeCurChunkLines())if(this._ProcessLine(e),this._curLineNum++,!this._eof&&"HEADER"===this._curSection){let e=this._curValue.value;9===this._curValue.code?this._currVarName=e:10===this._curValue.code?this._pointParser.parseStart(this._curValue):this._pointParser.startCode===this._curValue.code||this._pointParser.startCode+10===this._curValue.code||this._pointParser.startCode+20===this._curValue.code?e=this._pointParser.setPoint(this._curValue):this._currVarName&&(this.dxf.header[this._currVarName]=e)}}*_ConsumeCurChunkLines(){let e=0,a=this._curChunk.length;for(;e<a;){let r=this._curChunk.indexOf("\r",e),t=0;if(r>=0?(t=r+1)<a&&"\n"==this._curChunk.charAt(t)&&t++:(r=this._curChunk.indexOf("\n",e))>=0&&(t=r+1),r<0)break;yield this._curChunk.substring(e,r),e=t}0!=e&&(this._curChunk=this._curChunk.substring(e))}_ProcessLine(e){if(null===this._curGroupCode){let a=e.trim();this._curGroupCode=parseInt(a),isNaN(this._curGroupCode)&&this._Error("Bad group code: "+a);return}let a=new rm(this._curGroupCode,e);if(!r(a,0,"EOF")){switch(a.value){case"SECTION":this._curSection="SECTION";break;case"HEADER":this._curSection="HEADER";break;case"BLOCKS":this._curSection="BLOCKS";break;case"ENTITIES":this._curSection="ENTITIES";break;case"TABLES":this._curSection="TABLES";break;case"OBJECTS":this._curSection="OBJECTS"}this._eof=!1}r(a,0,"EOF")&&(this._eof=!0),this._curValue=a,this._curGroupCode=null}_Error(e,a=null){let r;throw a&&(r={cause:a}),new ru(e,this._curLineNum,r)}constructor(e=new rl){super(),rd(this,"dxf",{header:{},blocks:{},entities:[],tables:{},objects:{byName:{},byTree:void 0}}),rd(this,"_decoder",void 0),rd(this,"_pointParser",void 0),rd(this,"_finalChunkSeen",!1),rd(this,"_curChunk",""),rd(this,"_curGroupCode",null),rd(this,"_curLineNum",1),rd(this,"_eof",!1),rd(this,"_curValue",{code:0,value:0}),rd(this,"_curSection",""),rd(this,"_currVarName",""),this._decoder=new TextDecoder(e.encoding,{fatal:e.encodingFailureFatal}),this._pointParser=new rc}}class rm{constructor(e,a){rd(this,"code",void 0),rd(this,"value",void 0),this.code=e,this.value=rs(e,a)}}function rE(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}class rh{constructor(){rE(this,"encoding","utf-8"),rE(this,"encodingFailureFatal",!1)}}class rI extends EventTarget{parseSync(e){let a=new ro(e.split(/\r\n|\r|\n/g));if(!a.hasNext())throw Error("Empty file");return this.parseAll(a)}parseStream(e){let a="",r=this;return new Promise((t,n)=>{e.on("data",e=>{a+=e}),e.on("end",()=>{try{let e=a.split(/\r\n|\r|\n/g),n=new ro(e);if(!n.hasNext())throw Error("Empty file");t(r.parseAll(n))}catch(e){n(e)}}),e.on("error",e=>{n(e)})})}async parseFromUrl(e,a){let r=await fetch(e,a);if(!r.body)return null;let t=r.body.getReader(),n="";for(;;){let{done:e,value:a}=await t.read();if(e){n+=this._decoder.decode(new ArrayBuffer(0),{stream:!1});break}n+=this._decoder.decode(a,{stream:!0})}return this.parseSync(n)}parseAll(e){let a={header:{},blocks:{},entities:[],tables:{},objects:{byName:{},byTree:void 0}},t=e.next();for(;!r(t,0,"EOF");)r(t,0,"SECTION")&&(r(t=e.next(),2,"HEADER")?(t=e.next(),a.header=aq(t,e)):r(t,2,"BLOCKS")?(t=e.next(),a.blocks=aJ(t,e)):r(t,2,"ENTITIES")?(t=e.next(),a.entities=aZ(t,e)):r(t,2,"TABLES")?(t=e.next(),a.tables=rt(t,e)):r(t,2,"OBJECTS")&&(t=e.next(),a.objects=a7(t,e))),t=e.next();return a}constructor(e=new rh){super(),rE(this,"_decoder",void 0),this._decoder=new TextDecoder(e.encoding,{fatal:e.encodingFailureFatal})}}e.ArcEntityParser=eL,e.AttDefEntityParser=eR,e.CircleEntityParser=eB,e.CommonEntitySnippets=eg,e.DefaultDxfHeaderVariables=a,e.DefaultTextEntity=eP,e.DxfParsingError=ru,e.DxfStreamParser=rp,e.DxfStreamParserOptions=rl,e.EllipseEntityParser=eY,e.HatchEntityParser=e3,e.INDEXED_CHUNK_SIZE=65536,e.InsertEntityParser=e9,e.LWPolylineParser=au,e.LeaderEntityParser=ar,e.LineEntityParser=as,e.MTextEntityParser=aT,e.MTextEntityParserSnippets=af,e.PointEntityParser=ag,e.PolylineParser=av,e.SPLINE_SUBDIVISION=4,e.SectionEntityParser=ax,e.SolidEntityParser=aV,e.SplineEntityParser=aU,e.TESSELLATION_ANGLE=Math.PI/24,e.TextEntityParser=eC,e.TextEntityParserSnippets=ev,e.UndeterminedBlockColor=-1,e.VertexParser=aA,e.classify=ap,e.default=rI,e.ensureHandle=eO,e.ensurePoint3D=aE,e.flooding=function({seeds:e,spanner:a,serializer:r,iterationLimit:t=1/0}){let n=new Set,o=0;return e.map(e=>{let s=[],i=[[e,r(e)]];for(;i.length&&o++<t;){let[e,t]=i.pop();if(!n.has(t))for(let o of(n.add(t),s.push(e),a(e)))i.push([o,r(o)])}return s}).filter(e=>e.length)},e.generateIntegers=am,e.isMatched=r,e.parseBlock=a$,e.parseBlocks=aJ,e.parseEntities=aZ,e.parseHeader=aq,e.parseObjects=a7,e.parseTables=rt,e.skipApplicationGroups=eS,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?a(exports):"function"==typeof define&&define.amd?define(["exports"],a):a((e="undefined"!=typeof globalThis?globalThis:e||self).DxfJson={});
