!function(e,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?exports.DxfJson=a():e.DxfJson=a()}(this,(()=>(()=>{"use strict";var e,a,r={d:(e,a)=>{for(var n in a)r.o(a,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};r.r(n),r.d(n,{ArcEntityParser:()=>ae,AttDefEntityParser:()=>pe,AttDefMTextFlag:()=>ne,AttachmentPoint:()=>i,AttributeFlag:()=>re,BlockTypeFlag:()=>e,BoundaryPathEdgeType:()=>b,BoundaryPathTypeFlag:()=>N,CircleEntityParser:()=>Ie,ColorCode:()=>a,CommonEntitySnippets:()=>$,DefaultDxfHeaderVariables:()=>_,DefaultLightingType:()=>x,DefaultTextEntity:()=>ce,DimensionTextHorizontal:()=>m,DimensionTextLineSpacing:()=>d,DimensionTextVertical:()=>l,DimensionToleranceTextVertical:()=>E,DimensionType:()=>c,DimensionZeroSuppression:()=>u,DimensionZeroSuppressionAngular:()=>p,DxfParsingError:()=>Ir,DxfStreamParser:()=>hr,DxfStreamParserOptions:()=>Er,EllipseEntityParser:()=>Se,HatchAssociativity:()=>h,HatchBoundaryAnnotation:()=>D,HatchEntityParser:()=>xe,HatchGradientColorFlag:()=>S,HatchGradientFlag:()=>O,HatchPatternType:()=>T,HatchSolidFill:()=>I,HatchStyle:()=>f,INDEXED_CHUNK_SIZE:()=>y,InsertEntityParser:()=>Ve,LWPolylineFlag:()=>je,LWPolylineParser:()=>Je,LeaderCreationFlag:()=>Ge,LeaderEntityParser:()=>He,LineEntityParser:()=>We,MTextDrawingDirection:()=>$e,MTextEntityParser:()=>ta,MTextEntityParserSnippets:()=>na,Measurement:()=>A,ObscuredLineTypes:()=>L,OrthographicType:()=>R,PointEntityParser:()=>ca,PolylineFlag:()=>ia,PolylineParser:()=>ha,RenderMode:()=>M,ReservedLineweight:()=>g,SPLINE_SUBDIVISION:()=>o,SectionEntityParser:()=>Da,ShadePlotMode:()=>v,ShadowMode:()=>J,SmoothType:()=>da,SolidEntityParser:()=>Na,SplineEntityParser:()=>ga,SplineFlag:()=>ba,TESSELLATION_ANGLE:()=>s,TextEntityParser:()=>de,TextEntityParserSnippets:()=>ie,TextGenerationFlag:()=>te,TextHorizontalAlign:()=>oe,TextVerticalAlign:()=>se,UCSPerViewport:()=>P,UndeterminedBlockColor:()=>t,VertexFlag:()=>la,VertexParser:()=>ma,ViewportStatusFlag:()=>C,classify:()=>Qe,default:()=>Or,ensureHandle:()=>Pa,ensurePoint3D:()=>aa,flooding:()=>qe,generateIntegers:()=>ea,isMatched:()=>k,parseBlock:()=>Ba,parseBlocks:()=>wa,parseEntities:()=>Va,parseHeader:()=>Ha,parseObjects:()=>rr,parseTables:()=>lr,skipApplicationGroups:()=>q}),function(e){e[e.None=0]="None",e[e.Anonymous=1]="Anonymous",e[e.NonConstant=2]="NonConstant",e[e.Xref=4]="Xref",e[e.XrefOverlay=8]="XrefOverlay",e[e.ExternallyDependent=16]="ExternallyDependent",e[e.ResolvedOrDependent=32]="ResolvedOrDependent",e[e.ReferencedXref=64]="ReferencedXref"}(e||(e={})),function(e){e[e.BYBLOCK=0]="BYBLOCK",e[e.BYLAYER=256]="BYLAYER"}(a||(a={}));const t=-1,o=4,s=Math.PI/24;var c,i,d,l,u,p,m,E,I,h,f,T,D,O,S,N,b,L;!function(e){e[e.Rotated=0]="Rotated",e[e.Aligned=1]="Aligned",e[e.Angular=2]="Angular",e[e.Diameter=3]="Diameter",e[e.Radius=4]="Radius",e[e.Angular3Point=5]="Angular3Point",e[e.Ordinate=6]="Ordinate",e[e.ReferenceIsExclusive=32]="ReferenceIsExclusive",e[e.IsOrdinateXTypeFlag=64]="IsOrdinateXTypeFlag",e[e.IsCustomTextPositionFlag=128]="IsCustomTextPositionFlag"}(c||(c={})),function(e){e[e.TopLeft=1]="TopLeft",e[e.TopCenter=2]="TopCenter",e[e.TopRight=3]="TopRight",e[e.MiddleLeft=4]="MiddleLeft",e[e.MiddleCenter=5]="MiddleCenter",e[e.MiddleRight=6]="MiddleRight",e[e.BottomLeft=7]="BottomLeft",e[e.BottomCenter=8]="BottomCenter",e[e.BottomRight=9]="BottomRight"}(i||(i={})),function(e){e[e.AtLeast=1]="AtLeast",e[e.Exact=2]="Exact"}(d||(d={})),function(e){e[e.Center=0]="Center",e[e.Above=1]="Above",e[e.Outside=2]="Outside",e[e.JIS=3]="JIS",e[e.Below=4]="Below"}(l||(l={})),function(e){e[e.Feet=0]="Feet",e[e.None=1]="None",e[e.Inch=2]="Inch",e[e.FeetAndInch=3]="FeetAndInch",e[e.Leading=4]="Leading",e[e.Trailing=8]="Trailing",e[e.LeadingAndTrailing=12]="LeadingAndTrailing"}(u||(u={})),function(e){e[e.None=0]="None",e[e.Leading=1]="Leading",e[e.Trailing=2]="Trailing",e[e.LeadingAndTrailing=3]="LeadingAndTrailing"}(p||(p={})),function(e){e[e.Center=0]="Center",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.OverFirst=3]="OverFirst",e[e.OverSecond=4]="OverSecond"}(m||(m={})),function(e){e[e.Bottom=0]="Bottom",e[e.Center=1]="Center",e[e.Top=2]="Top"}(E||(E={})),function(e){e[e.PatternFill=0]="PatternFill",e[e.SolidFill=1]="SolidFill"}(I||(I={})),function(e){e[e.NonAssociative=0]="NonAssociative",e[e.Associative=1]="Associative"}(h||(h={})),function(e){e[e.Normal=0]="Normal",e[e.Outer=1]="Outer",e[e.Ignore=2]="Ignore"}(f||(f={})),function(e){e[e.UserDefined=0]="UserDefined",e[e.Predefined=1]="Predefined",e[e.Custom=2]="Custom"}(T||(T={})),function(e){e[e.NotAnnotated=0]="NotAnnotated",e[e.Annotated=1]="Annotated"}(D||(D={})),function(e){e[e.Solid=0]="Solid",e[e.Gradient=1]="Gradient"}(O||(O={})),function(e){e[e.TwoColor=0]="TwoColor",e[e.OneColor=1]="OneColor"}(S||(S={})),function(e){e[e.Default=0]="Default",e[e.External=1]="External",e[e.Polyline=2]="Polyline",e[e.Derived=4]="Derived",e[e.Textbox=8]="Textbox",e[e.Outermost=16]="Outermost"}(N||(N={})),function(e){e[e.Line=1]="Line",e[e.Circular=2]="Circular",e[e.Elliptic=3]="Elliptic",e[e.Spline=4]="Spline"}(b||(b={})),function(e){e[e.Off=0]="Off",e[e.Solid=1]="Solid",e[e.Dashed=2]="Dashed",e[e.Dotted=3]="Dotted",e[e.ShotDash=4]="ShotDash",e[e.MediumDash=5]="MediumDash",e[e.LongDash=6]="LongDash",e[e.DoubleShortDash=7]="DoubleShortDash",e[e.DoubleMediumDash=8]="DoubleMediumDash",e[e.DoubleLongDash=9]="DoubleLongDash",e[e.DoubleMediumLongDash=10]="DoubleMediumLongDash",e[e.SparseDot=11]="SparseDot"}(L||(L={}));const _={DRAGVS:"NULL",INTERFERECOLOR:1,INTERFEREOBJVS:"Conceptual",INTERFEREVPVS:"3d Wireframe",OBSLTYPE:L.Off,SHADEDIF:70};var g,A;!function(e){e[e.Standard=-3]="Standard",e[e.ByLayer=-2]="ByLayer",e[e.ByBlock=-1]="ByBlock"}(g||(g={})),function(e){e[e.English=0]="English",e[e.Metric=1]="Metric"}(A||(A={}));const y=65536;var C,M,P,R,v,x;function k(e,a,r){return e.code===a&&(null==r||e.value===r)}function F(e){const a={};e.rewind();let r=e.next();const n=r.code;if(a.x=r.value,r=e.next(),r.code!==n+10)throw new Error("Expected code for point value to be 20 but got "+r.code+".");return a.y=r.value,r=e.next(),r.code!==n+20?(e.rewind(),a):(a.z=r.value,a)}!function(e){e[e.PERSPECTIVE_MODE=1]="PERSPECTIVE_MODE",e[e.FRONT_CLIPPING=2]="FRONT_CLIPPING",e[e.BACK_CLIPPING=4]="BACK_CLIPPING",e[e.UCS_FOLLOW=8]="UCS_FOLLOW",e[e.FRONT_CLIP_NOT_AT_EYE=16]="FRONT_CLIP_NOT_AT_EYE",e[e.UCS_ICON_VISIBILITY=32]="UCS_ICON_VISIBILITY",e[e.UCS_ICON_AT_ORIGIN=64]="UCS_ICON_AT_ORIGIN",e[e.FAST_ZOOM=128]="FAST_ZOOM",e[e.SNAP_MODE=256]="SNAP_MODE",e[e.GRID_MODE=512]="GRID_MODE",e[e.ISOMETRIC_SNAP_STYLE=1024]="ISOMETRIC_SNAP_STYLE",e[e.HIDE_PLOT_MODE=2048]="HIDE_PLOT_MODE",e[e.K_ISO_PAIR_TOP=4096]="K_ISO_PAIR_TOP",e[e.K_ISO_PAIR_RIGHT=8192]="K_ISO_PAIR_RIGHT",e[e.VIEWPORT_ZOOM_LOCKING=16384]="VIEWPORT_ZOOM_LOCKING",e[e.UNUSED=32768]="UNUSED",e[e.NON_RECTANGULAR_CLIPPING=65536]="NON_RECTANGULAR_CLIPPING",e[e.VIEWPORT_OFF=131072]="VIEWPORT_OFF",e[e.GRID_BEYOND_DRAWING_LIMITS=262144]="GRID_BEYOND_DRAWING_LIMITS",e[e.ADAPTIVE_GRID_DISPLAY=524288]="ADAPTIVE_GRID_DISPLAY",e[e.SUBDIVISION_BELOW_SPACING=1048576]="SUBDIVISION_BELOW_SPACING",e[e.GRID_FOLLOWS_WORKPLANE=2097152]="GRID_FOLLOWS_WORKPLANE"}(C||(C={})),function(e){e[e.OPTIMIZED_2D=0]="OPTIMIZED_2D",e[e.WIREFRAME=1]="WIREFRAME",e[e.HIDDEN_LINE=2]="HIDDEN_LINE",e[e.FLAT_SHADED=3]="FLAT_SHADED",e[e.GOURAUD_SHADED=4]="GOURAUD_SHADED",e[e.FLAT_SHADED_WITH_WIREFRAME=5]="FLAT_SHADED_WITH_WIREFRAME",e[e.GOURAUD_SHADED_WITH_WIREFRAME=6]="GOURAUD_SHADED_WITH_WIREFRAME"}(M||(M={})),function(e){e[e.UCS_UNCHANGED=0]="UCS_UNCHANGED",e[e.HAS_OWN_UCS=1]="HAS_OWN_UCS"}(P||(P={})),function(e){e[e.NON_ORTHOGRAPHIC=0]="NON_ORTHOGRAPHIC",e[e.TOP=1]="TOP",e[e.BOTTOM=2]="BOTTOM",e[e.FRONT=3]="FRONT",e[e.BACK=4]="BACK",e[e.LEFT=5]="LEFT",e[e.RIGHT=6]="RIGHT"}(R||(R={})),function(e){e[e.AS_DISPLAYED=0]="AS_DISPLAYED",e[e.WIREFRAME=1]="WIREFRAME",e[e.HIDDEN=2]="HIDDEN",e[e.RENDERED=3]="RENDERED"}(v||(v={})),function(e){e[e.ONE_DISTANT_LIGHT=0]="ONE_DISTANT_LIGHT",e[e.TWO_DISTANT_LIGHTS=1]="TWO_DISTANT_LIGHTS"}(x||(x={}));const V=Symbol();function w(e,a){return(r,n,t)=>{const o=function(e){return e.reduce(((e,a)=>{a.pushContext&&e.push({});const r=e[e.length-1],n="number"==typeof a.code?[a.code]:a.code;for(const e of n){const n=r[e]??(r[e]=[]);a.isMultiple&&n.length&&console.warn(`Snippet ${n.at(-1).name} for code(${e}) is shadowed by ${a.name}`),n.push(a)}return e}),[{}])}(e);let s=!1,c=o.length-1;for(;!k(r,0,"EOF");){const e=B(o,r.code,c),a=e?.[r.code].at(-1);if(!e||!a){n.rewind();break}a.isMultiple||e[r.code].pop();const{name:i,parser:d,isMultiple:l}=a,u=d?.(r,n,t);if(u===V){n.rewind();break}if(i){const[e,a]=H(t,i);l?(Object.hasOwn(e,a)||(e[a]=[]),e[a].push(u)):e[a]=u}a.pushContext&&(c-=1),s=!0,r=n.next()}return a&&Object.setPrototypeOf(t,a),s}}function B(e,a,r){return e.find(((e,n)=>n>=r&&e[a]?.length))}function H(e,a){const r=a.split(".");let n=e;for(let e=0;e<r.length-1;++e){const a=r[e];Object.hasOwn(n,a)||(n[a]={}),n=n[a]}return[n,r.at(-1)]}function G({value:e}){return e}function U(e,a){return F(a)}function Y({value:e}){return!!e}const W=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215],j=[{code:1001,name:"xdata",parser:X}];function X(e,a){if(!k(e,1001))throw new Error("XData must starts with code 1001");const r={appName:e.value,value:[]};e=a.next();const n=[r.value];for(;!k(e,0,"EOF")&&e.code>=1e3;){const r=n.at(-1);switch(e.code){case 1002:"{"===e.value?n.push([]):(n.pop(),n.at(-1)?.push(r));break;case 1e3:case 1004:case 1040:case 1070:case 1071:r.push({type:z(e.code),value:e.value});break;case 1003:r.push({name:"layer",type:z(e.code),value:e.value});break;case 1005:r.push({name:"handle",type:z(e.code),value:e.value});break;case 1010:r.push({type:z(e.code),value:F(a)});break;case 1011:r.push({name:"worldSpacePosition",type:z(e.code),value:F(a)});break;case 1012:r.push({name:"worldSpaceDisplacement",type:z(e.code),value:F(a)});break;case 1013:r.push({name:"worldSpaceDirection",type:z(e.code),value:F(a)});break;case 1041:r.push({name:"distance",type:z(e.code),value:e.value});break;case 1042:r.push({name:"scale",type:z(e.code),value:e.value})}e=a.next()}return a.rewind(),r}function z(e){switch(e){case 1e3:case 1003:case 1005:return"string";case 1004:return"hex";case 1040:case 1041:case 1042:return"real";case 1070:return"integer";case 1071:return"long";case 1010:case 1011:case 1012:case 1013:return"point";default:return""}}function K(e){return W[e]}function Z(e,a,r){if(k(a,102))return q(a,r),!0;switch(a.code){case 0:e.type=a.value;break;case 5:e.handle=a.value;break;case 330:e.ownerDictionarySoftId?e.ownerBlockRecordSoftId=a.value:e.ownerDictionarySoftId=a.value;break;case 360:e.ownerdictionaryHardId=a.value;break;case 67:e.isInPaperSpace=!!a.value;break;case 8:e.layer=a.value;break;case 6:e.lineType=a.value;break;case 347:e.materialObjectHardId=a.value;break;case 62:e.colorIndex=a.value,e.color=K(Math.abs(a.value));break;case 370:e.lineweight=a.value;break;case 48:e.lineTypeScale=a.value;break;case 60:e.isVisible=!!a.value;break;case 92:e.proxyByte=a.value;break;case 310:e.proxyEntity=a.value;break;case 100:break;case 420:e.color=a.value;break;case 430:e.transparency=a.value;break;case 390:e.plotStyleHardId=a.value;break;case 284:e.shadowMode=a.value;break;case 1001:e.xdata=X(a,r);break;default:return!1}return!0}var J;!function(e){e[e.CAST_AND_RECEIVE=0]="CAST_AND_RECEIVE",e[e.CAST=1]="CAST",e[e.RECEIVE=2]="RECEIVE",e[e.IGNORE=3]="IGNORE"}(J||(J={}));const $=[...j,{code:284,name:"shadowMode",parser:G},{code:390,name:"plotStyleHardId",parser:G},{code:440,name:"transparency",parser:G},{code:430,name:"colorName",parser:G},{code:420,name:"color",parser:G},{code:310,name:"proxyEntity",parser:G},{code:92,name:"proxyByte",parser:G},{code:60,name:"isVisible",parser:Y},{code:48,name:"lineTypeScale",parser:G},{code:370,name:"lineweight",parser:G},{code:62,name:"colorIndex",parser(e,a,r){const n=e.value;return r.color=K(Math.abs(n)),n}},{code:347,name:"materialObjectHardId",parser:G},{code:6,name:"lineType",parser:G},{code:8,name:"layer",parser:G},{code:410,name:"layoutTabName",parser:G},{code:67,name:"isInPaperSpace",parser:Y},{code:100},{code:330,name:"ownerBlockRecordSoftId",parser:G},{code:102,parser:q},{code:102,parser:q},{code:102,parser:q},{code:5,name:"handle",parser:G}];function q(e,a){for(e=a.next();!k(e,102)&&!k(e,0,"EOF");)e=a.next()}const Q={extrusionDirection:{x:0,y:0,z:1}},ee=[{code:210,name:"extrusionDirection",parser:U},{code:51,name:"endAngle",parser:G},{code:50,name:"startAngle",parser:G},{code:100,name:"subclassMarker",parser:G},{code:40,name:"radius",parser:G},{code:10,name:"center",parser:U},{code:39,name:"thickness",parser:G},{code:100},...$];class ae{constructor(){this.parser=w(ee,Q)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}var re,ne,te,oe,se;ae.ForEntityName="ARC",function(e){e[e.NONE=0]="NONE",e[e.INVISIBLE=1]="INVISIBLE",e[e.CONSTANT=2]="CONSTANT",e[e.VERIFICATION_REQUIRED=4]="VERIFICATION_REQUIRED",e[e.PRESET=8]="PRESET"}(re||(re={})),function(e){e[e.MULTILINE=2]="MULTILINE",e[e.CONSTANT_MULTILINE=4]="CONSTANT_MULTILINE"}(ne||(ne={})),function(e){e[e.NONE=0]="NONE",e[e.MIRRORED_X=2]="MIRRORED_X",e[e.MIRRORED_Y=4]="MIRRORED_Y"}(te||(te={})),function(e){e[e.LEFT=0]="LEFT",e[e.CENTER=1]="CENTER",e[e.RIGHT=2]="RIGHT",e[e.ALIGNED=3]="ALIGNED",e[e.MIDDLE=4]="MIDDLE",e[e.FIT=5]="FIT"}(oe||(oe={})),function(e){e[e.BASELINE=0]="BASELINE",e[e.BOTTOM=1]="BOTTOM",e[e.MIDDLE=2]="MIDDLE",e[e.TOP=3]="TOP"}(se||(se={}));const ce={thickness:0,rotation:0,xScale:1,obliqueAngle:0,styleName:"STANDARD",generationFlag:0,halign:oe.LEFT,valign:se.BASELINE,extrusionDirection:{x:0,y:0,z:1}},ie=[{code:73,name:"valign",parser:G},{code:100},{code:210,name:"extrusionDirection",parser:U},{code:11,name:"endPoint",parser:U},{code:72,name:"valign",parser:G},{code:72,name:"halign",parser:G},{code:71,name:"generationFlag",parser:G},{code:7,name:"styleName",parser:G},{code:51,name:"obliqueAngle",parser:G},{code:41,name:"xScale",parser:G},{code:50,name:"rotation",parser:G},{code:1,name:"text",parser:G},{code:40,name:"textHeight",parser:G},{code:10,name:"startPoint",parser:U},{code:39,name:"thickness",parser:G},{code:100,name:"subclassMarker",parser:G},...$];class de{constructor(){this.parser=w(ie,ce)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}de.ForEntityName="TEXT";const le={...ce},ue=[{code:2},{code:40,name:"annotationScale",parser:G},{code:10,name:"alignmentPoint",parser:U},{code:340,name:"secondaryAttributesHardIds",isMultiple:!0,parser:G},{code:70,name:"numberOfSecondaryAttributes",parser:G},{code:70,name:"isReallyLocked",parser:Y},{code:70,name:"mtextFlag",parser:G},{code:280,name:"isDuplicatedRecord",parser:Y},{code:100},{code:280,name:"isLocked",parser:Y},{code:74,name:"valign",parser:G},{code:73},{code:70,name:"attributeFlag",parser:G},{code:2,name:"tag",parser:G},{code:3,name:"prompt",parser:G},{code:280},{code:100,name:"subclassMarker",parser:G},...ie.slice(2)];class pe{constructor(){this.parser=w(ue,le)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}pe.ForEntityName="ATTDEF";const me={thickness:0,extrusionDirection:{x:0,y:0,z:1}},Ee=[{code:210,name:"extrusionDirection",parser:U},{code:40,name:"radius",parser:G},{code:10,name:"center",parser:U},{code:39,name:"thickness",parser:G},{code:100,name:"subclassMarker",parser:G},...$];class Ie{constructor(){this.parser=w(Ee,me)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}function he(e,a,r){switch(a.code){case 100:e.subclassMarker=a.value;break;case 280:e.version=a.value;break;case 2:e.name=a.value;break;case 10:e.definitionPoint=F(r);break;case 11:e.textPoint=F(r);break;case 12:e.insertionPoint=F(r);break;case 13:e.subDefinitionPoint1=F(r);break;case 14:e.subDefinitionPoint2=F(r);break;case 15:e.centerPoint=F(r);break;case 16:e.arcPoint=F(r);break;case 70:e.dimensionType=a.value;break;case 71:e.attachmentPoint=a.value;break;case 72:e.textLineSpacingStyle=a.value;break;case 40:e.leaderLength=a.value;break;case 41:e.textLineSpacingFactor=a.value;break;case 42:e.measurement=a.value;break;case 1:e.text=a.value;break;case 50:e.rotationAngle=a.value;break;case 52:e.obliqueAngle=a.value;break;case 53:e.textRotation=a.value;break;case 51:e.ocsRotation=a.value;break;case 210:e.extrusionDirection=F(r);break;case 3:e.styleName=a.value;break;default:Z(e,a,r)}}Ie.ForEntityName="CIRCLE";class fe{parseEntity(e,a){const r={};for(;!k(a,0,"EOF");){if(0===a.code)return e.rewind(),r;he(r,a,e),a=e.next()}return r}}fe.ForEntityName="DIMENSION";const Te=fe,De={extrusionDirection:{x:0,y:0,z:1}},Oe=[{code:42,name:"endAngle",parser:G},{code:41,name:"startAngle",parser:G},{code:40,name:"axisRatio",parser:G},{code:210,name:"extrusionDirection",parser:U},{code:11,name:"majorAxisEndPoint",parser:U},{code:10,name:"center",parser:U},{code:100,name:"subclassMarker",parser:G},...$];class Se{constructor(){this.parser=w(Oe,De)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}Se.ForEntityName="ELLIPSE";const Ne=[{code:330,name:"sourceBoundaryObjects",parser:G,isMultiple:!0},{code:97,name:"numberOfSourceBoundaryObjects",parser:G}],be=[{code:11,name:"end",parser:U},{code:10,name:"start",parser:U}],Le=[{code:73,name:"isCCW",parser:Y},{code:51,name:"endAngle",parser:G},{code:50,name:"startAngle",parser:G},{code:40,name:"radius",parser:G},{code:10,name:"center",parser:U}],_e=[{code:73,name:"isCCW",parser:Y},{code:51,name:"endAngle",parser:G},{code:50,name:"startAngle",parser:G},{code:40,name:"lengthOfMinorAxis",parser:G},{code:11,name:"end",parser:U},{code:10,name:"center",parser:U}],ge=[{code:13,name:"endTangent",parser:U},{code:12,name:"startTangent",parser:U},{code:11,name:"fitDatum",isMultiple:!0,parser:U},{code:97,name:"numberOfFitData",parser:G},{code:10,name:"controlPoints",isMultiple:!0,parser(e,a){const r={...F(a),weight:1};return 42===(e=a.next()).code?r.weight=e.value:a.rewind(),r}},{code:40,name:"knots",isMultiple:!0,parser:G},{code:96,name:"numberOfControlPoints",parser:G},{code:95,name:"numberOfKnots",parser:G},{code:74,name:"isPeriodic",parser:Y},{code:73,name:"splineFlag",parser:G},{code:94,name:"degree",parser:G}],Ae={[b.Line]:be,[b.Circular]:Le,[b.Elliptic]:_e,[b.Spline]:ge},ye=[...Ne,{code:72,name:"edges",parser(e,a){const r={type:e.value},n=w(Ae[r.type]);if(!n)throw new Error(`Invalid edge type ${r.type}`);return n(e=a.next(),a,r),r},isMultiple:!0},{code:93,name:"numberOfEdges",parser:G}],Ce=[...Ne,{code:10,name:"vertices",parser(e,a){const r={...F(a),bulge:0};return 42===(e=a.next()).code?r.bulge=e.value:a.rewind(),r},isMultiple:!0},{code:93,name:"numberOfVertices",parser:G},{code:73,name:"isClosed",parser:Y},{code:72,name:"hasBulge",parser:Y}],Me=[{code:49,name:"dashLengths",parser:G,isMultiple:!0},{code:79,name:"numberOfDashLengths",parser:G},{code:45,name:"offset",parser:Pe},{code:43,name:"base",parser:Pe},{code:53,name:"angle",parser:G}];function Pe(e,a){const r=e.code+1,n={x:e.value,y:1};return(e=a.next()).code===r?n.y=e.value:a.rewind(),n}const Re={extrusionDirection:{x:0,y:0,z:1},gradientRotation:0,colorTint:0},ve=[{code:470},{code:463},{code:462,name:"colorTint",parser:G},{code:461,name:"gradientDefinition",parser:G},{code:460,name:"gradientRotation",parser:G},{code:453,name:"numberOfColors",parser:G},{code:452,name:"gradientColorFlag",parser:G},{code:451},{code:450,name:"gradientFlag",parser:G},{code:10,name:"seedPoints",parser:U,isMultiple:!0},{code:99},{code:11,name:"offsetVector",parser:U},{code:98,name:"numberOfSeedPoints",parser:G},{code:47,name:"pixelSize",parser:G},{code:53,name:"definitionLines",parser:function(e,a){const r={};return w(Me)(e,a,r),r},isMultiple:!0},{code:78,name:"numberOfDefinitionLines",parser:G},{code:77,name:"isDouble",parser:Y},{code:73,name:"isAnnotated",parser:Y},{code:41,name:"patternScale",parser:G},{code:52,name:"patternAngle",parser:G},{code:76,name:"patternType",parser:G},{code:75,name:"hatchStyle",parser:G},{code:92,name:"boundaryPaths",parser:function(e,a){const r={boundaryPathTypeFlag:e.value},n=r.boundaryPathTypeFlag&N.Polyline;return e=a.next(),n?(w(Ce)(e,a,r),r):(w(ye)(e,a,r),r)},isMultiple:!0},{code:91,name:"numberOfBoundaryPaths",parser:G},{code:71,name:"associativity",parser:G},{code:63,name:"patternFillColor",parser:G},{code:70,name:"solidFill",parser:G},{code:2,name:"patternName",parser:G},{code:210,name:"extrusionDirection",parser:U},{code:10,name:"elevationPoint",parser:U},{code:100,name:"subclassMarker",parser:G,pushContext:!0},...$];class xe{constructor(){this.parser=w(ve,Re)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}xe.ForEntityName="HATCH";const ke={xScale:1,yScale:1,zScale:1,rotation:0,columnCount:0,rowCount:0,columnSpacing:0,rowSpacing:0,extrusionDirection:{x:0,y:0,z:1}},Fe=[{code:210,name:"extrusionDirection",parser:U},{code:45,name:"rowSpacing",parser:G},{code:44,name:"columnSpacing",parser:G},{code:71,name:"rowCount",parser:G},{code:70,name:"columnCount",parser:G},{code:50,name:"rotation",parser:G},{code:43,name:"zScale",parser:G},{code:42,name:"yScale",parser:G},{code:41,name:"xScale",parser:G},{code:10,name:"insertionPoint",parser:U},{code:2,name:"name",parser:G},{code:66,name:"isVariableAttributes",parser:Y},{code:100,name:"subclassMarker",parser:G},...$];class Ve{constructor(){this.parser=w(Fe,ke)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}Ve.ForEntityName="INSERT";const we={isArrowheadEnabled:!0},Be=[{code:213,name:"offsetFromAnnotation",parser:U},{code:212,name:"offsetFromBlock",parser:U},{code:211,name:"horizontalDirection",parser:U},{code:210,name:"normal",parser:U},{code:340,name:"associatedAnnotation",parser:G},{code:77,name:"byBlockColor",parser:G},{code:10,name:"vertices",parser:U,isMultiple:!0},{code:76,name:"numberOfVertices",parser:G},{code:41,name:"textWidth",parser:G},{code:40,name:"textHeight",parser:G},{code:75,name:"isHooklineExists",parser:Y},{code:74,name:"isHooklineSameDirection",parser:Y},{code:73,name:"leaderCreationFlag",parser:G},{code:72,name:"isSpline",parser:Y},{code:71,name:"isArrowheadEnabled",parser:Y},{code:3,name:"styleName",parser:G},{code:100,name:"subclassMarker",parser:G},...$];class He{constructor(){this.parser=w(Be,we)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}var Ge;He.ForEntityName="LEADER",function(e){e[e.TextAnnotation=0]="TextAnnotation",e[e.ToleranceAnnotation=1]="ToleranceAnnotation",e[e.BlockReferenceAnnotation=2]="BlockReferenceAnnotation",e[e.NoAnnotation=3]="NoAnnotation"}(Ge||(Ge={}));const Ue={thickness:0,extrusionDirection:{x:0,y:0,z:1}},Ye=[{code:210,name:"extrusionDirection",parser:U},{code:11,name:"endPoint",parser:U},{code:10,name:"startPoint",parser:U},{code:39,name:"thickness",parser:G},{code:100,name:"subclassMarker",parser:G},...$];class We{constructor(){this.parser=w(Ye,Ue)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}var je;We.ForEntityName="LINE",function(e){e[e.IS_CLOSED=1]="IS_CLOSED",e[e.PLINE_GEN=128]="PLINE_GEN"}(je||(je={}));const Xe={flag:0,elevation:0,thickness:0,extrusionDirection:{x:0,y:0,z:1},vertices:[]},ze={bulge:0},Ke=[{code:42,name:"bulge",parser:G},{code:41,name:"endWidth",parser:G},{code:40,name:"startWidth",parser:G},{code:91,name:"id",parser:G},{code:20,name:"y",parser:G},{code:10,name:"x",parser:G}],Ze=[{code:210,name:"extrusionDirection",parser:U},{code:10,name:"vertices",isMultiple:!0,parser(e,a){const r={};return w(Ke,ze)(e,a,r),r}},{code:39,name:"thickness",parser:G},{code:38,name:"elevation",parser:G},{code:43,name:"constantWidth",parser:G},{code:70,name:"flag",parser:G},{code:90,name:"numberOfVertices",parser:G},{code:100,name:"subclassMarker",parser:G},...$];class Je{parseEntity(e,a){const r={};return w(Ze,Xe)(a,e,r),r}}var $e;function qe({seeds:e,spanner:a,serializer:r,iterationLimit:n=1/0}){const t=new Set;let o=0;return e.map((e=>{const s=[],c=[[e,r(e)]];for(;c.length&&o++<n;){const[e,n]=c.pop();if(!t.has(n)){t.add(n),s.push(e);for(const n of a(e))c.push([n,r(n)])}}return s})).filter((e=>e.length))}function Qe(e,a){const r={};for(const n of e){const e=a(n);null!=e&&(r[e]??(r[e]=[]),r[e].push(n))}return r}function*ea(e,a=1/0,r=1){for(let n=e;n!==a;n+=r)yield n}function aa(e){return{x:e.x??0,y:e.y??0,z:e.z??0}}Je.ForEntityName="LWPOLYLINE",function(e){e[e.LEFT_TO_RIGHT=1]="LEFT_TO_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM",e[e.BY_STYLE=5]="BY_STYLE"}($e||($e={}));const ra={textStyle:"STANDARD",extrusionDirection:{x:0,y:0,z:1},rotation:0},na=[{code:46,name:"annotationHeight",parser:G},{code:101,parser(e,a){!function(e){e.rewind();let a=e.next();if(101!==a.code)throw new Error("Bad call for skipEmbeddedObject()");do{a=e.next()}while(0!==a.code);e.rewind()}(a)}},{code:50,name:"columnHeight",parser:G},{code:49,name:"columnGutter",parser:G},{code:48,name:"columnWidth",parser:G},{code:79,name:"columnAutoHeight",parser:G},{code:78,name:"columnFlowReversed",parser:G},{code:76,name:"columnCount",parser:G},{code:75,name:"columnType",parser:G},{code:441,name:"backgroundFillTransparency",parser:G},{code:63,name:"backgroundFillColor",parser:G},{code:45,name:"fillBoxScale",parser:G},{code:[...ea(430,440)],name:"backgroundColor",parser:G},{code:[...ea(420,430)],name:"backgroundColor",parser:G},{code:90,name:"backgroundFill",parser:G},{code:44,name:"lineSpacing",parser:G},{code:73,name:"lineSpacingStyle",parser:G},{code:50,name:"rotation",parser:G},{code:43},{code:42},{code:11,name:"direction",parser:U},{code:210,name:"extrusionDirection",parser:U},{code:7,name:"styleName",parser:G},{code:3,name:"text",parser:(e,a,r)=>(r.text??"")+e.value},{code:1,name:"text",parser:G},{code:72,name:"drawingDirection",parser:G},{code:71,name:"attachmentPoint",parser:G},{code:41,name:"width",parser:G},{code:40,name:"height",parser:G},{code:10,name:"insertionPoint",parser:U},{code:100,name:"subclassMarker",parser:G},...$];class ta{constructor(){this.parser=w(na,ra)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}ta.ForEntityName="MTEXT";const oa={thickness:0,extrusionDirection:{x:0,y:0,z:1},angle:0},sa=[{code:50,name:"angle",parser:G},{code:210,name:"extrusionDirection",parser:U},{code:39,name:"thickness",parser:G},{code:10,name:"position",parser:U},{code:100,name:"subclassMarker",parser:G},...$];class ca{constructor(){this.parser=w(sa,oa)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}var ia,da,la;ca.ForEntityName="POINT",function(e){e[e.CLOSED_POLYLINE=1]="CLOSED_POLYLINE",e[e.CURVE_FIT=2]="CURVE_FIT",e[e.SPLINE_FIT=4]="SPLINE_FIT",e[e.POLYLINE_3D=8]="POLYLINE_3D",e[e.POLYGON_3D=16]="POLYGON_3D",e[e.CLOSED_POLYGON=32]="CLOSED_POLYGON",e[e.POLYFACE=64]="POLYFACE",e[e.CONTINUOUS=128]="CONTINUOUS"}(ia||(ia={})),function(e){e[e.NONE=0]="NONE",e[e.QUADRATIC=5]="QUADRATIC",e[e.CUBIC=6]="CUBIC",e[e.BEZIER=8]="BEZIER"}(da||(da={})),function(e){e[e.CREATED_BY_CURVE_FIT=1]="CREATED_BY_CURVE_FIT",e[e.TANGENT_DEFINED=2]="TANGENT_DEFINED",e[e.NOT_USED=4]="NOT_USED",e[e.CREATED_BY_SPLINE_FIT=8]="CREATED_BY_SPLINE_FIT",e[e.SPLINE_CONTROL_POINT=16]="SPLINE_CONTROL_POINT",e[e.FOR_POLYLINE=32]="FOR_POLYLINE",e[e.FOR_POLYGON=64]="FOR_POLYGON",e[e.POLYFACE=128]="POLYFACE"}(la||(la={}));const ua={startWidth:0,endWidth:0,bulge:0},pa=[{code:91,name:"id",parser:G},{code:[...ea(71,75)],name:"faces",isMultiple:!0,parser:G},{code:50,name:"tangentDirection",parser:G},{code:70,name:"flag",parser:G},{code:42,name:"bulge",parser:G},{code:41,name:"endWidth",parser:G},{code:40,name:"startWidth",parser:G},{code:30,name:"z",parser:G},{code:20,name:"y",parser:G},{code:10,name:"x",parser:G},{code:100,name:"subclassMarker",parser:G},{code:100},...$];class ma{constructor(){this.parser=w(pa,ua)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}ma.ForEntityName="VERTEX";const Ea={thickness:0,flag:0,startWidth:0,endWidth:0,meshMVertexCount:0,meshNVertexCount:0,surfaceMDensity:0,surfaceNDensity:0,smoothType:0,extrusionDirection:{x:0,y:0,z:1},vertices:[]},Ia=[{code:0,name:"vertices",isMultiple:!0,parser:(e,a)=>k(e,0,"VERTEX")?(e=a.next(),(new ma).parseEntity(a,e)):V},{code:210,name:"extrusionDirection",parser:U},{code:75,name:"smoothType",parser:G},{code:74,name:"surfaceNDensity",parser:G},{code:73,name:"surfaceMDensity",parser:G},{code:72,name:"meshNVertexCount",parser:G},{code:71,name:"meshMVertexCount",parser:G},{code:41,name:"endWidth",parser:G},{code:40,name:"startWidth",parser:G},{code:70,name:"flag",parser:G},{code:39,name:"thickness",parser:G},{code:30,name:"elevation",parser:G},{code:20},{code:10},{code:66},{code:100,name:"subclassMarker",parser:G},...$];class ha{constructor(){this.parser=w(Ia,Ea)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}ha.ForEntityName="POLYLINE";const fa={vertices:[],backLineVertices:[]},Ta=[{code:360,name:"geometrySettingHardId",parser:G},{code:12,name:"backLineVertices",isMultiple:!0,parser:U},{code:93,name:"numberOfBackLineVertices",parser:G},{code:11,name:"vertices",isMultiple:!0,parser:U},{code:92,name:"verticesCount",parser:G},{code:[63,411],name:"indicatorColor",parser:G},{code:70,name:"indicatorTransparency",parser:G},{code:41,name:"bottomHeight",parser:G},{code:40,name:"topHeight",parser:G},{code:10,name:"verticalDirection",parser:U},{code:1,name:"name",parser:G},{code:91,name:"flag",parser:G},{code:90,name:"state",parser:G},{code:100,name:"subclassMarker",parser:G},...$];class Da{constructor(){this.parser=w(Ta,fa)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}Da.ForEntityName="SECTION";const Oa={points:[],thickness:0,extrusionDirection:{x:0,y:0,z:1}},Sa=[{code:210,name:"extrusionDirection",parser:U},{code:39,name:"thickness",parser:G},{code:[...ea(10,14)],name:"points",isMultiple:!0,parser:U},{code:100,name:"subclassMarker",parser:G},...$];class Na{constructor(){this.parser=w(Sa,Oa)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}var ba;Na.ForEntityName="SOLID",function(e){e[e.NONE=0]="NONE",e[e.CLOSED=1]="CLOSED",e[e.PERIODIC=2]="PERIODIC",e[e.RATIONAL=4]="RATIONAL",e[e.PLANAR=8]="PLANAR",e[e.LINEAR=16]="LINEAR"}(ba||(ba={}));const La={knotTolerance:1e-6,controlTolerance:1e-6,fitTolerance:1e-9,knotValues:[],controlPoints:[],fitPoints:[]},_a=[{code:11,name:"fitPoints",isMultiple:!0,parser:U},{code:10,name:"controlPoints",isMultiple:!0,parser:U},{code:41,name:"weights",isMultiple:!0,parser:G},{code:40,name:"knots",isMultiple:!0,parser:G},{code:13,name:"endTangent",parser:U},{code:12,name:"startTangent",parser:U},{code:44,name:"fitTolerance",parser:G},{code:43,name:"controlTolerance",parser:G},{code:42,name:"knotTolerance",parser:G},{code:74,name:"numberOfFitPoints",parser:G},{code:73,name:"numberOfControlPoints",parser:G},{code:72,name:"numberOfKnots",parser:G},{code:71,name:"degree",parser:G},{code:70,name:"flag",parser:G},{code:210,name:"normal",parser:U},{code:100,name:"subclassMarker",parser:G},...$];class ga{constructor(){this.parser=w(_a,La)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}ga.ForEntityName="SPLINE";class Aa{parseEntity(e,a){const r={};for(;"EOF"!==a;){if(0===a.code)return e.rewind(),r;Ca(r,e,a)||Z(r,a,e),a=e.next()}return r}}Aa.ForEntityName="VIEWPORT";const ya=Aa;function Ca(e,a,r){if("EOF"===r)return!1;switch(r.code){case 0:return!1;case 100:e.subclassMarker=r.value;break;case 10:e.viewportCenter=aa(F(a));break;case 40:e.width=r.value;break;case 41:e.height=r.value;break;case 68:e.status=r.value;break;case 69:e.viewportId=r.value;break;case 12:e.displayCenter=F(a);break;case 13:e.snapBase=F(a);break;case 14:e.snapSpacing=F(a);break;case 15:e.gridSpacing=F(a);break;case 16:e.viewDirection=aa(F(a));break;case 17:e.targetPoint=aa(F(a));break;case 42:e.perspectiveLensLength=r.value;break;case 43:e.frontClipZ=r.value;break;case 44:e.backClipZ=r.value;break;case 45:e.viewHeight=r.value;break;case 50:e.snapAngle=r.value;break;case 51:e.viewTwistAngle=r.value;break;case 72:e.circleZoomPercent=r.value;break;case 331:e.frozenLayerIds??(e.frozenLayerIds=[]),e.frozenLayerIds.push(r.value);break;case 90:e.statusBitFlags=r.value;break;case 340:e.clippingBoundaryId=r.value;break;case 1:e.sheetName=r.value;break;case 281:e.renderMode=r.value;break;case 71:e.ucsPerViewport=r.value;break;case 110:e.ucsOrigin=aa(F(a));break;case 111:e.ucsXAxis=aa(F(a));break;case 112:e.ucsYAxis=aa(F(a));break;case 345:e.ucsId=r.value;break;case 346:e.ucsBaseId=r.value;break;case 79:e.orthographicType=r.value;break;case 146:e.elevation=r.value;break;case 170:e.shadePlotMode=r.value;break;case 61:e.majorGridFrequency=r.value;break;case 332:e.backgroundId=r.value;break;case 333:e.shadePlotId=r.value;break;case 348:e.visualStyleId=r.value;break;case 292:e.isDefaultLighting=!!r.value;break;case 282:e.defaultLightingType=r.value;break;case 141:e.brightness=r.value;break;case 142:e.contrast=r.value;break;case 63:case 421:case 431:e.ambientLightColor=r.value;break;case 361:e.sunId=r.value;break;case 335:case 343:case 344:case 91:e.softPointer=r.value}return!0}let Ma=0;function Pa(e){if(!e)throw new TypeError("entity cannot be undefined or null");e.handle||(e.handle=Ma++)}var Ra;!function(e){e[e.INVISIBLE=1]="INVISIBLE",e[e.CONSTANT=2]="CONSTANT",e[e.REQUIRE_VERIFICATION=4]="REQUIRE_VERIFICATION",e[e.PRESET=8]="PRESET"}(Ra||(Ra={}));const va={thickness:0,rotation:0,scale:1,obliqueAngle:0,textStyle:"STANDARD",textGenerationFlag:0,horizontalJustification:0,verticalJustification:0,extrusionDirection:{x:0,y:0,z:1}},xa=[...na.slice(na.findIndex((({name:e})=>"columnType"===e)),na.findIndex((({name:e})=>"subclassMarker"===e))+1),{code:100},{code:0,parser(e){if(!k(e,0,"MTEXT"))return V}},{code:2,name:"definitionTag",parser:G},{code:40,name:"annotationScale",parser:G},{code:10,name:"alignmentPoint",parser:U},{code:340,name:"secondaryAttributesHardId",parser:G},{code:70,name:"numberOfSecondaryAttributes",parser:G},{code:70,name:"isReallyLocked",parser:Y},{code:70,name:"mtextFlag",parser:G},{code:280,name:"isDuplicatedEntriesKeep",parser:Y},{code:100},{code:280,name:"lockPositionFlag",parser:Y},{code:210,name:"extrusionDirection",parser:U},{code:11,name:"alignmentPoint",parser:U},{code:74,name:"verticalJustification",parser:G},{code:72,name:"horizontalJustification",parser:G},{code:71,name:"textGenerationFlag",parser:G},{code:7,name:"textStyle",parser:G},{code:51,name:"obliqueAngle",parser:G},{code:41,name:"scale",parser:G},{code:50,name:"rotation",parser:G},{code:73},{code:70,name:"attributeFlag",parser:G},{code:2,name:"tag",parser:G},{code:280},{code:100,name:"subclassMarker",parser:G},{code:1,name:"text",parser:G},{code:40,name:"textHeight",parser:G},{code:10,name:"startPoint",parser:U},{code:39,name:"thickness",parser:G},{code:100},...$];class ka{constructor(){this.parser=w(xa,va)}parseEntity(e,a){const r={};return this.parser(a,e,r),r}}ka.ForEntityName="ATTRIB";const Fa=Object.fromEntries([ae,pe,ka,Ie,Te,Se,Ve,He,We,Je,ta,ca,ha,Da,Na,ga,de,xe,ya].map((e=>[e.ForEntityName,new e])));function Va(e,a){let r=[];for(;!k(e,0,"EOF");){if(0===e.code){if("ENDBLK"===e.value||"ENDSEC"===e.value){a.rewind();break}const n=Fa[e.value];if(n){const t=e.value;e=a.next();const o=n.parseEntity(a,e);o.type=t,Pa(o),r.push(o)}else console.warn(`Unsupported ENTITY type: ${e.value}`)}e=a.next()}return r}function wa(e,a){let r={};for(;!k(e,0,"EOF")&&!k(e,0,"ENDSEC");){if(k(e,0,"BLOCK")){const n=Ba(e=a.next(),a);Pa(n),n.name&&(r[n.name]=n)}e=a.next()}return r}function Ba(e,a){let r={};for(;!k(e,0,"EOF");){if(k(e,0,"ENDBLK")){for(e=a.next();!k(e,0,"EOF");){if(k(e,100,"AcDbBlockEnd"))return r;e=a.next()}break}switch(e.code){case 1:r.xrefPath=e.value;break;case 2:r.name=e.value;break;case 3:r.name2=e.value;break;case 5:r.handle=e.value;break;case 8:r.layer=e.value;break;case 10:r.position=F(a);break;case 67:r.paperSpace=!(!e.value||1!=e.value);break;case 70:0!==e.value&&(r.type=e.value);break;case 100:break;case 330:r.ownerHandle=e.value;break;case 0:r.entities=Va(e,a)}e=a.next()}return r}function Ha(e,a){let r=null;const n={};for(;!k(e,0,"EOF")&&!k(e,0,"ENDSEC");)9===e.code?r=e.value:10===e.code?n[r]=F(a):n[r]=e.value,e=a.next();return n}const Ga=[{code:333,name:"shadePlotId",parser:G},{code:149,name:"imageOriginY",parser:G},{code:148,name:"imageOriginX",parser:G},{code:147,name:"scaleFactor",parser:G},{code:78,name:"shadePlotCustomDPI",parser:G},{code:77,name:"shadePlotResolution",parser:G},{code:76,name:"shadePlotMode",parser:G},{code:75,name:"standardScaleType",parser:G},{code:7,name:"currentStyleSheet",parser:G},{code:74,name:"plotType",parser:G},{code:73,name:"plotRotation",parser:G},{code:72,name:"paperUnit",parser:G},{code:70,name:"layoutFlag",parser:G},{code:143,name:"printScaleDenominator",parser:G},{code:142,name:"printScaleNominator",parser:G},{code:141,name:"windowAreaYMax",parser:G},{code:140,name:"windowAreaYMin",parser:G},{code:49,name:"windowAreaXMax",parser:G},{code:48,name:"windowAreaXMin",parser:G},{code:47,name:"plotOriginY",parser:G},{code:46,name:"plotOriginX",parser:G},{code:45,name:"paperHeight",parser:G},{code:44,name:"paperWidth",parser:G},{code:43,name:"marginTop",parser:G},{code:42,name:"marginRight",parser:G},{code:41,name:"marginBottom",parser:G},{code:40,name:"marginLeft",parser:G},{code:6,name:"plotViewName",parser:G},{code:4,name:"paperSize",parser:G},{code:2,name:"configName",parser:G},{code:1,name:"pageSetupName",parser:G},{code:100,name:"subclassMarker",parser:G}];var Ua,Ya,Wa,ja;!function(e){e[e.INCHES=0]="INCHES",e[e.MILLIMETERS=1]="MILLIMETERS",e[e.PIXELS=2]="PIXELS"}(Ua||(Ua={})),function(e){e[e.LAST_SCREEN_DISPLAY=0]="LAST_SCREEN_DISPLAY",e[e.DRAWING_EXTENTS=1]="DRAWING_EXTENTS",e[e.DRAWING_LIMITS=2]="DRAWING_LIMITS",e[e.VIEW_SPECIFIED=3]="VIEW_SPECIFIED",e[e.WINDOW_SPECIFIED=4]="WINDOW_SPECIFIED",e[e.LAYOUT_INFORMATION=5]="LAYOUT_INFORMATION"}(Ya||(Ya={})),function(e){e[e.AS_DISPLAYED=0]="AS_DISPLAYED",e[e.WIREFRAME=1]="WIREFRAME",e[e.HIDDEN=2]="HIDDEN",e[e.RENDERED=3]="RENDERED"}(Wa||(Wa={})),function(e){e[e.DRAFT=0]="DRAFT",e[e.PREVIEW=1]="PREVIEW",e[e.NORMAL=2]="NORMAL",e[e.PRESENTATION=3]="PRESENTATION",e[e.MAXIMUM=4]="MAXIMUM",e[e.CUSTOM=5]="CUSTOM"}(ja||(ja={}));const Xa=[{code:333,name:"shadePlotId",parser:G},{code:346,name:"orthographicUcsId",parser:G},{code:345,name:"namedUcsId",parser:G},{code:331,name:"viewportId",parser:G},{code:330,name:"paperSpaceTableId",parser:G},{code:76,name:"orthographicType",parser:G},{code:17,name:"ucsYAxis",parser:U},{code:16,name:"ucsXAxis",parser:U},{code:13,name:"ucsOrigin",parser:U},{code:146,name:"elevation",parser:G},{code:15,name:"maxExtent",parser:U},{code:14,name:"minExtent",parser:U},{code:12,name:"insertionBase",parser:U},{code:11,name:"maxLimit",parser:U},{code:10,name:"minLimit",parser:U},{code:71,name:"tabOrder",parser:G},{code:70,name:"controlFlag",parser:G},{code:1,name:"layoutName",parser:G},{code:100,name:"subclassMarker",parser:G},...Ga];var za;!function(e){e[e.PSLTSCALE=1]="PSLTSCALE",e[e.LIMCHECK=2]="LIMCHECK"}(za||(za={}));const Ka=[{code:330,name:"ownerObjectId",parser:G},{code:102},{code:360,name:"ownerDictionaryIdHard",parser:G},{code:102},{code:102},{code:330,name:"ownerDictionaryIdSoft",parser:G},{code:102},{code:102},{code:102},{code:5,name:"handle",parser:G}],Za=[{code:3,name:"entries",parser:(e,a)=>{const r={name:e.value};return 350===(e=a.next()).code?r.objectId=e.value:a.rewind(),r},isMultiple:!0},{code:281,name:"recordCloneFlag",parser:G},{code:280,name:"isHardOwned",parser:Y},{code:100,name:"subclassMarker",parser:G}];var Ja;function $a(e){const a=Object.fromEntries(e.map((e=>[e.handle,e])));for(const r of e)qa(r,a),Qa(r,a);return e[0]}function qa(e,a){er(e)&&"0"===e.ownerDictionaryIdSoft||(e.ownerDictionaryIdSoft&&(e.ownerDictionarySoft=a[e.ownerDictionaryIdSoft]),e.ownerDictionaryIdHard&&(e.ownerDictionaryHard=a[e.ownerDictionaryIdHard]),e.ownerObjectId&&(e.ownerObject=a[e.ownerObjectId]))}function Qa(e,a){er(e)&&e.entries&&(e.entries=Object.fromEntries(e.entries.map((({name:e,objectId:r})=>[e,a[r]]))))}function er(e){return"AcDbDictionary"===e.subclassMarker}!function(e){e[e.NOT_APPLICABLE=0]="NOT_APPLICABLE",e[e.KEEP_EXISTING=1]="KEEP_EXISTING",e[e.USE_CLONE=2]="USE_CLONE",e[e.XREF_VALUE_NAME=3]="XREF_VALUE_NAME",e[e.VALUE_NAME=4]="VALUE_NAME",e[e.UNMANGLE_NAME=5]="UNMANGLE_NAME"}(Ja||(Ja={}));const ar={LAYOUT:Xa,PLOTSETTINGS:Ga,DICTIONARY:Za};function rr(e,a){const r=[];for(;0!==e.code||!["EOF","ENDSEC"].includes(e.value);){const n=e.value,t=ar[n];if(0===e.code&&t?.length){const o={name:n};w([...Ka,...t])(e=a.next(),a,o)?(r.push(o),e=a.peek()):e=a.next()}else e=a.next()}return{byName:Qe(r,(({name:e})=>e)),byTree:$a(r)}}const nr=[{code:100,name:"subclassMarker",parser:G},{code:330,name:"ownerObjectId",parser:G},{code:102,parser(e,a){for(;!k(e,0,"EOF")&&!k(e,102,"}");)e=a.next()}},{code:5,name:"handle",parser:G}],tr=w([{code:310,name:"bmpPreview",parser:G},{code:281,name:"scalability",parser:G},{code:280,name:"explodability",parser:G},{code:70,name:"insertionUnits",parser:G},{code:340,name:"layoutObjects",parser:G},{code:2,name:"name",parser:G},{code:100,name:"subclassMarker",parser:G},...nr]),or=w([...[{name:"DIMPOST",code:3},{name:"DIMAPOST",code:4},{name:"DIMBLK_OBSOLETE",code:5},{name:"DIMBLK1_OBSOLETE",code:6},{name:"DIMBLK2_OBSOLETE",code:7},{name:"DIMSCALE",code:40,defaultValue:1},{name:"DIMASZ",code:41,defaultValue:.25},{name:"DIMEXO",code:42,defaultValue:.625,defaultValueImperial:.0625},{name:"DIMDLI",code:43,defaultValue:3.75,defaultValueImperial:.38},{name:"DIMEXE",code:44,defaultValue:2.25,defaultValueImperial:.28},{name:"DIMRND",code:45,defaultValue:0},{name:"DIMDLE",code:46,defaultValue:0},{name:"DIMTP",code:47,defaultValue:0},{name:"DIMTM",code:48,defaultValue:0},{name:"DIMTXT",code:140,defaultValue:2.5,defaultValueImperial:.28},{name:"DIMCEN",code:141,defaultValue:2.5,defaultValueImperial:.09},{name:"DIMTSZ",code:142,defaultValue:0},{name:"DIMALTF",code:143,defaultValue:25.4},{name:"DIMLFAC",code:144,defaultValue:1},{name:"DIMTVP",code:145,defaultValue:0},{name:"DIMTFAC",code:146,defaultValue:1},{name:"DIMGAP",code:147,defaultValue:.625,defaultValueImperial:.09},{name:"DIMALTRND",code:148,defaultValue:0},{name:"DIMTOL",code:71,defaultValue:0,defaultValueImperial:1},{name:"DIMLIM",code:72,defaultValue:0},{name:"DIMTIH",code:73,defaultValue:0,defaultValueImperial:1},{name:"DIMTOH",code:74,defaultValue:0,defaultValueImperial:1},{name:"DIMSE1",code:75,defaultValue:0},{name:"DIMSE2",code:76,defaultValue:0},{name:"DIMTAD",code:77,defaultValue:l.Above,defaultValueImperial:l.Center},{name:"DIMZIN",code:78,defaultValue:u.Trailing,defaultValueImperial:u.Feet},{name:"DIMAZIN",code:79,defaultValue:p.None},{name:"DIMALT",code:170,defaultValue:0},{name:"DIMALTD",code:171,defaultValue:3,defaultValueImperial:2},{name:"DIMTOFL",code:172,defaultValue:1,defaultValueImperial:0},{name:"DIMSAH",code:173,defaultValue:0},{name:"DIMTIX",code:174,defaultValue:0},{name:"DIMSOXD",code:175,defaultValue:0},{name:"DIMCLRD",code:176,defaultValue:0},{name:"DIMCLRE",code:177,defaultValue:0},{name:"DIMCLRT",code:178,defaultValue:0},{name:"DIMADEC",code:179},{name:"DIMUNIT",code:270},{name:"DIMDEC",code:271,defaultValue:2,defaultValueImperial:4},{name:"DIMTDEC",code:272,defaultValue:2,defaultValueImperial:4},{name:"DIMALTU",code:273,defaultValue:2},{name:"DIMALTTD",code:274,defaultValue:2,defaultValueImperial:4},{name:"DIMAUNIT",code:275,defaultValue:0},{name:"DIMFRAC",code:276,defaultValue:0},{name:"DIMLUNIT",code:277,defaultValue:2},{name:"DIMDSEP",code:278,defaultValue:",",defaultValueImperial:"."},{name:"DIMJUST",code:280,defaultValue:m.Center},{name:"DIMSD1",code:281,defaultValue:0},{name:"DIMSD2",code:282,defaultValue:0},{name:"DIMTOLJ",code:283,defaultValue:E.Center},{name:"DIMTZIN",code:284,defaultValue:u.Trailing,defaultValueImperial:u.Feet},{name:"DIMALTZ",code:285,defaultValue:u.Trailing},{name:"DIMALTTZ",code:286,defaultValue:u.Trailing},{name:"DIMFIT",code:287},{name:"DIMUPT",code:288,defaultValue:0},{name:"DIMATFIT",code:289,defaultValue:3},{name:"DIMTXSTY",code:340},{name:"DIMLDRBLK",code:341},{name:"DIMBLK",code:342},{name:"DIMBLK1",code:343},{name:"DIMBLK2",code:344},{name:"DIMLWD",code:371,defaultValue:-2},{name:"DIMLWD",code:372,defaultValue:-2}].map((e=>({...e,parser:G}))),{code:70,name:"standardFlag",parser:G},{code:2,name:"name",parser:G},{code:100,name:"subclassMarker",parser:G},{code:105,name:"handle",parser:G},...nr.filter((e=>5!==e.code))]),sr=w([{code:347,name:"materialObjectId",parser:G},{code:390,name:"plotStyleNameObjectId",parser:G},{code:370,name:"lineweight",parser:G},{code:290,name:"isPlotting",parser:Y},{code:6,name:"lineType",parser:G},{code:62,name:"colorIndex",parser:G},{code:70,name:"standardFlag",parser:G},{code:2,name:"name",parser:G},{code:100,name:"subclassMarker",parser:G},...nr]),cr=w([{code:9,name:"text",parser:G},{code:45,name:"offsetY",parser:G},{code:44,name:"offsetX",parser:G},{code:50,name:"rotation",parser:G},{code:46,name:"scale",parser:G},{code:340,name:"styleObjectId",parser:G},{code:75,name:"shapeNumber",parser:G},{code:74,name:"elementTypeFlag",parser:G},{code:49,name:"elementLength",parser:G}],{elementTypeFlag:0,elementLength:0}),ir={BLOCK_RECORD:tr,DIMSTYLE:or,LAYER:sr,LTYPE:w([{code:49,name:"pattern",parser(e,a){const r={};return cr(e,a,r),r},isMultiple:!0},{code:40,name:"totalPatternLength",parser:G},{code:73,name:"numberOfLineTypes",parser:G},{code:72,parser:G},{code:3,name:"description",parser:G},{code:70,name:"standardFlag",parser:G},{code:2,name:"name",parser:G},{code:100,name:"subclassMarker",parser:G},...nr]),STYLE:w([{code:1e3,name:"extendedFont",parser:G},{code:1001},{code:4,name:"bigFont",parser:G},{code:3,name:"font",parser:G},{code:42,name:"lastHeight",parser:G},{code:71,name:"textGenerationFlag",parser:G},{code:50,name:"obliqueAngle",parser:G},{code:41,name:"widthFactor",parser:G},{code:40,name:"fixedTextHeight",parser:G},{code:70,name:"standardFlag",parser:G},{code:2,name:"name",parser:G},{code:100,name:"subclassMarker",parser:G},...nr]),VPORT:w([{code:[63,421,431],name:"ambientColor",parser:G},{code:142,name:"contrast",parser:G},{code:141,name:"brightness",parser:G},{code:282,name:"defaultLightingType",parser:G},{code:292,name:"isDefaultLightingOn",parser:Y},{code:348,name:"visualStyleObjectId",parser:G},{code:333,name:"shadePlotObjectId",parser:G},{code:332,name:"backgroundObjectId",parser:G},{code:61,name:"majorGridLines",parser:G},{code:170,name:"shadePlotSetting",parser:G},{code:146,name:"elevation",parser:G},{code:79,name:"orthographicType",parser:G},{code:112,name:"ucsYAxis",parser:U},{code:111,name:"ucsXAxis",parser:U},{code:110,name:"ucsOrigin",parser:U},{code:74,name:"ucsIconSetting",parser:G},{code:71,name:"viewMode",parser:G},{code:281,name:"renderMode",parser:G},{code:1,name:"styleSheet",parser:G},{code:[331,441],name:"frozenLayers",parser:G,isMultiple:!0},{code:72,name:"circleSides",parser:G},{code:51,name:"viewTwistAngle",parser:G},{code:50,name:"snapRotationAngle",parser:G},{code:45,name:"viewHeight",parser:G},{code:44,name:"backClippingPlane",parser:G},{code:43,name:"frontClippingPlane",parser:G},{code:42,name:"lensLength",parser:G},{code:17,name:"viewTarget",parser:U},{code:16,name:"viewDirectionFromTarget",parser:U},{code:15,name:"gridSpacing",parser:U},{code:14,name:"snapSpacing",parser:U},{code:13,name:"snapBasePoint",parser:U},{code:12,name:"center",parser:U},{code:11,name:"upperRightCorner",parser:U},{code:10,name:"lowerLeftCorner",parser:U},{code:70,name:"standardFlag",parser:G},{code:2,name:"name",parser:G},{code:100,name:"subclassMarker",parser:G},...nr])},dr=w([{code:70,name:"maxNumberOfEntries",parser:G},{code:100,name:"subclassMarker",parser:G},{code:330,name:"ownerObjectId",parser:G},{code:102},{code:360,isMultiple:!0},{code:102},{code:5,name:"handle",parser:G},{code:2,name:"name",parser:G}]);function lr(e,a){const r={};for(;!k(e,0,"EOF")&&!k(e,0,"ENDSEC");){if(k(e,0,"TABLE")){e=a.next();const n={entries:[]};dr(e,a,n),r[n.name]=n}if(k(e,0)&&!k(e,0,"ENDTAB")){const n=e.value;e=a.next();const t=ir[n];if(!t){console.warn(`parseTable: Invalid table name '${n}'`),e=a.next();continue}const o={};t(e,a,o),r[n]?.entries.push(o)}e=a.next()}return r}class ur{constructor(e){this.lastReadGroup={code:0,value:0},this._pointer=0,this._data=e,this._eof=!1}next(){if(!this.hasNext())return this._eof?console.warn("Cannot call 'next' after EOF group has been read"):console.warn("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]),{code:0,value:"EOF"};const e=parseInt(this._data[this._pointer++],10),a={code:e,value:pr(e,this._data[this._pointer++])};return k(a,0,"EOF")&&(this._eof=!0),this.lastReadGroup=a,a}peek(){if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);let e={code:parseInt(this._data[this._pointer]),value:0};return e.value=pr(e.code,this._data[this._pointer+1]),e}rewind(e){e=e||1,this._pointer=this._pointer-2*e}hasNext(){return!(this._eof||this._pointer>this._data.length-2)}isEOF(){return this._eof}}function pr(e,a){return e<=9?a:e>=10&&e<=59?parseFloat(a.trim()):e>=60&&e<=99?parseInt(a.trim()):e>=100&&e<=109?a:e>=110&&e<=149?parseFloat(a.trim()):e>=160&&e<=179?parseInt(a.trim()):e>=210&&e<=239?parseFloat(a.trim()):e>=270&&e<=289?parseInt(a.trim()):e>=290&&e<=299?function(e){if("0"===e)return!1;if("1"===e)return!0;throw TypeError("String '"+e+"' cannot be cast to Boolean type")}(a.trim()):e>=300&&e<=369?a:e>=370&&e<=389?parseInt(a.trim()):e>=390&&e<=399?a:e>=400&&e<=409?parseInt(a.trim()):e>=410&&e<=419?a:e>=420&&e<=429?parseInt(a.trim()):e>=430&&e<=439?a:e>=440&&e<=459?parseInt(a.trim()):e>=460&&e<=469?parseFloat(a.trim()):e>=470&&e<=481||999===e||e>=1e3&&e<=1009?a:e>=1010&&e<=1059?parseFloat(a.trim()):e>=1060&&e<=1071?parseInt(a.trim()):(console.log("WARNING: Group code does not have a defined type: %j",{code:e,value:a}),a)}class mr{constructor(){this.point={},this.startCode=0,this.code=0,this.value=0,this.x=void 0,this.y=void 0,this.z=void 0}parseStart(e){this.startCode=e.code}setPoint(e){if(this.code=e.code,this.value=e.value,this.startCode===this.code&&(this.x=this.value),this.startCode!==this.code+10){const e={x:this.x??0,y:this.y??0,z:this.z??0};return this.reset(),e}if(this.y=this.value,this.startCode!==this.code+20){const e={x:this.x??0,y:this.y??0,z:this.z??0};return this.reset(),e}this.z=this.value}reset(){this.x=void 0,this.y=void 0,this.z=void 0}}class Er{constructor(){this.encoding="utf-8",this.encodingFailureFatal=!1}}class Ir extends Error{constructor(e,a,r){let n=`[Line ${a}]: ${e}`;r?.cause&&(n+=`\nCaused by ${r.cause.toString()}\n${r.cause.stack}`),super(n),this.line=a}}class hr extends EventTarget{constructor(e=new Er){super(),this.dxf={header:{},blocks:{},entities:[],tables:{},objects:{byName:{},byTree:void 0}},this._finalChunkSeen=!1,this._curChunk="",this._curGroupCode=null,this._curLineNum=1,this._eof=!1,this._curValue={code:0,value:0},this._curSection="",this._currVarName="",this._decoder=new TextDecoder(e.encoding,{fatal:e.encodingFailureFatal}),this._pointParser=new mr}Feed(e,a=!1){const r=this._decoder.decode(e??void 0,{stream:!a});this.FeedString(r,a)}FeedString(e,a=!1){if(this._finalChunkSeen)throw new Error("Data fed after final chunk processed");a&&(this._finalChunkSeen=!0),this._curChunk+=e,this._ProcessCurChunk(),a&&this._Finalize()}_Finalize(){}async FeedFile(e,a){const r=e.byteLength;for(let n=0;n<r;n+=65536){a?.throwIfAborted();const t=Math.min(r-n,65536),o=await e.slice(n,n+t);this.Feed(o,n+t>=r)}}_ProcessCurChunk(){for(const e of this._ConsumeCurChunkLines())if(this._ProcessLine(e),this._curLineNum++,!this._eof&&"HEADER"===this._curSection){let e=this._curValue.value;9===this._curValue.code?this._currVarName=e:10===this._curValue.code?this._pointParser.parseStart(this._curValue):this._pointParser.startCode===this._curValue.code||this._pointParser.startCode+10===this._curValue.code||this._pointParser.startCode+20===this._curValue.code?e=this._pointParser.setPoint(this._curValue):this._currVarName&&(this.dxf.header[this._currVarName]=e)}}*_ConsumeCurChunkLines(){let e=0;const a=this._curChunk.length;for(;e<a;){let r=this._curChunk.indexOf("\r",e),n=0;if(r>=0?(n=r+1,n<a&&"\n"==this._curChunk.charAt(n)&&n++):(r=this._curChunk.indexOf("\n",e),r>=0&&(n=r+1)),r<0)break;yield this._curChunk.substring(e,r),e=n}0!=e&&(this._curChunk=this._curChunk.substring(e))}_ProcessLine(e){if(null===this._curGroupCode){const a=e.trim();return this._curGroupCode=parseInt(a),void(isNaN(this._curGroupCode)&&this._Error("Bad group code: "+a))}const a=new fr(this._curGroupCode,e);if(!k(a,0,"EOF")){switch(a.value){case"SECTION":this._curSection="SECTION";break;case"HEADER":this._curSection="HEADER";break;case"BLOCKS":this._curSection="BLOCKS";break;case"ENTITIES":this._curSection="ENTITIES";break;case"TABLES":this._curSection="TABLES";break;case"OBJECTS":this._curSection="OBJECTS"}this._eof=!1}k(a,0,"EOF")&&(this._eof=!0),this._curValue=a,this._curGroupCode=null}_Error(e,a=null){let r;throw a&&(r={cause:a}),new Ir(e,this._curLineNum,r)}}class fr{constructor(e,a){this.code=e,this.value=pr(e,a)}}class Tr{constructor(){this.encoding="utf-8",this.encodingFailureFatal=!1}}class Dr extends EventTarget{constructor(e=new Tr){super(),this._decoder=new TextDecoder(e.encoding,{fatal:e.encodingFailureFatal})}parseSync(e){const a=e.split(/\r\n|\r|\n/g),r=new ur(a);if(!r.hasNext())throw Error("Empty file");return this.parseAll(r)}parseStream(e){let a="";const r=this;return new Promise(((n,t)=>{e.on("data",(e=>{a+=e})),e.on("end",(()=>{try{const e=a.split(/\r\n|\r|\n/g),t=new ur(e);if(!t.hasNext())throw Error("Empty file");n(r.parseAll(t))}catch(e){t(e)}})),e.on("error",(e=>{t(e)}))}))}async parseFromUrl(e,a){const r=await fetch(e,a);if(!r.body)return null;const n=r.body.getReader();let t="";for(;;){const{done:e,value:a}=await n.read();if(e){t+=this._decoder.decode(new ArrayBuffer(0),{stream:!1});break}t+=this._decoder.decode(a,{stream:!0})}return this.parseSync(t)}parseAll(e){const a={header:{},blocks:{},entities:[],tables:{},objects:{byName:{},byTree:void 0}};let r=e.next();for(;!k(r,0,"EOF");)k(r,0,"SECTION")&&(r=e.next(),k(r,2,"HEADER")?(r=e.next(),a.header=Ha(r,e)):k(r,2,"BLOCKS")?(r=e.next(),a.blocks=wa(r,e)):k(r,2,"ENTITIES")?(r=e.next(),a.entities=Va(r,e)):k(r,2,"TABLES")?(r=e.next(),a.tables=lr(r,e)):k(r,2,"OBJECTS")&&(r=e.next(),a.objects=rr(r,e))),r=e.next();return a}}const Or=Dr;return n})()));
