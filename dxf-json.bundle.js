var e,a;e=this,a=function(e,a){"use strict";e.BlockTypeFlag=void 0,(k=e.BlockTypeFlag||(e.BlockTypeFlag={}))[k.None=0]="None",k[k.Anonymous=1]="Anonymous",k[k.NonConstant=2]="NonConstant",k[k.Xref=4]="Xref",k[k.XrefOverlay=8]="XrefOverlay",k[k.ExternallyDependent=16]="ExternallyDependent",k[k.ResolvedOrDependent=32]="ResolvedOrDependent",k[k.ReferencedXref=64]="ReferencedXref",e.ColorCode=void 0,(w=e.ColorCode||(e.ColorCode={}))[w.BYBLOCK=0]="BYBLOCK",w[w.BYLAYER=256]="BYLAYER",e.DimensionType=void 0,(V=e.DimensionType||(e.DimensionType={}))[V.Rotated=0]="Rotated",V[V.Aligned=1]="Aligned",V[V.Angular=2]="Angular",V[V.Diameter=3]="Diameter",V[V.Radius=4]="Radius",V[V.Angular3Point=5]="Angular3Point",V[V.Ordinate=6]="Ordinate",V[V.ReferenceIsExclusive=32]="ReferenceIsExclusive",V[V.IsOrdinateXTypeFlag=64]="IsOrdinateXTypeFlag",V[V.IsCustomTextPositionFlag=128]="IsCustomTextPositionFlag",e.AttachmentPoint=void 0,(B=e.AttachmentPoint||(e.AttachmentPoint={}))[B.TopLeft=1]="TopLeft",B[B.TopCenter=2]="TopCenter",B[B.TopRight=3]="TopRight",B[B.MiddleLeft=4]="MiddleLeft",B[B.MiddleCenter=5]="MiddleCenter",B[B.MiddleRight=6]="MiddleRight",B[B.BottomLeft=7]="BottomLeft",B[B.BottomCenter=8]="BottomCenter",B[B.BottomRight=9]="BottomRight",e.DimensionTextLineSpacing=void 0,(H=e.DimensionTextLineSpacing||(e.DimensionTextLineSpacing={}))[H.AtLeast=1]="AtLeast",H[H.Exact=2]="Exact",e.DimensionTextVertical=void 0,(G=e.DimensionTextVertical||(e.DimensionTextVertical={}))[G.Center=0]="Center",G[G.Above=1]="Above",G[G.Outside=2]="Outside",G[G.JIS=3]="JIS",G[G.Below=4]="Below",e.DimensionZeroSuppression=void 0,(U=e.DimensionZeroSuppression||(e.DimensionZeroSuppression={}))[U.Feet=0]="Feet",U[U.None=1]="None",U[U.Inch=2]="Inch",U[U.FeetAndInch=3]="FeetAndInch",U[U.Leading=4]="Leading",U[U.Trailing=8]="Trailing",U[U.LeadingAndTrailing=12]="LeadingAndTrailing",e.DimensionZeroSuppressionAngular=void 0,(W=e.DimensionZeroSuppressionAngular||(e.DimensionZeroSuppressionAngular={}))[W.None=0]="None",W[W.Leading=1]="Leading",W[W.Trailing=2]="Trailing",W[W.LeadingAndTrailing=3]="LeadingAndTrailing",e.DimensionTextHorizontal=void 0,(Y=e.DimensionTextHorizontal||(e.DimensionTextHorizontal={}))[Y.Center=0]="Center",Y[Y.Left=1]="Left",Y[Y.Right=2]="Right",Y[Y.OverFirst=3]="OverFirst",Y[Y.OverSecond=4]="OverSecond",e.DimensionToleranceTextVertical=void 0,(j=e.DimensionToleranceTextVertical||(e.DimensionToleranceTextVertical={}))[j.Bottom=0]="Bottom",j[j.Center=1]="Center",j[j.Top=2]="Top",e.HatchSolidFill=void 0,(z=e.HatchSolidFill||(e.HatchSolidFill={}))[z.PatternFill=0]="PatternFill",z[z.SolidFill=1]="SolidFill",e.HatchAssociativity=void 0,(X=e.HatchAssociativity||(e.HatchAssociativity={}))[X.NonAssociative=0]="NonAssociative",X[X.Associative=1]="Associative",e.HatchStyle=void 0,(K=e.HatchStyle||(e.HatchStyle={}))[K.Normal=0]="Normal",K[K.Outer=1]="Outer",K[K.Ignore=2]="Ignore",e.HatchPatternType=void 0,(Z=e.HatchPatternType||(e.HatchPatternType={}))[Z.UserDefined=0]="UserDefined",Z[Z.Predefined=1]="Predefined",Z[Z.Custom=2]="Custom",e.HatchBoundaryAnnotation=void 0,(J=e.HatchBoundaryAnnotation||(e.HatchBoundaryAnnotation={}))[J.NotAnnotated=0]="NotAnnotated",J[J.Annotated=1]="Annotated",e.HatchGradientFlag=void 0,($=e.HatchGradientFlag||(e.HatchGradientFlag={}))[$.Solid=0]="Solid",$[$.Gradient=1]="Gradient",e.HatchGradientColorFlag=void 0,(q=e.HatchGradientColorFlag||(e.HatchGradientColorFlag={}))[q.TwoColor=0]="TwoColor",q[q.OneColor=1]="OneColor",e.BoundaryPathTypeFlag=void 0,(Q=e.BoundaryPathTypeFlag||(e.BoundaryPathTypeFlag={}))[Q.Default=0]="Default",Q[Q.External=1]="External",Q[Q.Polyline=2]="Polyline",Q[Q.Derived=4]="Derived",Q[Q.Textbox=8]="Textbox",Q[Q.Outermost=16]="Outermost",e.BoundaryPathEdgeType=void 0,(ee=e.BoundaryPathEdgeType||(e.BoundaryPathEdgeType={}))[ee.Line=1]="Line",ee[ee.Circular=2]="Circular",ee[ee.Elliptic=3]="Elliptic",ee[ee.Spline=4]="Spline",e.ObscuredLineTypes=void 0,(ea=e.ObscuredLineTypes||(e.ObscuredLineTypes={}))[ea.Off=0]="Off",ea[ea.Solid=1]="Solid",ea[ea.Dashed=2]="Dashed",ea[ea.Dotted=3]="Dotted",ea[ea.ShotDash=4]="ShotDash",ea[ea.MediumDash=5]="MediumDash",ea[ea.LongDash=6]="LongDash",ea[ea.DoubleShortDash=7]="DoubleShortDash",ea[ea.DoubleMediumDash=8]="DoubleMediumDash",ea[ea.DoubleLongDash=9]="DoubleLongDash",ea[ea.DoubleMediumLongDash=10]="DoubleMediumLongDash",ea[ea.SparseDot=11]="SparseDot";let r={DRAGVS:"NULL",INTERFERECOLOR:1,INTERFEREOBJVS:"Conceptual",INTERFEREVPVS:"3d Wireframe",OBSLTYPE:e.ObscuredLineTypes.Off,SHADEDIF:70};function t(e,a,r){return e.code===a&&(null==r||e.value===r)}function n(e){let a={};e.rewind();let r=e.next(),t=r.code;if(a.x=r.value,(r=e.next()).code!==t+10)throw Error("Expected code for point value to be 20 but got "+r.code+".");return(a.y=r.value,(r=e.next()).code!==t+20)?e.rewind():a.z=r.value,a}e.ReservedLineweight=void 0,(er=e.ReservedLineweight||(e.ReservedLineweight={}))[er.Standard=-3]="Standard",er[er.ByLayer=-2]="ByLayer",er[er.ByBlock=-1]="ByBlock",e.Measurement=void 0,(et=e.Measurement||(e.Measurement={}))[et.English=0]="English",et[et.Metric=1]="Metric",e.ViewportStatusFlag=void 0,(en=e.ViewportStatusFlag||(e.ViewportStatusFlag={}))[en.PERSPECTIVE_MODE=1]="PERSPECTIVE_MODE",en[en.FRONT_CLIPPING=2]="FRONT_CLIPPING",en[en.BACK_CLIPPING=4]="BACK_CLIPPING",en[en.UCS_FOLLOW=8]="UCS_FOLLOW",en[en.FRONT_CLIP_NOT_AT_EYE=16]="FRONT_CLIP_NOT_AT_EYE",en[en.UCS_ICON_VISIBILITY=32]="UCS_ICON_VISIBILITY",en[en.UCS_ICON_AT_ORIGIN=64]="UCS_ICON_AT_ORIGIN",en[en.FAST_ZOOM=128]="FAST_ZOOM",en[en.SNAP_MODE=256]="SNAP_MODE",en[en.GRID_MODE=512]="GRID_MODE",en[en.ISOMETRIC_SNAP_STYLE=1024]="ISOMETRIC_SNAP_STYLE",en[en.HIDE_PLOT_MODE=2048]="HIDE_PLOT_MODE",en[en.K_ISO_PAIR_TOP=4096]="K_ISO_PAIR_TOP",en[en.K_ISO_PAIR_RIGHT=8192]="K_ISO_PAIR_RIGHT",en[en.VIEWPORT_ZOOM_LOCKING=16384]="VIEWPORT_ZOOM_LOCKING",en[en.UNUSED=32768]="UNUSED",en[en.NON_RECTANGULAR_CLIPPING=65536]="NON_RECTANGULAR_CLIPPING",en[en.VIEWPORT_OFF=131072]="VIEWPORT_OFF",en[en.GRID_BEYOND_DRAWING_LIMITS=262144]="GRID_BEYOND_DRAWING_LIMITS",en[en.ADAPTIVE_GRID_DISPLAY=524288]="ADAPTIVE_GRID_DISPLAY",en[en.SUBDIVISION_BELOW_SPACING=1048576]="SUBDIVISION_BELOW_SPACING",en[en.GRID_FOLLOWS_WORKPLANE=2097152]="GRID_FOLLOWS_WORKPLANE",e.RenderMode=void 0,(eo=e.RenderMode||(e.RenderMode={}))[eo.OPTIMIZED_2D=0]="OPTIMIZED_2D",eo[eo.WIREFRAME=1]="WIREFRAME",eo[eo.HIDDEN_LINE=2]="HIDDEN_LINE",eo[eo.FLAT_SHADED=3]="FLAT_SHADED",eo[eo.GOURAUD_SHADED=4]="GOURAUD_SHADED",eo[eo.FLAT_SHADED_WITH_WIREFRAME=5]="FLAT_SHADED_WITH_WIREFRAME",eo[eo.GOURAUD_SHADED_WITH_WIREFRAME=6]="GOURAUD_SHADED_WITH_WIREFRAME",e.UCSPerViewport=void 0,(es=e.UCSPerViewport||(e.UCSPerViewport={}))[es.UCS_UNCHANGED=0]="UCS_UNCHANGED",es[es.HAS_OWN_UCS=1]="HAS_OWN_UCS",e.OrthographicType=void 0,(ei=e.OrthographicType||(e.OrthographicType={}))[ei.NON_ORTHOGRAPHIC=0]="NON_ORTHOGRAPHIC",ei[ei.TOP=1]="TOP",ei[ei.BOTTOM=2]="BOTTOM",ei[ei.FRONT=3]="FRONT",ei[ei.BACK=4]="BACK",ei[ei.LEFT=5]="LEFT",ei[ei.RIGHT=6]="RIGHT",e.ShadePlotMode=void 0,(ec=e.ShadePlotMode||(e.ShadePlotMode={}))[ec.AS_DISPLAYED=0]="AS_DISPLAYED",ec[ec.WIREFRAME=1]="WIREFRAME",ec[ec.HIDDEN=2]="HIDDEN",ec[ec.RENDERED=3]="RENDERED",e.DefaultLightingType=void 0,(ed=e.DefaultLightingType||(e.DefaultLightingType={}))[ed.ONE_DISTANT_LIGHT=0]="ONE_DISTANT_LIGHT",ed[ed.TWO_DISTANT_LIGHTS=1]="TWO_DISTANT_LIGHTS";let o=Symbol();function s(e,a){return(r,n,s)=>{let i=e.reduce((e,a)=>{a.pushContext&&e.push({});let r=e[e.length-1];for(let e of"number"==typeof a.code?[a.code]:a.code){let t=r[e]??(r[e]=[]);a.isMultiple&&t.length&&console.warn(`Snippet ${t.at(-1).name} for code(${e}) is shadowed by ${a.name}`),t.push(a)}return e},[{}]),c=!1,d=i.length-1;for(;!t(r,0,"EOF");){let e=function(e,a,r){return e.find((e,t)=>t>=r&&e[a]?.length)}(i,r.code,d),a=e?.[r.code].at(-1);if(!e||!a){n.rewind();break}a.isMultiple||e[r.code].pop();let{name:t,parser:l,isMultiple:u}=a,p=l?.(r,n,s);if(p===o){n.rewind();break}if(t){let[e,a]=function(e,a){let r=a.split("."),t=e;for(let e=0;e<r.length-1;++e){let a=r[e];Object.hasOwn(t,a)||(t[a]={}),t=t[a]}return[t,r.at(-1)]}(s,t);u?(Object.hasOwn(e,a)||(e[a]=[]),e[a].push(p)):e[a]=p}a.pushContext&&(d-=1),c=!0,r=n.next()}return a&&Object.setPrototypeOf(s,a),c}}function i({value:e}){return e}function c(e,a){return n(a)}function d({value:e}){return!!e}var l,u,p,m,E,h,I,f,T,D,b,O,g,S,y,N,A,L,_,P,v,C,M,x,F,R,k,w,V,B,H,G,U,W,Y,j,z,X,K,Z,J,$,q,Q,ee,ea,er,et,en,eo,es,ei,ec,ed,el,eu,ep,em,eE,eh,eI,ef=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215];function eT(e,a){if(!t(e,1001))throw Error("XData must starts with code 1001");let r={appName:e.value,value:[]};e=a.next();let o=[r.value];for(;!t(e,0,"EOF")&&e.code>=1e3;){let r=o.at(-1);switch(e.code){case 1002:"{"===e.value?o.push([]):(o.pop(),o.at(-1)?.push(r));break;case 1e3:case 1004:case 1040:case 1070:case 1071:r.push({type:eD(e.code),value:e.value});break;case 1003:r.push({name:"layer",type:eD(e.code),value:e.value});break;case 1005:r.push({name:"handle",type:eD(e.code),value:e.value});break;case 1010:r.push({type:eD(e.code),value:n(a)});break;case 1011:r.push({name:"worldSpacePosition",type:eD(e.code),value:n(a)});break;case 1012:r.push({name:"worldSpaceDisplacement",type:eD(e.code),value:n(a)});break;case 1013:r.push({name:"worldSpaceDirection",type:eD(e.code),value:n(a)});break;case 1041:r.push({name:"distance",type:eD(e.code),value:e.value});break;case 1042:r.push({name:"scale",type:eD(e.code),value:e.value})}e=a.next()}return a.rewind(),r}function eD(e){switch(e){case 1e3:case 1003:case 1005:return"string";case 1004:return"hex";case 1040:case 1041:case 1042:return"real";case 1070:return"integer";case 1071:return"long";case 1010:case 1011:case 1012:case 1013:return"point";default:return""}}function eb(e,a,r){if(t(a,102))return ey(a,r),!0;switch(a.code){case 0:e.type=a.value;break;case 5:e.handle=a.value;break;case 330:e.ownerDictionarySoftId?e.ownerBlockRecordSoftId=a.value:e.ownerDictionarySoftId=a.value;break;case 360:e.ownerdictionaryHardId=a.value;break;case 67:e.isInPaperSpace=!!a.value;break;case 8:e.layer=a.value;break;case 6:e.lineType=a.value;break;case 347:e.materialObjectHardId=a.value;break;case 62:e.colorIndex=a.value,e.color=ef[Math.abs(a.value)];break;case 370:e.lineweight=a.value;break;case 48:e.lineTypeScale=a.value;break;case 60:e.isVisible=!!a.value;break;case 92:e.proxyByte=a.value;break;case 310:e.proxyEntity=a.value;break;case 100:break;case 420:e.color=a.value;break;case 430:e.transparency=a.value;break;case 390:e.plotStyleHardId=a.value;break;case 284:e.shadowMode=a.value;break;case 1001:e.xdata=eT(a,r);break;default:return!1}return!0}let eO=0;function eg(e){if(!e)throw TypeError("entity cannot be undefined or null");e.handle||(e.handle=eO++)}e.ShadowMode=void 0,(l=e.ShadowMode||(e.ShadowMode={}))[l.CAST_AND_RECEIVE=0]="CAST_AND_RECEIVE",l[l.CAST=1]="CAST",l[l.RECEIVE=2]="RECEIVE",l[l.IGNORE=3]="IGNORE";let eS=[{code:1001,name:"xdata",parser:eT},{code:284,name:"shadowMode",parser:i},{code:390,name:"plotStyleHardId",parser:i},{code:440,name:"transparency",parser:i},{code:430,name:"colorName",parser:i},{code:420,name:"color",parser:i},{code:310,name:"proxyEntity",parser:i},{code:92,name:"proxyByte",parser:i},{code:60,name:"isVisible",parser:d},{code:48,name:"lineTypeScale",parser:i},{code:370,name:"lineweight",parser:i},{code:62,name:"colorIndex",parser(e,a,r){let t=e.value;return r.color=ef[Math.abs(t)],t}},{code:347,name:"materialObjectHardId",parser:i},{code:6,name:"lineType",parser:i},{code:8,name:"layer",parser:i},{code:410,name:"layoutTabName",parser:i},{code:67,name:"isInPaperSpace",parser:d},{code:100},{code:330,name:"ownerBlockRecordSoftId",parser:i},{code:102,parser:ey},{code:102,parser:ey},{code:102,parser:ey},{code:5,name:"handle",parser:i}];function ey(e,a){for(e=a.next();!t(e,102)&&!t(e,0,"EOF");)e=a.next()}function eN(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}let eA={extrusionDirection:{x:0,y:0,z:1}},eL=[{code:210,name:"extrusionDirection",parser:c},{code:51,name:"endAngle",parser:i},{code:50,name:"startAngle",parser:i},{code:100,name:"subclassMarker",parser:i},{code:40,name:"radius",parser:i},{code:10,name:"center",parser:c},{code:39,name:"thickness",parser:i},{code:100},...eS];class e_{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){eN(this,"parser",s(eL,eA))}}function eP(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}eN(e_,"ForEntityName","ARC"),e.AttributeFlag=void 0,(u=e.AttributeFlag||(e.AttributeFlag={}))[u.NONE=0]="NONE",u[u.INVISIBLE=1]="INVISIBLE",u[u.CONSTANT=2]="CONSTANT",u[u.VERIFICATION_REQUIRED=4]="VERIFICATION_REQUIRED",u[u.PRESET=8]="PRESET",e.AttDefMTextFlag=void 0,(p=e.AttDefMTextFlag||(e.AttDefMTextFlag={}))[p.MULTILINE=2]="MULTILINE",p[p.CONSTANT_MULTILINE=4]="CONSTANT_MULTILINE",e.TextGenerationFlag=void 0,(m=e.TextGenerationFlag||(e.TextGenerationFlag={}))[m.NONE=0]="NONE",m[m.MIRRORED_X=2]="MIRRORED_X",m[m.MIRRORED_Y=4]="MIRRORED_Y",e.TextHorizontalAlign=void 0,(E=e.TextHorizontalAlign||(e.TextHorizontalAlign={}))[E.LEFT=0]="LEFT",E[E.CENTER=1]="CENTER",E[E.RIGHT=2]="RIGHT",E[E.ALIGNED=3]="ALIGNED",E[E.MIDDLE=4]="MIDDLE",E[E.FIT=5]="FIT",e.TextVerticalAlign=void 0,(h=e.TextVerticalAlign||(e.TextVerticalAlign={}))[h.BASELINE=0]="BASELINE",h[h.BOTTOM=1]="BOTTOM",h[h.MIDDLE=2]="MIDDLE",h[h.TOP=3]="TOP";let ev={thickness:0,rotation:0,xScale:1,obliqueAngle:0,styleName:"STANDARD",generationFlag:0,halign:e.TextHorizontalAlign.LEFT,valign:e.TextVerticalAlign.BASELINE,extrusionDirection:{x:0,y:0,z:1}},eC=[{code:73,name:"valign",parser:i},{code:100},{code:210,name:"extrusionDirection",parser:c},{code:11,name:"endPoint",parser:c},{code:72,name:"valign",parser:i},{code:72,name:"halign",parser:i},{code:71,name:"generationFlag",parser:i},{code:7,name:"styleName",parser:i},{code:51,name:"obliqueAngle",parser:i},{code:41,name:"xScale",parser:i},{code:50,name:"rotation",parser:i},{code:1,name:"text",parser:i},{code:40,name:"textHeight",parser:i},{code:10,name:"startPoint",parser:c},{code:39,name:"thickness",parser:i},{code:100,name:"subclassMarker",parser:i},...eS];class eM{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){eP(this,"parser",s(eC,ev))}}function ex(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}eP(eM,"ForEntityName","TEXT");let eF={...ev},eR=[{code:2},{code:40,name:"annotationScale",parser:i},{code:10,name:"alignmentPoint",parser:c},{code:340,name:"secondaryAttributesHardIds",isMultiple:!0,parser:i},{code:70,name:"numberOfSecondaryAttributes",parser:i},{code:70,name:"isReallyLocked",parser:d},{code:70,name:"mtextFlag",parser:i},{code:280,name:"isDuplicatedRecord",parser:d},{code:100},{code:280,name:"isLocked",parser:d},{code:74,name:"valign",parser:i},{code:73},{code:70,name:"attributeFlag",parser:i},{code:2,name:"tag",parser:i},{code:3,name:"prompt",parser:i},{code:280},{code:100,name:"subclassMarker",parser:i},...eC.slice(2)];class ek{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){ex(this,"parser",s(eR,eF))}}function ew(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}ex(ek,"ForEntityName","ATTDEF");let eV={thickness:0,extrusionDirection:{x:0,y:0,z:1}},eB=[{code:210,name:"extrusionDirection",parser:c},{code:40,name:"radius",parser:i},{code:10,name:"center",parser:c},{code:39,name:"thickness",parser:i},{code:100,name:"subclassMarker",parser:i},...eS];class eH{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){ew(this,"parser",s(eB,eV))}}ew(eH,"ForEntityName","CIRCLE");class eG{parseEntity(e,a){let r={};for(;!t(a,0,"EOF");){if(0===a.code){e.rewind();break}(function(e,a,r){switch(a.code){case 100:e.subclassMarker=a.value;break;case 280:e.version=a.value;break;case 2:e.name=a.value;break;case 10:e.definitionPoint=n(r);break;case 11:e.textPoint=n(r);break;case 12:e.insertionPoint=n(r);break;case 13:e.subDefinitionPoint1=n(r);break;case 14:e.subDefinitionPoint2=n(r);break;case 15:e.centerPoint=n(r);break;case 16:e.arcPoint=n(r);break;case 70:e.dimensionType=a.value;break;case 71:e.attachmentPoint=a.value;break;case 72:e.textLineSpacingStyle=a.value;break;case 40:e.leaderLength=a.value;break;case 41:e.textLineSpacingFactor=a.value;break;case 42:e.measurement=a.value;break;case 1:e.text=a.value;break;case 50:e.rotationAngle=a.value;break;case 52:e.obliqueAngle=a.value;break;case 53:e.textRotation=a.value;break;case 51:e.ocsRotation=a.value;break;case 210:e.extrusionDirection=n(r);break;case 3:e.styleName=a.value;break;default:eb(e,a,r)}})(r,a,e),a=e.next()}return r}}function eU(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}f="DIMENSION",(I="ForEntityName")in eG?Object.defineProperty(eG,I,{value:f,enumerable:!0,configurable:!0,writable:!0}):eG[I]=f;let eW={extrusionDirection:{x:0,y:0,z:1}},eY=[{code:42,name:"endAngle",parser:i},{code:41,name:"startAngle",parser:i},{code:40,name:"axisRatio",parser:i},{code:210,name:"extrusionDirection",parser:c},{code:11,name:"majorAxisEndPoint",parser:c},{code:10,name:"center",parser:c},{code:100,name:"subclassMarker",parser:i},...eS];class ej{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){eU(this,"parser",s(eY,eW))}}eU(ej,"ForEntityName","ELLIPSE");let ez=[{code:330,name:"sourceBoundaryObjects",parser:i,isMultiple:!0},{code:97,name:"numberOfSourceBoundaryObjects",parser:i}],eX=[{code:11,name:"end",parser:c},{code:10,name:"start",parser:c}],eK=[{code:73,name:"isCCW",parser:d},{code:51,name:"endAngle",parser:i},{code:50,name:"startAngle",parser:i},{code:40,name:"radius",parser:i},{code:10,name:"center",parser:c}],eZ=[{code:73,name:"isCCW",parser:d},{code:51,name:"endAngle",parser:i},{code:50,name:"startAngle",parser:i},{code:40,name:"lengthOfMinorAxis",parser:i},{code:11,name:"end",parser:c},{code:10,name:"center",parser:c}],eJ=[{code:13,name:"endTangent",parser:c},{code:12,name:"startTangent",parser:c},{code:11,name:"fitDatum",isMultiple:!0,parser:c},{code:97,name:"numberOfFitData",parser:i},{code:10,name:"controlPoints",isMultiple:!0,parser(e,a){let r={...n(a),weight:1};return 42===(e=a.next()).code?r.weight=e.value:a.rewind(),r}},{code:40,name:"knots",isMultiple:!0,parser:i},{code:96,name:"numberOfControlPoints",parser:i},{code:95,name:"numberOfKnots",parser:i},{code:74,name:"isPeriodic",parser:d},{code:73,name:"splineFlag",parser:i},{code:94,name:"degree",parser:i}],e$={[e.BoundaryPathEdgeType.Line]:eX,[e.BoundaryPathEdgeType.Circular]:eK,[e.BoundaryPathEdgeType.Elliptic]:eZ,[e.BoundaryPathEdgeType.Spline]:eJ},eq=[...ez,{code:72,name:"edges",parser(e,a){let r={type:e.value},t=s(e$[r.type]);if(!t)throw Error(`Invalid edge type ${r.type}`);return t(e=a.next(),a,r),r},isMultiple:!0},{code:93,name:"numberOfEdges",parser:i}],eQ=[...ez,{code:10,name:"vertices",parser(e,a){let r={...n(a),bulge:0};return 42===(e=a.next()).code?r.bulge=e.value:a.rewind(),r},isMultiple:!0},{code:93,name:"numberOfVertices",parser:i},{code:73,name:"isClosed",parser:d},{code:72,name:"hasBulge",parser:d}],e0=[{code:49,name:"dashLengths",parser:i,isMultiple:!0},{code:79,name:"numberOfDashLengths",parser:i},{code:45,name:"offset",parser:e1},{code:43,name:"base",parser:e1},{code:53,name:"angle",parser:i}];function e1(e,a){let r=e.code+1,t={x:e.value,y:1};return(e=a.next()).code===r?t.y=e.value:a.rewind(),t}function e4(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}let e2={extrusionDirection:{x:0,y:0,z:1},gradientRotation:0,colorTint:0},e3=[{code:470},{code:463},{code:462,name:"colorTint",parser:i},{code:461,name:"gradientDefinition",parser:i},{code:460,name:"gradientRotation",parser:i},{code:453,name:"numberOfColors",parser:i},{code:452,name:"gradientColorFlag",parser:i},{code:451},{code:450,name:"gradientFlag",parser:i},{code:10,name:"seedPoints",parser:c,isMultiple:!0},{code:99},{code:11,name:"offsetVector",parser:c},{code:98,name:"numberOfSeedPoints",parser:i},{code:47,name:"pixelSize",parser:i},{code:53,name:"definitionLines",parser:function(e,a){let r={};return s(e0)(e,a,r),r},isMultiple:!0},{code:78,name:"numberOfDefinitionLines",parser:i},{code:77,name:"isDouble",parser:d},{code:73,name:"isAnnotated",parser:d},{code:41,name:"patternScale",parser:i},{code:52,name:"patternAngle",parser:i},{code:76,name:"patternType",parser:i},{code:75,name:"hatchStyle",parser:i},{code:92,name:"boundaryPaths",parser:function(a,r){let t={boundaryPathTypeFlag:a.value},n=t.boundaryPathTypeFlag&e.BoundaryPathTypeFlag.Polyline;return(a=r.next(),n)?s(eQ)(a,r,t):s(eq)(a,r,t),t},isMultiple:!0},{code:91,name:"numberOfBoundaryPaths",parser:i},{code:71,name:"associativity",parser:i},{code:63,name:"patternFillColor",parser:i},{code:70,name:"solidFill",parser:i},{code:2,name:"patternName",parser:i},{code:210,name:"extrusionDirection",parser:c},{code:10,name:"elevationPoint",parser:c},{code:100,name:"subclassMarker",parser:i,pushContext:!0},...eS];class e7{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){e4(this,"parser",s(e3,e2))}}function e5(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}e4(e7,"ForEntityName","HATCH");let e6={xScale:1,yScale:1,zScale:1,rotation:0,columnCount:0,rowCount:0,columnSpacing:0,rowSpacing:0,extrusionDirection:{x:0,y:0,z:1}},e9=[{code:210,name:"extrusionDirection",parser:c},{code:45,name:"rowSpacing",parser:i},{code:44,name:"columnSpacing",parser:i},{code:71,name:"rowCount",parser:i},{code:70,name:"columnCount",parser:i},{code:50,name:"rotation",parser:i},{code:43,name:"zScale",parser:i},{code:42,name:"yScale",parser:i},{code:41,name:"xScale",parser:i},{code:10,name:"insertionPoint",parser:c},{code:2,name:"name",parser:i},{code:66,name:"isVariableAttributes",parser:d},{code:100,name:"subclassMarker",parser:i},...eS];class e8{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){e5(this,"parser",s(e9,e6))}}function ae(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}e5(e8,"ForEntityName","INSERT");let aa={isArrowheadEnabled:!0},ar=[{code:213,name:"offsetFromAnnotation",parser:c},{code:212,name:"offsetFromBlock",parser:c},{code:211,name:"horizontalDirection",parser:c},{code:210,name:"normal",parser:c},{code:340,name:"associatedAnnotation",parser:i},{code:77,name:"byBlockColor",parser:i},{code:10,name:"vertices",parser:c,isMultiple:!0},{code:76,name:"numberOfVertices",parser:i},{code:41,name:"textWidth",parser:i},{code:40,name:"textHeight",parser:i},{code:75,name:"isHooklineExists",parser:d},{code:74,name:"isHooklineSameDirection",parser:d},{code:73,name:"leaderCreationFlag",parser:i},{code:72,name:"isSpline",parser:d},{code:71,name:"isArrowheadEnabled",parser:d},{code:3,name:"styleName",parser:i},{code:100,name:"subclassMarker",parser:i},...eS];class at{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){ae(this,"parser",s(ar,aa))}}function an(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}ae(at,"ForEntityName","LEADER"),e.LeaderCreationFlag=void 0,(T=e.LeaderCreationFlag||(e.LeaderCreationFlag={}))[T.TextAnnotation=0]="TextAnnotation",T[T.ToleranceAnnotation=1]="ToleranceAnnotation",T[T.BlockReferenceAnnotation=2]="BlockReferenceAnnotation",T[T.NoAnnotation=3]="NoAnnotation";let ao={thickness:0,extrusionDirection:{x:0,y:0,z:1}},as=[{code:210,name:"extrusionDirection",parser:c},{code:11,name:"endPoint",parser:c},{code:10,name:"startPoint",parser:c},{code:39,name:"thickness",parser:i},{code:100,name:"subclassMarker",parser:i},...eS];class ai{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){an(this,"parser",s(as,ao))}}an(ai,"ForEntityName","LINE"),e.LWPolylineFlag=void 0,(D=e.LWPolylineFlag||(e.LWPolylineFlag={}))[D.IS_CLOSED=1]="IS_CLOSED",D[D.PLINE_GEN=128]="PLINE_GEN";let ac={flag:0,elevation:0,thickness:0,extrusionDirection:{x:0,y:0,z:1},vertices:[]},ad={bulge:0},al=[{code:42,name:"bulge",parser:i},{code:41,name:"endWidth",parser:i},{code:40,name:"startWidth",parser:i},{code:91,name:"id",parser:i},{code:20,name:"y",parser:i},{code:10,name:"x",parser:i}],au=[{code:210,name:"extrusionDirection",parser:c},{code:10,name:"vertices",isMultiple:!0,parser(e,a){let r={};return s(al,ad)(e,a,r),r}},{code:39,name:"thickness",parser:i},{code:38,name:"elevation",parser:i},{code:43,name:"constantWidth",parser:i},{code:70,name:"flag",parser:i},{code:90,name:"numberOfVertices",parser:i},{code:100,name:"subclassMarker",parser:i},...eS];class ap{parseEntity(e,a){let r={};return s(au,ac)(a,e,r),r}}function am(e,a){let r={};for(let t of e){let e=a(t);null!=e&&(r[e]??(r[e]=[]),r[e].push(t))}return r}function*aE(e,a=1/0,r=1){for(let t=e;t!==a;t+=r)yield t}function ah(e){return{x:e.x??0,y:e.y??0,z:e.z??0}}function aI(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}O="LWPOLYLINE",(b="ForEntityName")in ap?Object.defineProperty(ap,b,{value:O,enumerable:!0,configurable:!0,writable:!0}):ap[b]=O,e.MTextDrawingDirection=void 0,(g=e.MTextDrawingDirection||(e.MTextDrawingDirection={}))[g.LEFT_TO_RIGHT=1]="LEFT_TO_RIGHT",g[g.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM",g[g.BY_STYLE=5]="BY_STYLE";let af={textStyle:"STANDARD",extrusionDirection:{x:0,y:0,z:1},rotation:0},aT=[{code:46,name:"annotationHeight",parser:i},{code:101,parser(e,a){!function(e){e.rewind();let a=e.next();if(101!==a.code)throw Error("Bad call for skipEmbeddedObject()");do a=e.next();while(0!==a.code);e.rewind()}(a)}},{code:50,name:"columnHeight",parser:i},{code:49,name:"columnGutter",parser:i},{code:48,name:"columnWidth",parser:i},{code:79,name:"columnAutoHeight",parser:i},{code:78,name:"columnFlowReversed",parser:i},{code:76,name:"columnCount",parser:i},{code:75,name:"columnType",parser:i},{code:441,name:"backgroundFillTransparency",parser:i},{code:63,name:"backgroundFillColor",parser:i},{code:45,name:"fillBoxScale",parser:i},{code:[...aE(430,440)],name:"backgroundColor",parser:i},{code:[...aE(420,430)],name:"backgroundColor",parser:i},{code:90,name:"backgroundFill",parser:i},{code:44,name:"lineSpacing",parser:i},{code:73,name:"lineSpacingStyle",parser:i},{code:50,name:"rotation",parser:i},{code:43},{code:42},{code:11,name:"direction",parser:c},{code:210,name:"extrusionDirection",parser:c},{code:7,name:"styleName",parser:i},{code:3,name:"text",parser:(e,a,r)=>(r.text??"")+e.value},{code:1,name:"text",parser:i},{code:72,name:"drawingDirection",parser:i},{code:71,name:"attachmentPoint",parser:i},{code:41,name:"width",parser:i},{code:40,name:"height",parser:i},{code:10,name:"insertionPoint",parser:c},{code:100,name:"subclassMarker",parser:i},...eS];class aD{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){aI(this,"parser",s(aT,af))}}function ab(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}aI(aD,"ForEntityName","MTEXT");let aO={thickness:0,extrusionDirection:{x:0,y:0,z:1},angle:0},ag=[{code:50,name:"angle",parser:i},{code:210,name:"extrusionDirection",parser:c},{code:39,name:"thickness",parser:i},{code:10,name:"position",parser:c},{code:100,name:"subclassMarker",parser:i},...eS];class aS{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){ab(this,"parser",s(ag,aO))}}function ay(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}ab(aS,"ForEntityName","POINT"),e.PolylineFlag=void 0,(S=e.PolylineFlag||(e.PolylineFlag={}))[S.CLOSED_POLYLINE=1]="CLOSED_POLYLINE",S[S.CURVE_FIT=2]="CURVE_FIT",S[S.SPLINE_FIT=4]="SPLINE_FIT",S[S.POLYLINE_3D=8]="POLYLINE_3D",S[S.POLYGON_3D=16]="POLYGON_3D",S[S.CLOSED_POLYGON=32]="CLOSED_POLYGON",S[S.POLYFACE=64]="POLYFACE",S[S.CONTINUOUS=128]="CONTINUOUS",e.SmoothType=void 0,(y=e.SmoothType||(e.SmoothType={}))[y.NONE=0]="NONE",y[y.QUADRATIC=5]="QUADRATIC",y[y.CUBIC=6]="CUBIC",y[y.BEZIER=8]="BEZIER",e.VertexFlag=void 0,(N=e.VertexFlag||(e.VertexFlag={}))[N.CREATED_BY_CURVE_FIT=1]="CREATED_BY_CURVE_FIT",N[N.TANGENT_DEFINED=2]="TANGENT_DEFINED",N[N.NOT_USED=4]="NOT_USED",N[N.CREATED_BY_SPLINE_FIT=8]="CREATED_BY_SPLINE_FIT",N[N.SPLINE_CONTROL_POINT=16]="SPLINE_CONTROL_POINT",N[N.FOR_POLYLINE=32]="FOR_POLYLINE",N[N.FOR_POLYGON=64]="FOR_POLYGON",N[N.POLYFACE=128]="POLYFACE";let aN={startWidth:0,endWidth:0,bulge:0},aA=[{code:91,name:"id",parser:i},{code:[...aE(71,75)],name:"faces",isMultiple:!0,parser:i},{code:50,name:"tangentDirection",parser:i},{code:70,name:"flag",parser:i},{code:42,name:"bulge",parser:i},{code:41,name:"endWidth",parser:i},{code:40,name:"startWidth",parser:i},{code:30,name:"z",parser:i},{code:20,name:"y",parser:i},{code:10,name:"x",parser:i},{code:100,name:"subclassMarker",parser:i},{code:100},...eS];class aL{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){ay(this,"parser",s(aA,aN))}}function a_(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}ay(aL,"ForEntityName","VERTEX");let aP={thickness:0,flag:0,startWidth:0,endWidth:0,meshMVertexCount:0,meshNVertexCount:0,surfaceMDensity:0,surfaceNDensity:0,smoothType:0,extrusionDirection:{x:0,y:0,z:1},vertices:[]},av=[{code:0,name:"vertices",isMultiple:!0,parser:(e,a)=>t(e,0,"VERTEX")?(e=a.next(),new aL().parseEntity(a,e)):o},{code:210,name:"extrusionDirection",parser:c},{code:75,name:"smoothType",parser:i},{code:74,name:"surfaceNDensity",parser:i},{code:73,name:"surfaceMDensity",parser:i},{code:72,name:"meshNVertexCount",parser:i},{code:71,name:"meshMVertexCount",parser:i},{code:41,name:"endWidth",parser:i},{code:40,name:"startWidth",parser:i},{code:70,name:"flag",parser:i},{code:39,name:"thickness",parser:i},{code:30,name:"elevation",parser:i},{code:20},{code:10},{code:66},{code:100,name:"subclassMarker",parser:i},...eS];class aC{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){a_(this,"parser",s(av,aP))}}function aM(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}a_(aC,"ForEntityName","POLYLINE");let ax={vertices:[],backLineVertices:[]},aF=[{code:360,name:"geometrySettingHardId",parser:i},{code:12,name:"backLineVertices",isMultiple:!0,parser:c},{code:93,name:"numberOfBackLineVertices",parser:i},{code:11,name:"vertices",isMultiple:!0,parser:c},{code:92,name:"verticesCount",parser:i},{code:[63,411],name:"indicatorColor",parser:i},{code:70,name:"indicatorTransparency",parser:i},{code:41,name:"bottomHeight",parser:i},{code:40,name:"topHeight",parser:i},{code:10,name:"verticalDirection",parser:c},{code:1,name:"name",parser:i},{code:91,name:"flag",parser:i},{code:90,name:"state",parser:i},{code:100,name:"subclassMarker",parser:i},...eS];class aR{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){aM(this,"parser",s(aF,ax))}}function ak(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}aM(aR,"ForEntityName","SECTION");let aw={points:[],thickness:0,extrusionDirection:{x:0,y:0,z:1}},aV=[{code:210,name:"extrusionDirection",parser:c},{code:39,name:"thickness",parser:i},{code:[...aE(10,14)],name:"points",isMultiple:!0,parser:c},{code:100,name:"subclassMarker",parser:i},...eS];class aB{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){ak(this,"parser",s(aV,aw))}}function aH(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}ak(aB,"ForEntityName","SOLID"),e.SplineFlag=void 0,(A=e.SplineFlag||(e.SplineFlag={}))[A.NONE=0]="NONE",A[A.CLOSED=1]="CLOSED",A[A.PERIODIC=2]="PERIODIC",A[A.RATIONAL=4]="RATIONAL",A[A.PLANAR=8]="PLANAR",A[A.LINEAR=16]="LINEAR";let aG={knotTolerance:1e-6,controlTolerance:1e-6,fitTolerance:1e-9,knotValues:[],controlPoints:[],fitPoints:[]},aU=[{code:11,name:"fitPoints",isMultiple:!0,parser:c},{code:10,name:"controlPoints",isMultiple:!0,parser:c},{code:41,name:"weights",isMultiple:!0,parser:i},{code:40,name:"knots",isMultiple:!0,parser:i},{code:13,name:"endTangent",parser:c},{code:12,name:"startTangent",parser:c},{code:44,name:"fitTolerance",parser:i},{code:43,name:"controlTolerance",parser:i},{code:42,name:"knotTolerance",parser:i},{code:74,name:"numberOfFitPoints",parser:i},{code:73,name:"numberOfControlPoints",parser:i},{code:72,name:"numberOfKnots",parser:i},{code:71,name:"degree",parser:i},{code:70,name:"flag",parser:i},{code:210,name:"normal",parser:c},{code:100,name:"subclassMarker",parser:i},...eS];class aW{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){aH(this,"parser",s(aU,aG))}}aH(aW,"ForEntityName","SPLINE");class aY{parseEntity(e,a){let r={};for(;"EOF"!==a;){if(0===a.code){e.rewind();break}!function(e,a,r){if("EOF"===r)return!1;switch(r.code){case 0:return!1;case 100:e.subclassMarker=r.value;break;case 10:e.viewportCenter=ah(n(a));break;case 40:e.width=r.value;break;case 41:e.height=r.value;break;case 68:e.status=r.value;break;case 69:e.viewportId=r.value;break;case 12:e.displayCenter=n(a);break;case 13:e.snapBase=n(a);break;case 14:e.snapSpacing=n(a);break;case 15:e.gridSpacing=n(a);break;case 16:e.viewDirection=ah(n(a));break;case 17:e.targetPoint=ah(n(a));break;case 42:e.perspectiveLensLength=r.value;break;case 43:e.frontClipZ=r.value;break;case 44:e.backClipZ=r.value;break;case 45:e.viewHeight=r.value;break;case 50:e.snapAngle=r.value;break;case 51:e.viewTwistAngle=r.value;break;case 72:e.circleZoomPercent=r.value;break;case 331:e.frozenLayerIds??(e.frozenLayerIds=[]),e.frozenLayerIds.push(r.value);break;case 90:e.statusBitFlags=r.value;break;case 340:e.clippingBoundaryId=r.value;break;case 1:e.sheetName=r.value;break;case 281:e.renderMode=r.value;break;case 71:e.ucsPerViewport=r.value;break;case 110:e.ucsOrigin=ah(n(a));break;case 111:e.ucsXAxis=ah(n(a));break;case 112:e.ucsYAxis=ah(n(a));break;case 345:e.ucsId=r.value;break;case 346:e.ucsBaseId=r.value;break;case 79:e.orthographicType=r.value;break;case 146:e.elevation=r.value;break;case 170:e.shadePlotMode=r.value;break;case 61:e.majorGridFrequency=r.value;break;case 332:e.backgroundId=r.value;break;case 333:e.shadePlotId=r.value;break;case 348:e.visualStyleId=r.value;break;case 292:e.isDefaultLighting=!!r.value;break;case 282:e.defaultLightingType=r.value;break;case 141:e.brightness=r.value;break;case 142:e.contrast=r.value;break;case 63:case 421:case 431:e.ambientLightColor=r.value;break;case 361:e.sunId=r.value;break;case 335:case 343:case 344:case 91:e.softPointer=r.value}return!0}(r,e,a)&&eb(r,a,e),a=e.next()}return r}}function aj(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}_="VIEWPORT",(L="ForEntityName")in aY?Object.defineProperty(aY,L,{value:_,enumerable:!0,configurable:!0,writable:!0}):aY[L]=_,(P=el||(el={}))[P.INVISIBLE=1]="INVISIBLE",P[P.CONSTANT=2]="CONSTANT",P[P.REQUIRE_VERIFICATION=4]="REQUIRE_VERIFICATION",P[P.PRESET=8]="PRESET";let az={thickness:0,rotation:0,scale:1,obliqueAngle:0,textStyle:"STANDARD",textGenerationFlag:0,horizontalJustification:0,verticalJustification:0,extrusionDirection:{x:0,y:0,z:1}},aX=[...aT.slice(aT.findIndex(({name:e})=>"columnType"===e),aT.findIndex(({name:e})=>"subclassMarker"===e)+1),{code:100},{code:0,parser(e){if(!t(e,0,"MTEXT"))return o}},{code:2,name:"definitionTag",parser:i},{code:40,name:"annotationScale",parser:i},{code:10,name:"alignmentPoint",parser:c},{code:340,name:"secondaryAttributesHardId",parser:i},{code:70,name:"numberOfSecondaryAttributes",parser:i},{code:70,name:"isReallyLocked",parser:d},{code:70,name:"mtextFlag",parser:i},{code:280,name:"isDuplicatedEntriesKeep",parser:d},{code:100},{code:280,name:"lockPositionFlag",parser:d},{code:210,name:"extrusionDirection",parser:c},{code:11,name:"alignmentPoint",parser:c},{code:74,name:"verticalJustification",parser:i},{code:72,name:"horizontalJustification",parser:i},{code:71,name:"textGenerationFlag",parser:i},{code:7,name:"textStyle",parser:i},{code:51,name:"obliqueAngle",parser:i},{code:41,name:"scale",parser:i},{code:50,name:"rotation",parser:i},{code:73},{code:70,name:"attributeFlag",parser:i},{code:2,name:"tag",parser:i},{code:280},{code:100,name:"subclassMarker",parser:i},{code:1,name:"text",parser:i},{code:40,name:"textHeight",parser:i},{code:10,name:"startPoint",parser:c},{code:39,name:"thickness",parser:i},{code:100},...eS];class aK{parseEntity(e,a){let r={};return this.parser(a,e,r),r}constructor(){aj(this,"parser",s(aX,az))}}aj(aK,"ForEntityName","ATTRIB");let aZ=Object.fromEntries([e_,ek,aK,eH,eG,ej,e8,at,ai,ap,aD,aS,aC,aR,aB,aW,eM,e7,aY].map(e=>[e.ForEntityName,new e]));function aJ(e,a){let r=[];for(;!t(e,0,"EOF");){if(0===e.code){if("ENDBLK"===e.value||"ENDSEC"===e.value){a.rewind();break}let t=aZ[e.value];if(t){let n=e.value;e=a.next();let o=t.parseEntity(a,e);o.type=n,eg(o),r.push(o)}else console.warn(`Unsupported ENTITY type: ${e.value}`)}e=a.next()}return r}function a$(e,a){let r={};for(;!t(e,0,"EOF")&&!t(e,0,"ENDSEC");){if(t(e,0,"BLOCK")){let t=aq(e=a.next(),a);eg(t),t.name&&(r[t.name]=t)}e=a.next()}return r}function aq(e,a){let r={};for(;!t(e,0,"EOF");){if(t(e,0,"ENDBLK")){for(e=a.next();!t(e,0,"EOF");){if(t(e,100,"AcDbBlockEnd"))return r;e=a.next()}break}switch(e.code){case 1:r.xrefPath=e.value;break;case 2:r.name=e.value;break;case 3:r.name2=e.value;break;case 5:r.handle=e.value;break;case 8:r.layer=e.value;break;case 10:r.position=n(a);break;case 67:r.paperSpace=!!e.value&&1==e.value;break;case 70:0!==e.value&&(r.type=e.value);break;case 100:break;case 330:r.ownerHandle=e.value;break;case 0:r.entities=aJ(e,a)}e=a.next()}return r}function aQ(e,a){let r=null,o={};for(;!t(e,0,"EOF")&&!t(e,0,"ENDSEC");)9===e.code?r=e.value:10===e.code?o[r]=n(a):o[r]=e.value,e=a.next();return o}let a0=[{code:333,name:"shadePlotId",parser:i},{code:149,name:"imageOriginY",parser:i},{code:148,name:"imageOriginX",parser:i},{code:147,name:"scaleFactor",parser:i},{code:78,name:"shadePlotCustomDPI",parser:i},{code:77,name:"shadePlotResolution",parser:i},{code:76,name:"shadePlotMode",parser:i},{code:75,name:"standardScaleType",parser:i},{code:7,name:"currentStyleSheet",parser:i},{code:74,name:"plotType",parser:i},{code:73,name:"plotRotation",parser:i},{code:72,name:"paperUnit",parser:i},{code:70,name:"layoutFlag",parser:i},{code:143,name:"printScaleDenominator",parser:i},{code:142,name:"printScaleNominator",parser:i},{code:141,name:"windowAreaYMax",parser:i},{code:140,name:"windowAreaYMin",parser:i},{code:49,name:"windowAreaXMax",parser:i},{code:48,name:"windowAreaXMin",parser:i},{code:47,name:"plotOriginY",parser:i},{code:46,name:"plotOriginX",parser:i},{code:45,name:"paperHeight",parser:i},{code:44,name:"paperWidth",parser:i},{code:43,name:"marginTop",parser:i},{code:42,name:"marginRight",parser:i},{code:41,name:"marginBottom",parser:i},{code:40,name:"marginLeft",parser:i},{code:6,name:"plotViewName",parser:i},{code:4,name:"paperSize",parser:i},{code:2,name:"configName",parser:i},{code:1,name:"pageSetupName",parser:i},{code:100,name:"subclassMarker",parser:i}];(v=eu||(eu={}))[v.INCHES=0]="INCHES",v[v.MILLIMETERS=1]="MILLIMETERS",v[v.PIXELS=2]="PIXELS",(C=ep||(ep={}))[C.LAST_SCREEN_DISPLAY=0]="LAST_SCREEN_DISPLAY",C[C.DRAWING_EXTENTS=1]="DRAWING_EXTENTS",C[C.DRAWING_LIMITS=2]="DRAWING_LIMITS",C[C.VIEW_SPECIFIED=3]="VIEW_SPECIFIED",C[C.WINDOW_SPECIFIED=4]="WINDOW_SPECIFIED",C[C.LAYOUT_INFORMATION=5]="LAYOUT_INFORMATION",(M=em||(em={}))[M.AS_DISPLAYED=0]="AS_DISPLAYED",M[M.WIREFRAME=1]="WIREFRAME",M[M.HIDDEN=2]="HIDDEN",M[M.RENDERED=3]="RENDERED",(x=eE||(eE={}))[x.DRAFT=0]="DRAFT",x[x.PREVIEW=1]="PREVIEW",x[x.NORMAL=2]="NORMAL",x[x.PRESENTATION=3]="PRESENTATION",x[x.MAXIMUM=4]="MAXIMUM",x[x.CUSTOM=5]="CUSTOM";let a1=[{code:333,name:"shadePlotId",parser:i},{code:346,name:"orthographicUcsId",parser:i},{code:345,name:"namedUcsId",parser:i},{code:331,name:"viewportId",parser:i},{code:330,name:"paperSpaceTableId",parser:i},{code:76,name:"orthographicType",parser:i},{code:17,name:"ucsYAxis",parser:c},{code:16,name:"ucsXAxis",parser:c},{code:13,name:"ucsOrigin",parser:c},{code:146,name:"elevation",parser:i},{code:15,name:"maxExtent",parser:c},{code:14,name:"minExtent",parser:c},{code:12,name:"insertionBase",parser:c},{code:11,name:"maxLimit",parser:c},{code:10,name:"minLimit",parser:c},{code:71,name:"tabOrder",parser:i},{code:70,name:"controlFlag",parser:i},{code:1,name:"layoutName",parser:i},{code:100,name:"subclassMarker",parser:i},...a0];(F=eh||(eh={}))[F.PSLTSCALE=1]="PSLTSCALE",F[F.LIMCHECK=2]="LIMCHECK";let a4=[{code:330,name:"ownerObjectId",parser:i},{code:102},{code:360,name:"ownerDictionaryIdHard",parser:i},{code:102},{code:102},{code:330,name:"ownerDictionaryIdSoft",parser:i},{code:102},{code:102},{code:102},{code:5,name:"handle",parser:i}],a2=[{code:3,name:"entries",parser:(e,a)=>{let r={name:e.value};return 350===(e=a.next()).code?r.objectId=e.value:a.rewind(),r},isMultiple:!0},{code:281,name:"recordCloneFlag",parser:i},{code:280,name:"isHardOwned",parser:d},{code:100,name:"subclassMarker",parser:i}];function a3(e){return"AcDbDictionary"===e.subclassMarker}(R=eI||(eI={}))[R.NOT_APPLICABLE=0]="NOT_APPLICABLE",R[R.KEEP_EXISTING=1]="KEEP_EXISTING",R[R.USE_CLONE=2]="USE_CLONE",R[R.XREF_VALUE_NAME=3]="XREF_VALUE_NAME",R[R.VALUE_NAME=4]="VALUE_NAME",R[R.UNMANGLE_NAME=5]="UNMANGLE_NAME";let a7={LAYOUT:a1,PLOTSETTINGS:a0,DICTIONARY:a2};function a5(e,a){let r=[];for(;0!==e.code||!["EOF","ENDSEC"].includes(e.value);){let t=e.value,n=a7[t];if(0===e.code&&n?.length){let o=s([...a4,...n]),i={name:t};o(e=a.next(),a,i)?(r.push(i),e=a.peek()):e=a.next()}else e=a.next()}return{byName:am(r,({name:e})=>e),byTree:function(e){let a=Object.fromEntries(e.map(e=>[e.handle,e]));for(let r of e)(!a3(r)||"0"!==r.ownerDictionaryIdSoft)&&(r.ownerDictionaryIdSoft&&(r.ownerDictionarySoft=a[r.ownerDictionaryIdSoft]),r.ownerDictionaryIdHard&&(r.ownerDictionaryHard=a[r.ownerDictionaryIdHard]),r.ownerObjectId&&(r.ownerObject=a[r.ownerObjectId])),function(e,a){a3(e)&&e.entries&&(e.entries=Object.fromEntries(e.entries.map(({name:e,objectId:r})=>[e,a[r]])))}(r,a);return e[0]}(r)}}let a6=[{code:100,name:"subclassMarker",parser:i},{code:330,name:"ownerObjectId",parser:i},{code:102,parser(e,a){for(;!t(e,0,"EOF")&&!t(e,102,"}");)e=a.next()}},{code:5,name:"handle",parser:i}],a9=s([{code:310,name:"bmpPreview",parser:i},{code:281,name:"scalability",parser:i},{code:280,name:"explodability",parser:i},{code:70,name:"insertionUnits",parser:i},{code:340,name:"layoutObjects",parser:i},{code:2,name:"name",parser:i},{code:100,name:"subclassMarker",parser:i},...a6]),a8=s([...[{name:"DIMPOST",code:3},{name:"DIMAPOST",code:4},{name:"DIMBLK_OBSOLETE",code:5},{name:"DIMBLK1_OBSOLETE",code:6},{name:"DIMBLK2_OBSOLETE",code:7},{name:"DIMSCALE",code:40,defaultValue:1},{name:"DIMASZ",code:41,defaultValue:.25},{name:"DIMEXO",code:42,defaultValue:.625,defaultValueImperial:.0625},{name:"DIMDLI",code:43,defaultValue:3.75,defaultValueImperial:.38},{name:"DIMEXE",code:44,defaultValue:2.25,defaultValueImperial:.28},{name:"DIMRND",code:45,defaultValue:0},{name:"DIMDLE",code:46,defaultValue:0},{name:"DIMTP",code:47,defaultValue:0},{name:"DIMTM",code:48,defaultValue:0},{name:"DIMTXT",code:140,defaultValue:2.5,defaultValueImperial:.28},{name:"DIMCEN",code:141,defaultValue:2.5,defaultValueImperial:.09},{name:"DIMTSZ",code:142,defaultValue:0},{name:"DIMALTF",code:143,defaultValue:25.4},{name:"DIMLFAC",code:144,defaultValue:1},{name:"DIMTVP",code:145,defaultValue:0},{name:"DIMTFAC",code:146,defaultValue:1},{name:"DIMGAP",code:147,defaultValue:.625,defaultValueImperial:.09},{name:"DIMALTRND",code:148,defaultValue:0},{name:"DIMTOL",code:71,defaultValue:0,defaultValueImperial:1},{name:"DIMLIM",code:72,defaultValue:0},{name:"DIMTIH",code:73,defaultValue:0,defaultValueImperial:1},{name:"DIMTOH",code:74,defaultValue:0,defaultValueImperial:1},{name:"DIMSE1",code:75,defaultValue:0},{name:"DIMSE2",code:76,defaultValue:0},{name:"DIMTAD",code:77,defaultValue:e.DimensionTextVertical.Above,defaultValueImperial:e.DimensionTextVertical.Center},{name:"DIMZIN",code:78,defaultValue:e.DimensionZeroSuppression.Trailing,defaultValueImperial:e.DimensionZeroSuppression.Feet},{name:"DIMAZIN",code:79,defaultValue:e.DimensionZeroSuppressionAngular.None},{name:"DIMALT",code:170,defaultValue:0},{name:"DIMALTD",code:171,defaultValue:3,defaultValueImperial:2},{name:"DIMTOFL",code:172,defaultValue:1,defaultValueImperial:0},{name:"DIMSAH",code:173,defaultValue:0},{name:"DIMTIX",code:174,defaultValue:0},{name:"DIMSOXD",code:175,defaultValue:0},{name:"DIMCLRD",code:176,defaultValue:0},{name:"DIMCLRE",code:177,defaultValue:0},{name:"DIMCLRT",code:178,defaultValue:0},{name:"DIMADEC",code:179},{name:"DIMUNIT",code:270},{name:"DIMDEC",code:271,defaultValue:2,defaultValueImperial:4},{name:"DIMTDEC",code:272,defaultValue:2,defaultValueImperial:4},{name:"DIMALTU",code:273,defaultValue:2},{name:"DIMALTTD",code:274,defaultValue:2,defaultValueImperial:4},{name:"DIMAUNIT",code:275,defaultValue:0},{name:"DIMFRAC",code:276,defaultValue:0},{name:"DIMLUNIT",code:277,defaultValue:2},{name:"DIMDSEP",code:278,defaultValue:",",defaultValueImperial:"."},{name:"DIMJUST",code:280,defaultValue:e.DimensionTextHorizontal.Center},{name:"DIMSD1",code:281,defaultValue:0},{name:"DIMSD2",code:282,defaultValue:0},{name:"DIMTOLJ",code:283,defaultValue:e.DimensionToleranceTextVertical.Center},{name:"DIMTZIN",code:284,defaultValue:e.DimensionZeroSuppression.Trailing,defaultValueImperial:e.DimensionZeroSuppression.Feet},{name:"DIMALTZ",code:285,defaultValue:e.DimensionZeroSuppression.Trailing},{name:"DIMALTTZ",code:286,defaultValue:e.DimensionZeroSuppression.Trailing},{name:"DIMFIT",code:287},{name:"DIMUPT",code:288,defaultValue:0},{name:"DIMATFIT",code:289,defaultValue:3},{name:"DIMTXSTY",code:340},{name:"DIMLDRBLK",code:341},{name:"DIMBLK",code:342},{name:"DIMBLK1",code:343},{name:"DIMBLK2",code:344},{name:"DIMLWD",code:371,defaultValue:-2},{name:"DIMLWD",code:372,defaultValue:-2}].map(e=>({...e,parser:i})),{code:70,name:"standardFlag",parser:i},{code:2,name:"name",parser:i},{code:100,name:"subclassMarker",parser:i},{code:105,name:"handle",parser:i},...a6.filter(e=>5!==e.code)]),re=s([{code:347,name:"materialObjectId",parser:i},{code:390,name:"plotStyleNameObjectId",parser:i},{code:370,name:"lineweight",parser:i},{code:290,name:"isPlotting",parser:d},{code:6,name:"lineType",parser:i},{code:62,name:"colorIndex",parser:i},{code:70,name:"standardFlag",parser:i},{code:2,name:"name",parser:i},{code:100,name:"subclassMarker",parser:i},...a6]),ra=s([{code:9,name:"text",parser:i},{code:45,name:"offsetY",parser:i},{code:44,name:"offsetX",parser:i},{code:50,name:"rotation",parser:i},{code:46,name:"scale",parser:i},{code:340,name:"styleObjectId",parser:i},{code:75,name:"shapeNumber",parser:i},{code:74,name:"elementTypeFlag",parser:i},{code:49,name:"elementLength",parser:i}],{elementTypeFlag:0,elementLength:0}),rr={BLOCK_RECORD:a9,DIMSTYLE:a8,LAYER:re,LTYPE:s([{code:49,name:"pattern",parser(e,a){let r={};return ra(e,a,r),r},isMultiple:!0},{code:40,name:"totalPatternLength",parser:i},{code:73,name:"numberOfLineTypes",parser:i},{code:72,parser:i},{code:3,name:"description",parser:i},{code:70,name:"standardFlag",parser:i},{code:2,name:"name",parser:i},{code:100,name:"subclassMarker",parser:i},...a6]),STYLE:s([{code:1e3,name:"extendedFont",parser:i},{code:1001},{code:4,name:"bigFont",parser:i},{code:3,name:"font",parser:i},{code:42,name:"lastHeight",parser:i},{code:71,name:"textGenerationFlag",parser:i},{code:50,name:"obliqueAngle",parser:i},{code:41,name:"widthFactor",parser:i},{code:40,name:"fixedTextHeight",parser:i},{code:70,name:"standardFlag",parser:i},{code:2,name:"name",parser:i},{code:100,name:"subclassMarker",parser:i},...a6]),VPORT:s([{code:[63,421,431],name:"ambientColor",parser:i},{code:142,name:"contrast",parser:i},{code:141,name:"brightness",parser:i},{code:282,name:"defaultLightingType",parser:i},{code:292,name:"isDefaultLightingOn",parser:d},{code:348,name:"visualStyleObjectId",parser:i},{code:333,name:"shadePlotObjectId",parser:i},{code:332,name:"backgroundObjectId",parser:i},{code:61,name:"majorGridLines",parser:i},{code:170,name:"shadePlotSetting",parser:i},{code:146,name:"elevation",parser:i},{code:79,name:"orthographicType",parser:i},{code:112,name:"ucsYAxis",parser:c},{code:111,name:"ucsXAxis",parser:c},{code:110,name:"ucsOrigin",parser:c},{code:74,name:"ucsIconSetting",parser:i},{code:71,name:"viewMode",parser:i},{code:281,name:"renderMode",parser:i},{code:1,name:"styleSheet",parser:i},{code:[331,441],name:"frozenLayers",parser:i,isMultiple:!0},{code:72,name:"circleSides",parser:i},{code:51,name:"viewTwistAngle",parser:i},{code:50,name:"snapRotationAngle",parser:i},{code:45,name:"viewHeight",parser:i},{code:44,name:"backClippingPlane",parser:i},{code:43,name:"frontClippingPlane",parser:i},{code:42,name:"lensLength",parser:i},{code:17,name:"viewTarget",parser:c},{code:16,name:"viewDirectionFromTarget",parser:c},{code:15,name:"gridSpacing",parser:c},{code:14,name:"snapSpacing",parser:c},{code:13,name:"snapBasePoint",parser:c},{code:12,name:"center",parser:c},{code:11,name:"upperRightCorner",parser:c},{code:10,name:"lowerLeftCorner",parser:c},{code:70,name:"standardFlag",parser:i},{code:2,name:"name",parser:i},{code:100,name:"subclassMarker",parser:i},...a6])},rt=s([{code:70,name:"maxNumberOfEntries",parser:i},{code:100,name:"subclassMarker",parser:i},{code:330,name:"ownerObjectId",parser:i},{code:102},{code:360,isMultiple:!0},{code:102},{code:5,name:"handle",parser:i},{code:2,name:"name",parser:i}]);function rn(e,a){let r={};for(;!t(e,0,"EOF")&&!t(e,0,"ENDSEC");){if(t(e,0,"TABLE")){e=a.next();let t={entries:[]};rt(e,a,t),r[t.name]=t}if(t(e,0)&&!t(e,0,"ENDTAB")){let t=e.value;e=a.next();let n=rr[t];if(!n){console.warn(`parseTable: Invalid table name '${t}'`),e=a.next();continue}let o={};n(e,a,o),r[t]?.entries.push(o)}e=a.next()}return r}function ro(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}class rs{next(){if(!this.hasNext())return this._eof?console.warn("Cannot call 'next' after EOF group has been read"):console.warn("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]),{code:0,value:"EOF"};let e=parseInt(this._data[this._pointer++],10),a=ri(e,this._data[this._pointer++]),r={code:e,value:a};return t(r,0,"EOF")&&(this._eof=!0),this.lastReadGroup=r,r}peek(){if(!this.hasNext()){if(this._eof)throw Error("Cannot call 'next' after EOF group has been read");throw Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer])}let e={code:parseInt(this._data[this._pointer]),value:0};return e.value=ri(e.code,this._data[this._pointer+1]),e}rewind(e){e=e||1,this._pointer=this._pointer-2*e}hasNext(){return!this._eof&&!(this._pointer>this._data.length-2)}isEOF(){return this._eof}constructor(e){ro(this,"_pointer",void 0),ro(this,"_data",void 0),ro(this,"_eof",void 0),ro(this,"lastReadGroup",{code:0,value:0}),this._pointer=0,this._data=e,this._eof=!1}}function ri(e,a){return e<=9?a:e>=10&&e<=59?parseFloat(a.trim()):e>=60&&e<=99?parseInt(a.trim()):e>=100&&e<=109?a:e>=110&&e<=149?parseFloat(a.trim()):e>=160&&e<=179?parseInt(a.trim()):e>=210&&e<=239?parseFloat(a.trim()):e>=270&&e<=289?parseInt(a.trim()):e>=290&&e<=299?function(e){if("0"===e)return!1;if("1"===e)return!0;throw TypeError("String '"+e+"' cannot be cast to Boolean type")}(a.trim()):e>=300&&e<=369?a:e>=370&&e<=389?parseInt(a.trim()):e>=390&&e<=399?a:e>=400&&e<=409?parseInt(a.trim()):e>=410&&e<=419?a:e>=420&&e<=429?parseInt(a.trim()):e>=430&&e<=439?a:e>=440&&e<=459?parseInt(a.trim()):e>=460&&e<=469?parseFloat(a.trim()):e>=470&&e<=481||999===e||e>=1e3&&e<=1009?a:e>=1010&&e<=1059?parseFloat(a.trim()):e>=1060&&e<=1071?parseInt(a.trim()):(console.log("WARNING: Group code does not have a defined type: %j",{code:e,value:a}),a)}function rc(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}class rd{parseStart(e){this.startCode=e.code}setPoint(e){if(this.code=e.code,this.value=e.value,this.startCode===this.code&&(this.x=this.value),this.startCode===this.code+10)this.y=this.value;else{let e={x:this.x??0,y:this.y??0,z:this.z??0};return this.reset(),e}if(this.startCode===this.code+20)this.z=this.value;else{let e={x:this.x??0,y:this.y??0,z:this.z??0};return this.reset(),e}}reset(){this.x=void 0,this.y=void 0,this.z=void 0}constructor(){rc(this,"point",{}),rc(this,"startCode",0),rc(this,"code",0),rc(this,"value",0),rc(this,"x",void 0),rc(this,"y",void 0),rc(this,"z",void 0)}}function rl(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}class ru{constructor(){rl(this,"encoding","utf-8"),rl(this,"encodingFailureFatal",!1)}}class rp extends Error{constructor(e,a,r){let t=`[Line ${a}]: ${e}`;r?.cause&&(t+=`
Caused by ${r.cause.toString()}
${r.cause.stack}`),super(t),rl(this,"line",void 0),this.line=a}}class rm extends EventTarget{Feed(e,a=!1){let r=this._decoder.decode(e??void 0,{stream:!a});this.FeedString(r,a)}FeedString(e,a=!1){if(this._finalChunkSeen)throw Error("Data fed after final chunk processed");a&&(this._finalChunkSeen=!0),this._curChunk+=e,this._ProcessCurChunk(),a&&this._Finalize()}_Finalize(){}async FeedFile(e,a){let r=e.byteLength;for(let t=0;t<r;t+=65536){a?.throwIfAborted();let n=Math.min(r-t,65536),o=await e.slice(t,t+n);this.Feed(o,t+n>=r)}}_ProcessCurChunk(){for(let e of this._ConsumeCurChunkLines())if(this._ProcessLine(e),this._curLineNum++,!this._eof&&"HEADER"===this._curSection){let e=this._curValue.value;9===this._curValue.code?this._currVarName=e:10===this._curValue.code?this._pointParser.parseStart(this._curValue):this._pointParser.startCode===this._curValue.code||this._pointParser.startCode+10===this._curValue.code||this._pointParser.startCode+20===this._curValue.code?e=this._pointParser.setPoint(this._curValue):this._currVarName&&(this.dxf.header[this._currVarName]=e)}}*_ConsumeCurChunkLines(){let e=0,a=this._curChunk.length;for(;e<a;){let r=this._curChunk.indexOf("\r",e),t=0;if(r>=0?(t=r+1)<a&&"\n"==this._curChunk.charAt(t)&&t++:(r=this._curChunk.indexOf("\n",e))>=0&&(t=r+1),r<0)break;yield this._curChunk.substring(e,r),e=t}0!=e&&(this._curChunk=this._curChunk.substring(e))}_ProcessLine(e){if(null===this._curGroupCode){let a=e.trim();this._curGroupCode=parseInt(a),isNaN(this._curGroupCode)&&this._Error("Bad group code: "+a);return}let a=new rE(this._curGroupCode,e);if(!t(a,0,"EOF")){switch(a.value){case"SECTION":this._curSection="SECTION";break;case"HEADER":this._curSection="HEADER";break;case"BLOCKS":this._curSection="BLOCKS";break;case"ENTITIES":this._curSection="ENTITIES";break;case"TABLES":this._curSection="TABLES";break;case"OBJECTS":this._curSection="OBJECTS"}this._eof=!1}t(a,0,"EOF")&&(this._eof=!0),this._curValue=a,this._curGroupCode=null}_Error(e,a=null){let r;throw a&&(r={cause:a}),new rp(e,this._curLineNum,r)}constructor(e=new ru){super(),rl(this,"dxf",{header:{},blocks:{},entities:[],tables:{},objects:{byName:{},byTree:void 0}}),rl(this,"_decoder",void 0),rl(this,"_pointParser",void 0),rl(this,"_finalChunkSeen",!1),rl(this,"_curChunk",""),rl(this,"_curGroupCode",null),rl(this,"_curLineNum",1),rl(this,"_eof",!1),rl(this,"_curValue",{code:0,value:0}),rl(this,"_curSection",""),rl(this,"_currVarName",""),this._decoder=new TextDecoder(e.encoding,{fatal:e.encodingFailureFatal}),this._pointParser=new rd}}class rE{constructor(e,a){rl(this,"code",void 0),rl(this,"value",void 0),this.code=e,this.value=ri(e,a)}}function rh(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}class rI{constructor(){rh(this,"encoding","utf-8"),rh(this,"encodingFailureFatal",!1)}}class rf extends EventTarget{parseSync(e){let a=new rs(e.split(/\r\n|\r|\n/g));if(!a.hasNext())throw Error("Empty file");return this.parseAll(a)}parseStream(e){let a="",r=this;return new Promise((t,n)=>{e.on("data",e=>{a+=e}),e.on("end",()=>{try{let e=a.split(/\r\n|\r|\n/g),n=new rs(e);if(!n.hasNext())throw Error("Empty file");t(r.parseAll(n))}catch(e){n(e)}}),e.on("error",e=>{n(e)})})}async parseFromUrl(e,a){let r=await fetch(e,a);if(!r.body)return null;let t=r.body.getReader(),n="";for(;;){let{done:e,value:a}=await t.read();if(e){n+=this._decoder.decode(new ArrayBuffer(0),{stream:!1});break}n+=this._decoder.decode(a,{stream:!0})}return this.parseSync(n)}parseAll(e){let a={header:{},blocks:{},entities:[],tables:{},objects:{byName:{},byTree:void 0}},r=e.next();for(;!t(r,0,"EOF");)t(r,0,"SECTION")&&(t(r=e.next(),2,"HEADER")?(r=e.next(),a.header=aQ(r,e)):t(r,2,"BLOCKS")?(r=e.next(),a.blocks=a$(r,e)):t(r,2,"ENTITIES")?(r=e.next(),a.entities=aJ(r,e)):t(r,2,"TABLES")?(r=e.next(),a.tables=rn(r,e)):t(r,2,"OBJECTS")&&(r=e.next(),a.objects=a5(r,e))),r=e.next();return a}constructor(e=new rI){super(),rh(this,"_decoder",void 0),this._decoder=new TextDecoder(e.encoding,{fatal:e.encodingFailureFatal})}}e.default=a,e.ArcEntityParser=e_,e.AttDefEntityParser=ek,e.CircleEntityParser=eH,e.CommonEntitySnippets=eS,e.DefaultDxfHeaderVariables=r,e.DefaultTextEntity=ev,e.DxfParser=rf,e.DxfParsingError=rp,e.DxfStreamParser=rm,e.DxfStreamParserOptions=ru,e.EllipseEntityParser=ej,e.HatchEntityParser=e7,e.INDEXED_CHUNK_SIZE=65536,e.InsertEntityParser=e8,e.LWPolylineParser=ap,e.LeaderEntityParser=at,e.LineEntityParser=ai,e.MTextEntityParser=aD,e.MTextEntityParserSnippets=aT,e.PointEntityParser=aS,e.PolylineParser=aC,e.SPLINE_SUBDIVISION=4,e.SectionEntityParser=aR,e.SolidEntityParser=aB,e.SplineEntityParser=aW,e.TESSELLATION_ANGLE=Math.PI/24,e.TextEntityParser=eM,e.TextEntityParserSnippets=eC,e.UndeterminedBlockColor=-1,e.VertexParser=aL,e.classify=am,e.ensureHandle=eg,e.ensurePoint3D=ah,e.flooding=function({seeds:e,spanner:a,serializer:r,iterationLimit:t=1/0}){let n=new Set,o=0;return e.map(e=>{let s=[],i=[[e,r(e)]];for(;i.length&&o++<t;){let[e,t]=i.pop();if(!n.has(t))for(let o of(n.add(t),s.push(e),a(e)))i.push([o,r(o)])}return s}).filter(e=>e.length)},e.generateIntegers=aE,e.isMatched=t,e.parseBlock=aq,e.parseBlocks=a$,e.parseEntities=aJ,e.parseHeader=aQ,e.parseObjects=a5,e.parseTables=rn,e.skipApplicationGroups=ey,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?a(exports,require("dxf-json")):"function"==typeof define&&define.amd?define(["exports","dxf-json"],a):a((e="undefined"!=typeof globalThis?globalThis:e||self).DxfJson={},e.DxfParser$1);
